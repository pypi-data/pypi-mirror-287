Metadata-Version: 2.1
Name: mindformers
Version: 1.2.0
Summary: mindformers platform: linux, cpu: x86_64
Home-page: https://www.mindspore.cn
Download-URL: https://gitee.com/mindspore/mindformers/tags
Author: The MindSpore Authors
Author-email: contact@mindspore.cn
License: Apache 2.0
Project-URL: Sources, https://gitee.com/mindspore/mindformers
Project-URL: Issue Tracker, https://gitee.com/mindspore/mindformers/issues
Keywords: mindformers
Platform: linux
Classifier: Development Status :: 5 - Production/Stable
Classifier: Environment :: Console
Classifier: Environment :: Web Environment
Classifier: Intended Audience :: Science/Research
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Topic :: Scientific/Engineering
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Software Development
Classifier: Topic :: Software Development :: Libraries
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: setuptools
Requires-Dist: sentencepiece >=0.1.97
Requires-Dist: ftfy >=6.1.1
Requires-Dist: regex >=2022.10.31
Requires-Dist: tqdm >=4.65.0
Requires-Dist: pyyaml >=6.0
Requires-Dist: jieba >=0.42.1
Requires-Dist: rouge-chinese >=1.0.3
Requires-Dist: nltk >=2.0
Requires-Dist: mindpet ==1.0.4
Requires-Dist: mdtex2html
Requires-Dist: opencv-python-headless
Requires-Dist: pyarrow ==12.0.1
Requires-Dist: tokenizers ==0.15.0
Requires-Dist: astunparse >=1.6.3
Requires-Dist: numpy <2.0.0

# Ê¨¢ËøéÊù•Âà∞MindSpore TransformersÔºàMindFormersÔºâ

[![LICENSE](https://img.shields.io/github/license/mindspore-lab/mindformers.svg?style=flat-square)](https://github.com/mindspore-lab/mindformers/blob/master/LICENSE)
[![Downloads](https://static.pepy.tech/badge/mindformers)](https://pepy.tech/project/mindformers)
[![PyPI](https://badge.fury.io/py/mindformers.svg)](https://badge.fury.io/py/mindformers)
[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/mindformers.svg)](https://pypi.org/project/mindformers)

## ‰∏Ä„ÄÅ‰ªãÁªç

MindSpore TransformersÂ•ó‰ª∂ÁöÑÁõÆÊ†áÊòØÊûÑÂª∫‰∏Ä‰∏™Â§ßÊ®°ÂûãËÆ≠ÁªÉ„ÄÅÂæÆË∞É„ÄÅËØÑ‰º∞„ÄÅÊé®ÁêÜ„ÄÅÈÉ®ÁΩ≤ÁöÑÂÖ®ÊµÅÁ®ãÂºÄÂèëÂ•ó‰ª∂ÔºåÊèê‰æõ‰∏öÂÜÖ‰∏ªÊµÅÁöÑTransformerÁ±ªÈ¢ÑËÆ≠ÁªÉÊ®°ÂûãÂíåSOTA‰∏ãÊ∏∏‰ªªÂä°Â∫îÁî®ÔºåÊ∂µÁõñ‰∏∞ÂØåÁöÑÂπ∂Ë°åÁâπÊÄß„ÄÇÊúüÊúõÂ∏ÆÂä©Áî®Êà∑ËΩªÊùæÁöÑÂÆûÁé∞Â§ßÊ®°ÂûãËÆ≠ÁªÉÂíåÂàõÊñ∞Á†îÂèë„ÄÇ

MindSpore TransformersÂ•ó‰ª∂Âü∫‰∫éMindSporeÂÜÖÁΩÆÁöÑÂπ∂Ë°åÊäÄÊúØÂíåÁªÑ‰ª∂ÂåñËÆæËÆ°ÔºåÂÖ∑Â§áÂ¶Ç‰∏ãÁâπÁÇπÔºö

- ‰∏ÄË°å‰ª£Á†ÅÂÆûÁé∞‰ªéÂçïÂç°Âà∞Â§ßËßÑÊ®°ÈõÜÁæ§ËÆ≠ÁªÉÁöÑÊó†ÁºùÂàáÊç¢Ôºõ
- Êèê‰æõÁÅµÊ¥ªÊòìÁî®ÁöÑ‰∏™ÊÄßÂåñÂπ∂Ë°åÈÖçÁΩÆÔºõ
- ËÉΩÂ§üËá™Âä®ËøõË°åÊãìÊâëÊÑüÁü•ÔºåÈ´òÊïàÂú∞ËûçÂêàÊï∞ÊçÆÂπ∂Ë°åÂíåÊ®°ÂûãÂπ∂Ë°åÁ≠ñÁï•Ôºõ
- ‰∏ÄÈîÆÂêØÂä®‰ªªÊÑè‰ªªÂä°ÁöÑÂçïÂç°/Â§öÂç°ËÆ≠ÁªÉ„ÄÅÂæÆË∞É„ÄÅËØÑ‰º∞„ÄÅÊé®ÁêÜÊµÅÁ®ãÔºõ
- ÊîØÊåÅÁî®Êà∑ËøõË°åÁªÑ‰ª∂ÂåñÈÖçÁΩÆ‰ªªÊÑèÊ®°ÂùóÔºåÂ¶Ç‰ºòÂåñÂô®„ÄÅÂ≠¶‰π†Á≠ñÁï•„ÄÅÁΩëÁªúÁªÑË£ÖÁ≠âÔºõ
- Êèê‰æõTrainer„ÄÅpipeline„ÄÅAutoClassÁ≠âÈ´òÈò∂ÊòìÁî®ÊÄßÊé•Âè£Ôºõ
- Êèê‰æõÈ¢ÑÁΩÆSOTAÊùÉÈáçËá™Âä®‰∏ãËΩΩÂèäÂä†ËΩΩÂäüËÉΩÔºõ
- ÊîØÊåÅ‰∫∫Â∑•Êô∫ËÉΩËÆ°ÁÆó‰∏≠ÂøÉÊó†ÁºùËøÅÁßªÈÉ®ÁΩ≤Ôºõ

Â¶ÇÊûúÊÇ®ÂØπMindSpore TransformersÊúâ‰ªª‰ΩïÂª∫ËÆÆÔºåËØ∑ÈÄöËøáissue‰∏éÊàë‰ª¨ËÅîÁ≥ªÔºåÊàë‰ª¨Â∞ÜÂèäÊó∂Â§ÑÁêÜ„ÄÇ

- üìù **[MindFormersÊïôÁ®ãÊñáÊ°£](https://mindformers.readthedocs.io/zh_CN/latest)**
- üìù [Â§ßÊ®°ÂûãËÉΩÂäõË°®‰∏ÄËßà](https://mindformers.readthedocs.io/zh-cn/latest/docs/model_support_list.html#llm)
- üìù [MindPetÊåáÂØºÊïôÁ®ã](docs/feature_cards/Pet_Tuners.md)
- üìù [AICCÊåáÂØºÊïôÁ®ã](docs/readthedocs/source_zh_cn/docs/practice/AICC.md)

### ÊîØÊåÅÊ®°Âûã

MindFormersÂ∑≤ÊîØÊåÅÂ§ßÈÉ®ÂàÜÊ®°ÂûãÁöÑ[LoRAÂæÆË∞É](docs/feature_cards/Pet_Tuners.md)‰ª•Âèä[LoRAÊùÉÈáçÂêàÂπ∂](docs/feature_cards/Transform_Lorackpt.md)ÂäüËÉΩÔºåÂÖ∑‰ΩìÂèØÂèÇËÄÉÂêÑÊ®°ÂûãÊñáÊ°£ÂêØÂä®Ê®°ÂûãÁöÑLoRAÂæÆË∞É‰ªªÂä°„ÄÇ

ÂΩìÂâçMindFormersÊîØÊåÅÁöÑÊ®°ÂûãÂàóË°®Â¶Ç‰∏ãÔºö

<table>
  <thead>
    <tr>
      <th> Ê®°Âûã </th>
      <th> ÂèÇÊï∞ </th>
      <th> Â∫èÂàó </th>
      <th> È¢ÑËÆ≠ÁªÉ </th>
      <th> ÂæÆË∞É </th>
      <th> Êé®ÁêÜ </th>
      <th> <a href="docs/feature_cards/Pet_Tuners.md"> LoRA </a> </th>
      <th> ÂØπËØù </th>
      <th> ËØÑ‰º∞ </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="3"> <a href="docs/model_cards/llama2.md"> LLaMA2 </a> </td>
      <td> 7B </td>
      <td> 4K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/llama2/run_llama2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
    <tr>
      <td> 13B </td>
      <td> 4K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/llama2/run_llama2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
    <tr>
      <td> 70B </td>
      <td> 4K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/llama2/run_llama2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/llama3/llama3.md"> LLaMA3 </a> </td>
      <td> 8B </td>
      <td> 8K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/llama3/run_llama3_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
    <tr>
      <td> 70B </td>
      <td> 8K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/llama3/run_llama3_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/baichuan2/baichuan2.md"> Baichuan2 </a> </td>
      <td> 7B </td>
      <td> 4K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/baichuan2/run_baichuan2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
    <tr>
      <td> 13B </td>
      <td> 4K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/baichuan2/run_baichuan2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="docs/model_cards/glm2.md"> GLM2 </a> </td>
      <td> 6B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/glm2/run_glm2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL / Rouge </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="docs/model_cards/glm3.md"> GLM3 </a> </td>
      <td> 6B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/glm3/run_glm3_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="docs/model_cards/glm3.md"> GLM3-32K </a> </td>
      <td> 6B </td>
      <td> 32K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/glm32k/run_glm32k_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/qwen/qwen.md"> Qwen </a> </td>
      <td> 7B </td>
      <td> 8K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/qwen/qwen.md"> docs </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> C-Eval </td>
    </tr>
    <tr>
      <td> 14B </td>
      <td> 8K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/qwen/qwen.md"> docs </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> C-Eval </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="3"> <a href="research/qwen1_5/qwen1_5.md"> Qwen1.5 </a> </td>
      <td> 7B </td>
      <td> 32K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/qwen1_5/qwen1_5.md"> docs </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
    <tr>
      <td> 14B </td>
      <td> 32K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/qwen1_5/qwen1_5.md"> docs </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
    <tr>
      <td> 72B </td>
      <td> 32K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/qwen1_5/qwen1_5.md"> docs </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="research/qwenvl/qwenvl.md"> QwenVL </a> </td>
      <td> 9.6B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/qwenvl/run_qwenvl_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/internlm/internlm.md"> InternLM </a> </td>
      <td> 7B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/internlm/run_internlm_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
    <tr>
      <td> 20B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/internlm/run_internlm_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/internlm2/internlm2.md"> InternLM2 </a> </td>
      <td> 7B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/internlm2/run_internlm2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
    <tr>
      <td> 20B </td>
      <td> 4K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> - </td>
      <td> <a href="scripts/examples/internlm2/run_internlm2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2"> <a href="research/yi/yi.md"> Yi </a> </td>
      <td> 6B </td>
      <td> 2K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/yi/run_yi_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
    <tr>
      <td> 34B </td>
      <td> 4K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/yi/run_yi_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="research/mixtral/mixtral.md"> Mixtral </a> </td>
      <td> 8x7B </td>
      <td> 32K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/mixtral/mixtral.md"> docs </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="research/deepseek/deepseek.md"> DeepSeek Coder </a> </td>
      <td> 33B </td>
      <td> 4K </td>
      <td style="text-align: center"> - </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> <a href="research/deepseek/deepseek.md"> docs </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> - </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="docs/model_cards/codellama.md"> CodeLlama </a> </td>
      <td> 34B </td>
      <td> 4K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/codellama/run_codellama_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> HumanEval </td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="1"> <a href="docs/model_cards/gpt2.md"> GPT2 </a> </td>
      <td> 13B </td>
      <td> 2K </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td> <a href="scripts/examples/gpt2/run_gpt2_predict.sh"> generate </a> </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> &#x2713 </td>
      <td style="text-align: center"> PPL </td>
    </tr>
  </tbody>
</table>

## ‰∫å„ÄÅÂÆâË£Ö

### ÁâàÊú¨ÂåπÈÖçÂÖ≥Á≥ª

ÂΩìÂâçÊîØÊåÅÁöÑÁ°¨‰ª∂‰∏∫[Atlas 800T A2](https://www.hiascend.com/hardware/ai-server?tag=900A2)ËÆ≠ÁªÉÊúçÂä°Âô®„ÄÇ

ÂΩìÂâçÂ•ó‰ª∂Âª∫ËÆÆ‰ΩøÁî®ÁöÑPythonÁâàÊú¨‰∏∫3.9„ÄÇ

| MindFormers | MindPet |  MindSpore  | CANN | È©±Âä®Âõ∫‰ª∂ | ÈïúÂÉèÈìæÊé• | Â§áÊ≥®          |
|:-----------:|:-------:|:-----------:|:----:|:----:|:----:|-------------|
|     dev     |  1.0.4  | 2.3ÁâàÊú¨(Â∞öÊú™ÂèëÂ∏É) | Â∞öÊú™ÂèëÂ∏É | Â∞öÊú™ÂèëÂ∏É |  /   | ÂºÄÂèëÂàÜÊîØ(ÈùûÁ®≥ÂÆöÁâàÊú¨) |

**ÂΩìÂâçMindFormers‰ªÖÊîØÊåÅÂ¶Ç‰∏äÁöÑËΩØ‰ª∂ÈÖçÂ•óÂÖ≥Á≥ª**„ÄÇÂÖ∂‰∏≠CANNÂíåÂõ∫‰ª∂È©±Âä®ÁöÑÂÆâË£ÖÈúÄ‰∏é‰ΩøÁî®ÁöÑÊú∫Âô®ÂåπÈÖçÔºåËØ∑Ê≥®ÊÑèËØÜÂà´Êú∫Âô®ÂûãÂè∑ÔºåÈÄâÊã©ÂØπÂ∫îÊû∂ÊûÑÁöÑÁâàÊú¨„ÄÇ

### Ê∫êÁ†ÅÁºñËØëÂÆâË£Ö

MindFormersÁõÆÂâçÊîØÊåÅÊ∫êÁ†ÅÁºñËØëÂÆâË£ÖÔºåÁî®Êà∑ÂèØ‰ª•ÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ËøõË°åÂÆâË£Ö„ÄÇ

```shell
git clone -b dev https://gitee.com/mindspore/mindformers.git
cd mindformers
bash build.sh
```

## ‰∏â„ÄÅ‰ΩøÁî®ÊåáÂçó

MindFormersÊîØÊåÅÊ®°ÂûãÂêØÂä®È¢ÑËÆ≠ÁªÉ„ÄÅÂæÆË∞É„ÄÅÊé®ÁêÜ„ÄÅËØÑÊµãÁ≠âÂäüËÉΩÔºåÂèØÁÇπÂáª[ÊîØÊåÅÊ®°Âûã](#ÊîØÊåÅÊ®°Âûã)‰∏≠Ê®°ÂûãÂêçÁß∞Êü•ÁúãÊñáÊ°£ÂÆåÊàê‰∏äËø∞‰ªªÂä°Ôºå‰ª•‰∏ã‰∏∫Ê®°ÂûãÂàÜÂ∏ÉÂºèÂêØÂä®ÊñπÂºèÁöÑËØ¥Êòé‰∏éÁ§∫‰æã„ÄÇ

MindFormersÊé®Ëçê‰ΩøÁî®ÂàÜÂ∏ÉÂºèÊñπÂºèÊãâËµ∑Ê®°ÂûãËÆ≠ÁªÉ„ÄÅÊé®ÁêÜÁ≠âÂäüËÉΩÔºåÁõÆÂâçÊèê‰æõ`scripts/msrun_launcher.sh`ÂàÜÂ∏ÉÂºèÂêØÂä®ËÑöÊú¨‰Ωú‰∏∫Ê®°ÂûãÁöÑ‰∏ªË¶ÅÂêØÂä®ÊñπÂºèÔºå`msrun`ÁâπÊÄßËØ¥ÊòéÂèØ‰ª•ÂèÇËÄÉ[msrunÂêØÂä®](https://www.mindspore.cn/tutorials/experts/zh-CN/r2.3.0rc2/parallel/msrun_launcher.html)„ÄÇ
ËØ•ËÑöÊú¨‰∏ªË¶ÅËæìÂÖ•ÂèÇÊï∞ËØ¥ÊòéÂ¶Ç‰∏ãÔºö

  | **ÂèÇÊï∞**           | **ÂçïÊú∫ÊòØÂê¶ÂøÖÈÄâ** | **Â§öÊú∫ÊòØÂê¶ÂøÖÈÄâ** |     **ÈªòËÆ§ÂÄº**      | **ËØ¥Êòé**           |
  |------------------|:----------:|:----------:|:----------------:|------------------|
  | WORKER_NUM       |  &check;   |  &check;   |        8         | ÊâÄÊúâËäÇÁÇπ‰∏≠‰ΩøÁî®ËÆ°ÁÆóÂç°ÁöÑÊÄªÊï∞    |
  | LOCAL_WORKER     |     -      |  &check;   |        8         | ÂΩìÂâçËäÇÁÇπ‰∏≠‰ΩøÁî®ËÆ°ÁÆóÂç°ÁöÑÊï∞Èáè    |
  | MASTER_ADDR      |     -      |  &check;   |    127.0.0.1     | ÊåáÂÆöÂàÜÂ∏ÉÂºèÂêØÂä®‰∏ªËäÇÁÇπÁöÑip    |
  | MASTER_PORT      |     -      |  &check;   |       8118       | ÊåáÂÆöÂàÜÂ∏ÉÂºèÂêØÂä®ÁªëÂÆöÁöÑÁ´ØÂè£Âè∑    |
  | NODE_RANK        |     -      |  &check;   |        0         | ÊåáÂÆöÂΩìÂâçËäÇÁÇπÁöÑrank id   |
  | LOG_DIR          |     -      |  &check;   | output/msrun_log | Êó•ÂøóËæìÂá∫Ë∑ØÂæÑÔºåËã•‰∏çÂ≠òÂú®ÂàôÈÄíÂΩíÂàõÂª∫ |
  | JOIN             |     -      |  &check;   |      False       | ÊòØÂê¶Á≠âÂæÖÊâÄÊúâÂàÜÂ∏ÉÂºèËøõÁ®ãÈÄÄÂá∫    |
  | CLUSTER_TIME_OUT |     -      |  &check;   |       600        | ÂàÜÂ∏ÉÂºèÂêØÂä®ÁöÑÁ≠âÂæÖÊó∂Èó¥ÔºåÂçï‰Ωç‰∏∫Áßí  |

> Ê≥®ÔºöÂ¶ÇÊûúÈúÄË¶ÅÊåáÂÆö`device_id`ÂêØÂä®ÔºåÂèØ‰ª•ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè`ASCEND_RT_VISIBLE_DEVICES`ÔºåÂ¶ÇË¶ÅÈÖçÁΩÆ‰ΩøÁî®2„ÄÅ3Âç°ÂàôËæìÂÖ•`export ASCEND_RT_VISIBLE_DEVICES=2,3`„ÄÇ

### ÂçïÊú∫Â§öÂç°

```shell
# 1. ÂçïÊú∫Â§öÂç°Âø´ÈÄüÂêØÂä®ÊñπÂºèÔºåÈªòËÆ§8Âç°ÂêØÂä®
bash scripts/msrun_launcher.sh "run_mindformer.py \
  --config {CONFIG_PATH} \
  --run_mode {train/finetune/eval/predict}"

# 2. ÂçïÊú∫Â§öÂç°Âø´ÈÄüÂêØÂä®ÊñπÂºèÔºå‰ªÖËÆæÁΩÆ‰ΩøÁî®Âç°Êï∞Âç≥ÂèØ
bash scripts/msrun_launcher.sh "run_mindformer.py \
  --config {CONFIG_PATH} \
  --run_mode {train/finetune/eval/predict}" WORKER_NUM

# 3. ÂçïÊú∫Â§öÂç°Ëá™ÂÆö‰πâÂêØÂä®ÊñπÂºè
bash scripts/msrun_launcher.sh "run_mindformer.py \
  --config {CONFIG_PATH} \
  --run_mode {train/finetune/eval/predict}" \
  WORKER_NUM MASTER_PORT LOG_DIR JOIN CLUSTER_TIME_OUT
 ```

- ‰ΩøÁî®Á§∫‰æã

  ```shell
  # ÂçïÊú∫Â§öÂç°Âø´ÈÄüÂêØÂä®ÊñπÂºèÔºåÈªòËÆ§8Âç°ÂêØÂä®
  bash scripts/msrun_launcher.sh "run_mindformer.py \
    --config path/to/xxx.yaml \
    --run_mode finetune"

  # ÂçïÊú∫Â§öÂç°Âø´ÈÄüÂêØÂä®ÊñπÂºè
  bash scripts/msrun_launcher.sh "run_mindformer.py \
    --config path/to/xxx.yaml \
    --run_mode finetune" 8

  # ÂçïÊú∫Â§öÂç°Ëá™ÂÆö‰πâÂêØÂä®ÊñπÂºè
  bash scripts/msrun_launcher.sh "run_mindformer.py \
    --config path/to/xxx.yaml \
    --run_mode finetune" \
    8 8118 output/msrun_log False 300
  ```

### Â§öÊú∫Â§öÂç°

Â§öÊú∫Â§öÂç°ÊâßË°åËÑöÊú¨ËøõË°åÂàÜÂ∏ÉÂºèËÆ≠ÁªÉÈúÄË¶ÅÂàÜÂà´Âú®‰∏çÂêåËäÇÁÇπËøêË°åËÑöÊú¨ÔºåÂπ∂Â∞ÜÂèÇÊï∞MASTER_ADDRËÆæÁΩÆ‰∏∫‰∏ªËäÇÁÇπÁöÑipÂú∞ÂùÄÔºå
ÊâÄÊúâËäÇÁÇπËÆæÁΩÆÁöÑipÂú∞ÂùÄÁõ∏ÂêåÔºå‰∏çÂêåËäÇÁÇπ‰πãÈó¥‰ªÖÂèÇÊï∞NODE_RANK‰∏çÂêå„ÄÇ

  ```shell
  # Â§öÊú∫Â§öÂç°Ëá™ÂÆö‰πâÂêØÂä®ÊñπÂºè
  bash scripts/msrun_launcher.sh "run_mindformer.py \
   --config {CONFIG_PATH} \
   --run_mode {train/finetune/eval/predict}" \
   WORKER_NUM LOCAL_WORKER MASTER_ADDR MASTER_PORT NODE_RANK LOG_DIR JOIN CLUSTER_TIME_OUT
  ```

- ‰ΩøÁî®Á§∫‰æã

  ```shell
  # ËäÇÁÇπ0ÔºåËäÇÁÇπip‰∏∫192.168.1.1Ôºå‰Ωú‰∏∫‰∏ªËäÇÁÇπÔºåÊÄªÂÖ±8Âç°‰∏îÊØè‰∏™ËäÇÁÇπ4Âç°
  bash scripts/msrun_launcher.sh "run_mindformer.py \
    --config {CONFIG_PATH} \
    --run_mode {train/finetune/eval/predict}" \
    8 4 192.168.1.1 8118 0 output/msrun_log False 300

  # ËäÇÁÇπ1ÔºåËäÇÁÇπip‰∏∫192.168.1.2ÔºåËäÇÁÇπ0‰∏éËäÇÁÇπ1ÂêØÂä®ÂëΩ‰ª§‰ªÖÂèÇÊï∞NODE_RANK‰∏çÂêå
  bash scripts/msrun_launcher.sh "run_mindformer.py \
    --config {CONFIG_PATH} \
    --run_mode {train/finetune/eval/predict}" \
    8 4 192.168.1.1 8118 1 output/msrun_log False 300
  ```

### ÂçïÂç°ÂêØÂä®

MindFormersÊèê‰æõ`run_mindformer.py`ËÑöÊú¨‰Ωú‰∏∫ÂçïÂç°ÂêØÂä®ÊñπÊ≥ïÔºåËØ•ËÑöÊú¨ÂèØ‰ª•Ê†πÊçÆÊ®°ÂûãÈÖçÁΩÆÊñá‰ª∂ÔºåÂÆåÊàêÊîØÊåÅÊ®°ÂûãÁöÑÂçïÂç°ËÆ≠ÁªÉ„ÄÅÂæÆË∞É„ÄÅËØÑ‰º∞„ÄÅÊé®ÁêÜÊµÅÁ®ã„ÄÇ

```shell
# ËøêË°årun_mindformer.pyÁöÑÂÖ•ÂèÇ‰ºöË¶ÜÁõñÊ®°ÂûãÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂèÇÊï∞
python run_mindformer.py --config {CONFIG_PATH} --run_mode {train/finetune/eval/predict}
```

## Âõõ„ÄÅË¥°ÁåÆ

Ê¨¢ËøéÂèÇ‰∏éÁ§æÂå∫Ë¥°ÁåÆÔºåÂèØÂèÇËÄÉMindSporeË¥°ÁåÆË¶ÅÊ±Ç[Contributor Wiki](https://gitee.com/mindspore/mindspore/blob/master/CONTRIBUTING_CN.md)„ÄÇ

## ‰∫î„ÄÅËÆ∏ÂèØËØÅ

[Apache 2.0ËÆ∏ÂèØËØÅ](LICENSE)
