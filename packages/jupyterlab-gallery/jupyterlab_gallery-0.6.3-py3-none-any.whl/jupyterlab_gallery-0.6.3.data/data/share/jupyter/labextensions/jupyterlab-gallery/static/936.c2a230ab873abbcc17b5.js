"use strict";(self.webpackChunkjupyterlab_gallery=self.webpackChunkjupyterlab_gallery||[]).push([[936],{936:(e,t,n)=>{n.r(t),n.d(t,{EventStreamContentType:()=>a,fetchEventSource:()=>i});var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const a="text/event-stream",o=1e3,c="last-event-id";function i(e,t){var{signal:n,headers:i,onopen:l,onmessage:d,onclose:u,onerror:f,openWhenHidden:b,fetch:y}=t,h=r(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,r)=>{const v=Object.assign({},i);let p;function w(){p.abort(),document.hidden||E()}v.accept||(v.accept=a),b||document.addEventListener("visibilitychange",w);let g=o,m=0;function O(){document.removeEventListener("visibilitychange",w),window.clearTimeout(m),p.abort()}null==n||n.addEventListener("abort",(()=>{O(),t()}));const j=null!=y?y:window.fetch,k=null!=l?l:s;async function E(){var n;p=new AbortController;try{const n=await j(e,Object.assign(Object.assign({},h),{headers:v,signal:p.signal}));await k(n),await async function(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}(n.body,function(e){let t,n,r,a=!1;return function(o){void 0===t?(t=o,n=0,r=-1):t=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,o);const c=t.length;let i=0;for(;n<c;){a&&(10===t[n]&&(i=++n),a=!1);let o=-1;for(;n<c&&-1===o;++n)switch(t[n]){case 58:-1===r&&(r=n-i);break;case 13:a=!0;case 10:o=n}if(-1===o)break;e(t.subarray(i,o),r),i=n,r=-1}i===c?t=void 0:0!==i&&(t=t.subarray(i),n-=i)}}(function(e,t,n){let r={data:"",event:"",id:"",retry:void 0};const a=new TextDecoder;return function(e,t){if(0===e.length)null==n||n(r),r={data:"",event:"",id:"",retry:void 0};else if(t>0){const n=a.decode(e.subarray(0,t)),i=t+(32===e[t+1]?2:1),s=a.decode(e.subarray(i));switch(n){case"data":r.data=r.data?r.data+"\n"+s:s;break;case"event":r.event=s;break;case"id":(o=r.id=s)?v[c]=o:delete v[c];break;case"retry":const e=parseInt(s,10);isNaN(e)||(e=>{g=e})(r.retry=e)}}var o}}(0,0,d))),null==u||u(),O(),t()}catch(e){if(!p.signal.aborted)try{const t=null!==(n=null==f?void 0:f(e))&&void 0!==n?n:g;window.clearTimeout(m),m=window.setTimeout(E,t)}catch(e){O(),r(e)}}}E()}))}function s(e){const t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(a)))throw new Error(`Expected content-type to be ${a}, Actual: ${t}`)}}}]);