import{d as D,N as M,M as N,b3 as j,o as a,n as V,w as o,a as e,c as r,g as h,F as B,r as I,v as u,P as L,i as p,b as m,j as y,f as d,cD as w,V as v,O as x,c2 as R,l as T,h as $,aV as A,y as U,aW as F,A as O,cC as P}from"./index-DCXcuAJz.js";import{_ as J}from"./ColorPicker-B0DOrMyE.js";const W={key:0},q={key:1},G={key:2},Q=D({__name:"NodeMenu",props:{node:{}},setup(_){const g=_,n=M(()=>g.node),s=N({colorScheme:"category10",content:void 0,dialog:!1,show:!1}),E=["all","category10","category20","paired","set1","set2","set3","tableau10","google10c","google20c"],S=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",id:"paramsReset",onClick:()=>{n.value.resetParams(),c()},append:!1,show:()=>!0,title:"Reset all parameters"},{icon:"mdi:mdi-format-color-fill",iconClass:"",id:"nodeColor",onClick:()=>{s.content="nodeColor",window.dispatchEvent(new Event("resize"))},append:!0,show:()=>!0,title:"Colorize node"},{icon:"mdi:mdi-information-outline",iconClass:"",id:"modelDoc",onClick:()=>{s.dialog=!0},show:()=>n.value.modelId!=="voltmeter",title:"Model documentation"},{icon:"mdi:mdi-content-copy",iconClass:"",id:"nodeClone",onClick:()=>{n.value.clone(),n.value.changes(),c()},show:()=>!0,title:"Clone node"},{icon:"mdi:mdi-download",iconClass:"",id:"eventsExport",onClick:()=>{s.content="eventsExport"},show:()=>n.value.model.isRecorder&&n.value.activity&&n.value.activity.hasEvents,title:"Export events",append:!0},{icon:"mdi:mdi-trash-can-outline",iconClass:"",id:"nodeDelete",onClick:()=>{P({title:"Delete node?",text:"Are you sure to delete node?",buttons:[{title:"no",key:"no"},{title:"yes",key:"yes"}]}).then(i=>{i==="yes"&&n.value.remove()})},show:()=>!0,title:"Delete node"}],C=()=>{n.value.changes(),A(()=>n.value.nodes.updateRecordsColor())},b=()=>{n.value.view.color="",C()},f=(i="json")=>{var l,t;i==="json"?(l=n.value.activity)==null||l.exportEvents():i==="csv"&&((t=n.value.activity)==null||t.exportEventsCSV()),c()},k=()=>{s.content=void 0},c=()=>{s.content=void 0,s.show=!1};return j(()=>{c()}),(i,l)=>(a(),V($,{"close-on-content-click":!1,activator:"parent",modelValue:s.show,"onUpdate:modelValue":l[5]||(l[5]=t=>s.show=t)},{default:o(()=>[e(x,{flat:"",style:{"min-width":"300px"}},{default:o(()=>[s.content==null?(a(),r("span",W,[e(h,{density:"compact"},{default:o(()=>[(a(),r(B,null,I(S,(t,z)=>U(e(p,{key:z,title:t.title,onClick:t.onClick},{append:o(()=>[t.append?(a(),V(m,{key:0,icon:"mdi:mdi-menu-right",size:"small"})):u("",!0)]),prepend:o(()=>[e(m,{class:F(t.iconClass),icon:t.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"]),[[O,t.show()]])),64))]),_:1})])):u("",!0),s.content==="eventsExport"?(a(),r("span",q,[e(L,{class:"py-1 px-0"},{default:o(()=>[e(h,{dense:""},{default:o(()=>[e(p,{onClick:l[0]||(l[0]=t=>f("json"))},{prepend:o(()=>[e(m,{icon:"mdi:mdi-code-json"})]),default:o(()=>[e(y,null,{default:o(()=>[d("Export events to JSON file")]),_:1})]),_:1}),e(p,{onClick:l[1]||(l[1]=t=>f("csv"))},{prepend:o(()=>[e(m,{icon:"mdi:mdi-file-delimited-outline"})]),default:o(()=>[e(y,null,{default:o(()=>[d("Export events to CSV file")]),_:1})]),_:1})]),_:1})]),_:1}),e(w,null,{default:o(()=>[e(v,{onClick:k,"prepend-icon":"mdi:mdi-menu-left",size:"small",variant:"text"},{default:o(()=>[d(" back ")]),_:1})]),_:1})])):u("",!0),s.content==="nodeColor"?(a(),r("span",G,[e(x,null,{default:o(()=>[e(J,{colorScheme:s.colorScheme,"onUpdate:modelValue":[l[2]||(l[2]=t=>C()),l[3]||(l[3]=t=>n.value.view.color=t)],"hide-inputs":"",modelValue:n.value.view.color},null,8,["colorScheme","modelValue"]),e(R,{items:E,class:"mx-2",density:"compact","hide-details":"",modelValue:s.colorScheme,"onUpdate:modelValue":l[4]||(l[4]=t=>s.colorScheme=t),variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,null,{default:o(()=>[e(v,{onClick:k,"prepend-icon":"mdi:mdi-menu-left",size:"small",variant:"text"},{default:o(()=>[d(" back ")]),_:1}),e(T),e(v,{onClick:b,size:"small",variant:"outlined"},{default:o(()=>[d(" reset ")]),_:1})]),_:1})])):u("",!0)]),_:1})]),_:1},8,["modelValue"]))}});export{Q as _};
