import{d as B,N as W,M as R,b3 as T,o as i,n as f,w as o,a as t,c as p,g as V,i as v,b as r,ce as $,aW as _,j as h,f as c,v as u,F as L,r as P,P as U,cD as x,V as C,s as A,cB as F,O as S,c2 as G,l as O,h as H,aV as J,y as q,A as K,cC as Q}from"./index-DCXcuAJz.js";import{_ as X}from"./ModelDoc-BEeBhzQM.js";import{u as Y}from"./networkGraphStore-Di8CbiUE.js";import{_ as Z}from"./ColorPicker-B0DOrMyE.js";const ee={key:0},te={key:1},oe={key:2},ie=B({__name:"NodeMenu",props:{node:{}},setup(E){const w=Y(),N=E,e=W(()=>N.node),n=R({colorScheme:"category10",content:void 0,dialog:!1,show:!1,spatialNode:!1}),b=["all","category10","category20","paired","set1","set2","set3","tableau10","google10c","google20c"],D=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",id:"resetParams",onClick:()=>{e.value.resetParams(),m()},append:!1,show:()=>!0,title:"Reset all parameters"},{icon:"mdi:mdi-axis-arrow",iconClass:"",id:"nodeSpatial",input:"switch",onClick:()=>{e.value.toggleSpatial()},show:()=>{var a;return!((a=e.value.model)!=null&&a.isRecorder)},title:"Toggle spatial mode",value:"spatialNode"},{icon:"mdi:mdi-format-color-fill",iconClass:"",id:"nodeColor",onClick:()=>{n.content="nodeColor",window.dispatchEvent(new Event("resize"))},append:!0,show:()=>!0,title:"Colorize node"},{icon:"mdi:mdi-information-outline",iconClass:"",id:"modelDoc",onClick:()=>{n.dialog=!0},show:()=>e.value.modelId!=="voltmeter",title:"Model documentation"},{icon:"mdi:mdi-content-copy",iconClass:"",id:"nodeClone",onClick:()=>{e.value.clone(),e.value.changes(),m()},show:()=>!0,title:"Clone node"},{icon:"mdi:mdi-download",iconClass:"",id:"eventsExport",onClick:()=>{n.content="eventsExport"},show:()=>{var a;return((a=e.value.model)==null?void 0:a.isRecorder)&&e.value.activity&&e.value.activity.hasEvents},title:"Export events",append:!0},{icon:"mdi:mdi-trash-can-outline",iconClass:"",id:"nodeDelete",onClick:()=>{Q({title:"Delete node?",text:"Are you sure to delete node?",buttons:[{title:"no",key:"no"},{title:"yes",key:"yes"}]}).then(a=>{a==="yes"&&e.value.remove()})},show:()=>!0,title:"Delete node"}],y=()=>{var a;e.value.changes(),J(()=>{e.value.nodes.updateRecordsColor()}),(a=w.state.graph)==null||a.updateHash()},z=()=>{e.value.view.color="",y()},k=(a="json")=>{var l,s;a==="json"?(l=e.value.activity)==null||l.exportEvents():a==="csv"&&((s=e.value.activity)==null||s.exportEventsCSV()),m()},I=()=>{e.value&&(n.spatialNode=e.value.spatial.hasPositions)},M=a=>{var l;a!=null&&(e.value.view.state.synWeights=a,e.value.changes(),(l=w.state.graph)==null||l.render())},g=()=>{n.content=void 0},m=()=>{n.content=void 0,n.show=!1};return T(()=>{m(),I()}),(a,l)=>(i(),f(H,{"close-on-content-click":!1,activator:"parent",width:"320",modelValue:n.show,"onUpdate:modelValue":l[5]||(l[5]=s=>n.show=s)},{default:o(()=>[t(S,{flat:"",style:{"min-width":"300px"}},{default:o(()=>[n.content==null?(i(),p("span",ee,[t(V,{density:"compact"},{default:o(()=>{var s;return[(s=e.value.model)!=null&&s.isRecorder?u("",!0):(i(),f(v,{key:0},{prepend:o(()=>[t(r,{icon:"mdi:mdi-contrast"})]),append:o(()=>[t($,{class:_([{"text-red":e.value.view.state.synWeights==="inhibitory"},"pl-2"]),indeterminate:!e.value.view.state.synWeights,"model-value":e.value.view.state.synWeights,"onUpdate:modelValue":M,color:"nest-project",density:"compact","false-icon":"mdi:mdi-minus-circle","false-value":"inhibitory","hide-details":"",inset:"","true-icon":"mdi:mdi-plus-circle","true-value":"excitatory"},null,8,["class","indeterminate","model-value"])]),default:o(()=>[t(h,null,{default:o(()=>[c("Set all synaptic weights")]),_:1})]),_:1})),(i(),p(L,null,P(D,(d,j)=>q(t(v,{key:j,title:d.title,onClick:d.onClick},{append:o(()=>[d.append?(i(),f(r,{key:0,icon:"mdi:mdi-menu-right",size:"small"})):u("",!0)]),prepend:o(()=>[t(r,{class:_(d.iconClass),icon:d.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"]),[[K,d.show()]])),64))]}),_:1})])):u("",!0),n.content==="eventsExport"?(i(),p("span",te,[t(U,{class:"py-1 px-0"},{default:o(()=>[t(V,{dense:""},{default:o(()=>[t(v,{onClick:l[0]||(l[0]=s=>k("json"))},{prepend:o(()=>[t(r,{icon:"mdi:mdi-code-json"})]),default:o(()=>[t(h,null,{default:o(()=>[c("Export events to JSON file")]),_:1})]),_:1}),t(v,{onClick:l[1]||(l[1]=s=>k("csv"))},{prepend:o(()=>[t(r,{icon:"mdi:mdi-file-delimited-outline"})]),default:o(()=>[t(h,null,{default:o(()=>[c("Export events to CSV file")]),_:1})]),_:1})]),_:1})]),_:1}),t(x,null,{default:o(()=>[t(C,{onClick:g,"prepend-icon":"mdi:mdi-menu-left",size:"small",variant:"text"},{default:o(()=>[c(" back ")]),_:1})]),_:1})])):u("",!0),A("span",null,[t(F,{value:n.dialog,width:"80%"},{default:o(()=>[t(X,{modelId:e.value.modelId},null,8,["modelId"])]),_:1},8,["value"])]),n.content==="nodeColor"?(i(),p("span",oe,[t(S,{flat:""},{default:o(()=>[t(Z,{colorScheme:n.colorScheme,"onUpdate:modelValue":[l[2]||(l[2]=s=>y()),l[3]||(l[3]=s=>e.value.view.color=s)],"hide-inputs":"",modelValue:e.value.view.color},null,8,["colorScheme","modelValue"]),t(G,{items:b,class:"mx-2",density:"compact","hide-details":"",modelValue:n.colorScheme,"onUpdate:modelValue":l[4]||(l[4]=s=>n.colorScheme=s),variant:"outlined"},null,8,["modelValue"])]),_:1}),t(x,null,{default:o(()=>[t(C,{onClick:g,"prepend-icon":"mdi:mdi-menu-left",size:"small",variant:"text"},{default:o(()=>[c(" back ")]),_:1}),t(O),t(C,{onClick:z,size:"small",variant:"outlined"},{default:o(()=>[c(" reset ")]),_:1})]),_:1})])):u("",!0)]),_:1})]),_:1},8,["modelValue"]))}});export{ie as _};
