import{_ as w}from"./NodeMenu-DNCTSNcY.js";import{d as v,N as k,bg as y,b3 as L,dP as N,a$ as x,o as e,c as o,a as M,w as G,f as b,t as E,cf as S,n as B,v as n,s as t,F as C,r as V,aY as p}from"./index-DCXcuAJz.js";import{u as W}from"./networkGraphStore-Di8CbiUE.js";const H={style:{width:"100%",height:"100%"}},$={key:0,style:{width:"320px"}},z=t("rect",{id:"workspaceHandler",width:"100%",height:"100%"},null,-1),A={id:"networkWorkspace"},F=t("g",{class:"grid no-print"},null,-1),P={id:"network"},R=["id"],T={key:0,d:"M10,2L14,4L10,6",fill:"transparent",stroke:"currentcolor"},Y={key:1,fill:"currentcolor",r:"2",stroke:"currentcolor",transform:"translate(12,4)"},D={key:2,d:"M10,2L14,4L10,6L10,2L14,4",fill:"currentcolor",stroke:"currentcolor"},U={key:3,fill:"transparent",r:"4",stroke:"currentcolor",transform:"translate(5,5)"},X=t("text",{dx:"8",dy:"5"},null,-1),j={class:"dragline"},q=t("g",{id:"nodeGroups"},null,-1),I=t("g",{id:"modelAssigned"},null,-1),J=t("g",{id:"connections"},null,-1),K=t("g",{id:"nodes"},null,-1),O=t("g",{id:"nodeAddPanel"},null,-1),oe=v({__name:"NetworkGraph",props:{network:{}},setup(f){const l=W(),m=f,g=k(()=>m.network),r=k(()=>l.state.graph),d=y(null);return L(()=>{l.mount(new N(d,g.value))}),x(()=>{l.unmount()}),(Q,i)=>{var c,u,h,_;return e(),o("div",H,[M(S,{onClick:i[0]||(i[0]=s=>{var a;return(a=r.value)==null?void 0:a.updateHash()}),size:"small",variant:"text"},{default:G(()=>{var s;return[b(E((s=r.value)==null?void 0:s.hash),1)]}),_:1}),r.value?(e(),o("div",$,[r.value.state.nodeMenu.node?(e(),B(w,{key:0,"model-value":r.value.state.nodeMenu.open,node:r.value.state.nodeMenu.node,offset:r.value.state.nodeMenu.offset},null,8,["model-value","node","offset"])):n("",!0)])):n("",!0),(e(),o("svg",{class:"networkGraph",height:"100%",ref_key:"networkGraphRef",ref:d,width:"100%"},[z,t("g",A,[F,t("g",P,[(e(),o("g",{key:(c=r.value)==null?void 0:c.network.connections.all.length,class:"synMarker"},[(e(!0),o(C,null,V((u=r.value)==null?void 0:u.network.connections.all,(s,a)=>(e(),o("defs",{key:"defs"+a,style:p({color:"var(--colorNode"+s.source.idx+")"})},[(e(),o("marker",{key:s.hash,id:"syn-"+a,markerHeight:"8",markerWidth:"16",orient:"auto",refX:"14",refY:"4"},[s.view.markerEndLabel==="generic"?(e(),o("path",T)):n("",!0),s.view.markerEndLabel==="inh"?(e(),o("circle",Y)):n("",!0),s.view.markerEndLabel==="exc"?(e(),o("path",D)):n("",!0),s.view.markerEndLabel==="assigned"?(e(),o("circle",U)):n("",!0),X],8,R))],4))),128))])),t("g",j,[t("path",{style:p({strokeWidth:(_=(h=r.value)==null?void 0:h.config)==null?void 0:_.localStorage.strokeWidth}),d:"M0,0L0,0",fill:"none"},null,4)]),q,I,J,K]),O])],512))])}}});export{oe as _};
