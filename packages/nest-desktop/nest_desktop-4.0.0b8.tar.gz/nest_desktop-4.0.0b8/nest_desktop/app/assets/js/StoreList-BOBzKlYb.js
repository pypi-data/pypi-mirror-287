import{d as D,N as T,o as s,n as i,w as t,a,cA as O,L as x,ct as $,e as p,V as b,b as U,f as n,c as f,t as V,K as R,u as E,bg as N,c6 as M,c7 as k,l as S,z as F,p as P,q as K,c9 as y,cn as j,cL as A,v as w,g as C,i as g,k as W,cM as h,r as L,F as B,c8 as q,O as z,cC as I}from"./index-DCXcuAJz.js";import{_ as G,a as H}from"./ImportDialog-1H8cn1XC.js";function J(m){let o;try{o=new URL(m)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const Q={key:0},X={key:1},ee=D({__name:"BackendSettings",props:{store:{}},setup(m){const o=m,e=T(()=>o.store),c=v=>{v||((e.value.state.url==null||e.value.state.url.length===0)&&e.value.resetURL(),e.value.ping())};return(v,r)=>(s(),i(R,{class:"mt-1"},{default:t(()=>[a(x,{class:"d-flex justify-center",cols:"1"},{default:t(()=>[a(O,{inset:"",title:"Enable backend",modelValue:e.value.state.enabled,"onUpdate:modelValue":r[0]||(r[0]=d=>e.value.state.enabled=d)},null,8,["modelValue"])]),_:1}),a(x,{cols:"11"},{default:t(()=>[a($,{disabled:!e.value.state.enabled,"hide-details":e.value.state.response.data.length===0,placeholder:e.value.defaults,rules:[d=>d.length===0||p(J)(d)||"URL is not valid"],"onUpdate:focused":c,class:"my-2",density:"compact",label:"URL of backend","persistent-placeholder":"",modelValue:e.value.state.url,"onUpdate:modelValue":r[2]||(r[2]=d=>e.value.state.url=d),variant:"outlined"},{append:t(()=>[a(b,{onClick:r[1]||(r[1]=d=>e.value.ping()),variant:"outlined"},{append:t(()=>[a(U,{color:e.value.state.enabled?e.value.isOK&&e.value.isValid?"green":"red":"",class:"mx-1",icon:"mdi:mdi-circle"},null,8,["color"])]),default:t(()=>[n(" ping ")]),_:1})]),details:t(()=>[e.value.isOK&&e.value.isValid?(s(),f("span",Q," Response: "+V(e.value.state.response.data),1)):(s(),f("span",X," Error: "+V(e.value.state.error),1))]),_:1},8,["disabled","hide-details","placeholder","rules","modelValue"])]),_:1})]),_:1}))}}),te=D({__name:"StoreList",setup(m){const o=E(),e=T(()=>o.currentSimulator.stores),c=N("project"),v=()=>{I({title:"",text:"",customComponent:{component:G,props:{}},dialogOptions:{width:"1280px"}})},r=()=>{I({title:"",text:"",customComponent:{component:H,props:{}},dialogOptions:{width:"1280px"}})};return(d,u)=>(s(),i(z,{class:"mt-2"},{default:t(()=>[a(K,{color:"transparent",density:"compact"},{extension:t(()=>[a(M,{modelValue:c.value,"onUpdate:modelValue":u[2]||(u[2]=l=>c.value=l)},{default:t(()=>[a(k,{value:"project"},{default:t(()=>[n("Project")]),_:1}),a(k,{value:"model"},{default:t(()=>[n("Model")]),_:1}),a(S)]),_:1},8,["modelValue"])]),default:t(()=>[a(F,null,{default:t(()=>[n("Store list")]),_:1}),a(S),a(P,{class:"mx-2",density:"compact"},{default:t(()=>[a(b,{onClick:u[0]||(u[0]=l=>r()),icon:"mdi:mdi-import",id:"import-dialog",style:{"min-width":"40px"},title:"Open dialog to import"}),a(b,{onClick:u[1]||(u[1]=l=>v()),icon:"mdi:mdi-export",id:"export-dialog",style:{"min-width":"40px"},title:"Open dialog to export"})]),_:1})]),_:1}),a(q,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=l=>c.value=l)},{default:t(()=>[a(y,{value:"project"},{default:t(()=>[p(o).state.devMode?(s(),i(j,{key:e.value.projectStore.state.projectId},{default:t(()=>[n(" Current project: "+V(p(A)(p(o).currentSimulator.stores.projectStore.state.projectId)),1)]),_:1})):w("",!0),(s(),i(C,{key:e.value.projectDBStore.state.projects.length,density:"compact",lines:"two",nav:""},{default:t(()=>[a(g,{to:{name:p(o).state.simulator+"ProjectNew"}},{prepend:t(()=>[a(U,{icon:"mdi:mdi-plus"})]),default:t(()=>[n(" New project ")]),_:1},8,["to"]),a(W),a(h,null,{default:t(()=>[n("Existing projects")]),_:1}),(s(!0),f(B,null,L(e.value.projectDBStore.state.projects.slice().reverse(),(l,_)=>(s(),i(g,{key:_,subtitle:`${l.network.nodes.length} nodes, ${l.network.connections.length} connections`,title:l.name||"undefined project "+e.value.projectDBStore.getProjectIdx(l),to:{name:p(o).state.simulator+"Project",params:{projectId:l.id}}},null,8,["subtitle","title","to"]))),128))]),_:1}))]),_:1}),a(y,{value:"model"},{default:t(()=>[p(o).state.devMode?(s(),i(j,{key:e.value.modelStore.modelId},{default:t(()=>[n(" Current model: "+V(e.value.modelStore.modelId),1)]),_:1})):w("",!0),(s(),i(C,{key:e.value.modelDBStore.state.models.length,nav:""},{default:t(()=>[a(h,null,{default:t(()=>[n("Existing models")]),_:1}),(s(!0),f(B,null,L(e.value.modelDBStore.state.models,(l,_)=>(s(),i(g,{key:_,subtitle:l.elementType,title:l.label,to:{name:p(o).state.simulator+"Model",params:{modelId:l.id}}},null,8,["subtitle","title","to"]))),128))]),_:1}))]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{te as _,ee as a};
