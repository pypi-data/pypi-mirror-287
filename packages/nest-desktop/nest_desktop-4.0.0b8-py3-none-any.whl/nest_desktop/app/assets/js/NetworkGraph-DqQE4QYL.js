import{_ as w}from"./NodeMenu-Bc5tNuE3.js";import{d as v,N as _,bg as y,b3 as L,dS as x,a$ as M,o as e,c as t,a as N,w as G,f as b,t as B,cf as S,n as C,v as n,s as o,F as E,r as V,aY as p}from"./index-DCXcuAJz.js";import{u as W}from"./networkGraphStore-Di8CbiUE.js";const H={style:{width:"100%",height:"100%"}},$={key:0,style:{width:"320px"}},z=o("rect",{height:"100%",id:"workspaceHandler",width:"100%"},null,-1),F={id:"networkWorkspace"},R=o("g",{class:"grid no-print"},null,-1),Y={id:"network"},A=["id"],D={key:0,d:"M10,2L14,4L10,6",fill:"transparent",stroke:"currentcolor"},P={key:1,fill:"currentcolor",r:"2",stroke:"currentcolor",transform:"translate(12,4)"},T={key:2,d:"M10,2L14,4L10,6L10,2L14,4",fill:"currentcolor",stroke:"currentcolor"},U={key:3,fill:"transparent",r:"4",stroke:"currentcolor",transform:"translate(5,5)"},X=o("text",{dx:"8",dy:"5"},null,-1),j={class:"dragline"},q=o("g",{id:"nodeGroups"},null,-1),I=o("g",{id:"connections"},null,-1),J=o("g",{id:"nodes"},null,-1),K=o("g",{id:"nodeAddPanel"},null,-1),te=v({__name:"NetworkGraph",props:{network:{}},setup(f){const l=W(),m=f,g=_(()=>m.network),r=_(()=>l.state.graph),d=y(null);return L(()=>{l.mount(new x(d,g.value))}),M(()=>{l.unmount()}),(O,i)=>{var c,u,h,k;return e(),t("div",H,[N(S,{onClick:i[0]||(i[0]=s=>{var a;return(a=r.value)==null?void 0:a.updateHash()}),size:"small",variant:"text"},{default:G(()=>{var s;return[b(B((s=r.value)==null?void 0:s.hash),1)]}),_:1}),r.value?(e(),t("div",$,[r.value.state.nodeMenu.node?(e(),C(w,{key:0,"model-value":r.value.state.nodeMenu.open,node:r.value.state.nodeMenu.node,offset:r.value.state.nodeMenu.offset},null,8,["model-value","node","offset"])):n("",!0)])):n("",!0),(e(),t("svg",{class:"networkGraph",height:"100%",ref_key:"networkGraphRef",ref:d,width:"100%"},[z,o("g",F,[R,o("g",Y,[(e(),t("g",{key:(c=r.value)==null?void 0:c.network.connections.all.length,class:"synMarker"},[(e(!0),t(E,null,V((u=r.value)==null?void 0:u.network.connections.all,(s,a)=>(e(),t("defs",{key:"defs"+a,style:p({color:"var(--colorNode"+s.source.idx+")"})},[(e(),t("marker",{key:s.hash,id:"syn-"+a,markerHeight:"8",markerWidth:"16",orient:"auto",refX:"14",refY:"4"},[s.view.markerEndLabel==="generic"?(e(),t("path",D)):n("",!0),s.view.markerEndLabel==="inh"?(e(),t("circle",P)):n("",!0),s.view.markerEndLabel==="exc"?(e(),t("path",T)):n("",!0),s.view.markerEndLabel==="assigned"?(e(),t("circle",U)):n("",!0),X],8,A))],4))),128))])),o("g",j,[o("path",{style:p({strokeWidth:(k=(h=r.value)==null?void 0:h.config)==null?void 0:k.localStorage.strokeWidth}),d:"M0,0L0,0",fill:"none"},null,4)]),q,I,J]),K])],512))])}}});export{te as _};
