!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=o(2);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=s(t);if(e){var r=s(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return u(this,o)}}function u(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?l(t):o}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=window.React,d=window.draftail,p=window.DraftJS.Modifier,y=window.DraftJS.EditorState,h=window.$,b=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,e);var o,r,u,s=c(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,t)).onChosen=e.onChosen.bind(l(e)),e.onClose=e.onClose.bind(l(e)),e}return o=f,(r=[{key:"browseApi",value:function(t,e){var o=h(".reoako-search-results",t.body).html();t.ajaxifyForm(h("form.search-form",t.body));var n,r=h("form.search-form",t.body).attr("action");function i(){var e=h("#id_q",t.body).val();return""!==e?n=h.ajax({url:r,data:{q:e},success:function(e){n=null,h(".reoako-search-results",t.body).html(e),h(".reoako-search-results a.reoako-choose-word",t.body).on("click",(function(){var e=h(this).data();return t.respond("wordChosen",e),t.close(),!1}))},error:function(){n=null}}):(h(".reoako-search-results",t.body).html(o),a()),!1}function a(){h("a.reoako-choose-word",t.body).on("click",(function(){var e=h(this).data();return t.respond("wordChosen",e),t.close(),!1}))}h("#id_q",t.body).on("input",(function(){n&&n.abort(),clearTimeout(h.data(this,"timer"));var t=setTimeout(i,200);h(this).data("timer",t)})),a()}},{key:"componentWillMount",value:function(){var e=this.props,o=e.onClose,r=e.editorState;h(document.body).on("hidden.bs.modal",this.onClose);var i=this;this.workflow=t.ModalWorkflow({url:"/admin/reoako-modal/",onload:{browse:function(t,e){var o=h(".search-form #id_q",t.body);o.attr("autocomplete","off"),i.browseApi(t,e);var a=(0,n.getSelectionText)(r);a&&o.val(a).trigger("input"),setTimeout((function(){return o.eq(0).focus()}),600)}},responses:{wordChosen:this.onChosen},onError:function(t){o()}})}},{key:"componentWillUnmount",value:function(){this.workflow=null,h(document.body).off("hidden.bs.modal",this.onClose)}},{key:"onChosen",value:function(t){var e=this.props,o=e.editorState,r=e.entityType,i=e.onComplete,a=o.getSelection(),c=(0,n.getSelectionText)(o).charAt(0),u=t.reoakoTranslation;c===c.toUpperCase()&&(u=u.charAt(0).toUpperCase()+u.slice(1));var l=o.getCurrentContent(),s=l.createEntity(r.type,"MUTABLE",t).getLastCreatedEntityKey(),f=p.replaceText(l,a,u,null,s);i(y.push(o,f,"insert-characters"))}},{key:"onClose",value:function(){var t=this.props.onClose;t()}},{key:"render",value:function(){return null}}])&&i(o.prototype,r),u&&i(o,u),f}(f.Component),v=f.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0, 0, 1024, 1024",width:"1em",height:"1em",style:{verticalAlign:"middle",marginRight:"2px"}},f.createElement("path",{d:"M18.2822 114.286C18.2822 68.8406 55.1228 32 100.568 32H923.425C968.87 32 1005.71 68.8406 1005.71 114.286V813.714C1005.71 859.159 968.87 896 923.425 896H622.845L536.183 996.068C523.422 1010.8 500.564 1010.8 487.804 996.068L401.142 896H100.568C55.1228 896 18.2822 859.159 18.2822 813.714V672H443.593V524H443.59V430H443.593V301.438H509.406C565.752 301.438 593.024 325.719 593.024 370.344C593.024 414.75 565.752 437.062 509.856 437.062H444.59V513.188H514.815L602.265 672H710L611.957 497.875C664.472 476 693.547 431.594 693.547 370.344C693.547 281.312 632.918 224 528.113 224H346V671H18.2822V114.286Z",fill:"currentColor"}));window.draftail.registerPlugin({type:"REOAKO",source:b,decorator:function(t){var e=t.entityKey,o=t.contentState,n=t.children,i=o.getEntity(e).getData();return f.createElement(d.TooltipEntity,r({},t,{label:"".concat(i.reoakoTranslation," (").concat(i.reoakoHeadword,")"),icon:v}),n)}})}).call(this,o(1))},function(t,e){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSelectionText=void 0;e.getSelectionText=function(t){var e=t.getSelection(),o=e.getAnchorOffset(),n=e.getFocusOffset(),r=function(t){var e=t.getSelection(),o=t.getCurrentContent(),n=e.getStartKey(),r=e.getEndKey(),i=o.getBlockMap();return i.toSeq().skipUntil((function(t,e){return e===n})).takeUntil((function(t,e){return e===r})).concat([[r,i.get(r)]]).toList()}(t);if(e.getIsBackward()){var i=o;o=n,n=i}for(var a="",c=0;c<r.size;c+=1){var u=0===c?o:0,l=c===r.size-1?n:r.get(c).getText().length;a+=r.get(c).getText().slice(u,l)}return a}}]);