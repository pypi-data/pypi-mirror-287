"use strict";(self.webpackChunk_secretflow_secretnote=self.webpackChunk_secretflow_secretnote||[]).push([[1370],{36752:function(Ye,he,e){e.d(he,{O:function(){return be}});var d=e(19859),Se=e(78796),_=e.n(Se),oe=e(4977),xe=e.n(oe),ee=e(37637),ge=e(3910),Y,me,se=(Y=(0,ee.ri)({contrib:ge.z}),Y(me=function(){function E(){_()(this,E)}return xe()(E,[{key:"registerColors",value:function(F){F.register({id:"secretnote.sidebar.background",defaults:{dark:"#f4f6f8",light:"#f4f6f8"},description:""}),F.register({id:"secretnote.text.color",defaults:{dark:"#40566c",light:"#40566c"},description:""}),F.register({id:"secretnote.li.hover.background",defaults:{dark:"#e5ebf1",light:"#e5ebf1"},description:""}),F.register({id:"secretnote.icon.color",defaults:{dark:"#40566c",light:"#40566c"},description:""}),F.register({id:"secretnote.icon.hover.color",defaults:{dark:"#182431",light:"#182431"},description:""}),F.register({id:"secretnote.divider.color",defaults:{dark:"#d6dee6",light:"#d6dee6"},description:""})}}]),E}())||me),be=d.R.create().register(se)},7866:function(Ye,he,e){e.r(he),e.d(he,{default:function(){return zt}});var d=e(24352),Se=e(35252),_=e(67147),oe=e(85100),xe=e(19859),ee=e(97754),ge=e(78796),Y=e.n(ge),me=e(4977),se=e.n(me),be=e(41553),E=e.n(be),$e=e(49488),F=e.n($e),Re=e(84047),Ee=e.n(Re),Be=e(10154),le=e.n(Be),We=e(90819),j=e.n(We),Ge=e(89933),W=e.n(Ge),ce=e(73004),Pe=e(15063),te=e(37637),Oe=e(89864),pe=e(71340),J=e(44194),Je=e(51865),Ve=e.n(Je),Ne=e(40987),ne=e(82291),c=e(52890),g=e(69567),m=e(13077);const u=a=>{const{componentCls:n,sizePaddingEdgeHorizontal:l,colorSplit:i,lineWidth:t,textPaddingInline:v,orientationMargin:r,verticalMarginInline:o}=a;return{[n]:Object.assign(Object.assign({},(0,c.Wf)(a)),{borderBlockStart:`${(0,ne.bf)(t)} solid ${i}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,ne.bf)(t)} solid ${i}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,ne.bf)(a.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${n}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,ne.bf)(a.dividerHorizontalWithTextGutterMargin)} 0`,color:a.colorTextHeading,fontWeight:500,fontSize:a.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${i}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,ne.bf)(t)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${n}-with-text-left`]:{"&::before":{width:`calc(${r} * 100%)`},"&::after":{width:`calc(100% - ${r} * 100%)`}},[`&-horizontal${n}-with-text-right`]:{"&::before":{width:`calc(100% - ${r} * 100%)`},"&::after":{width:`calc(${r} * 100%)`}},[`${n}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:v},"&-dashed":{background:"none",borderColor:i,borderStyle:"dashed",borderWidth:`${(0,ne.bf)(t)} 0 0`},[`&-horizontal${n}-with-text${n}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${n}-dashed`]:{borderInlineStartWidth:t,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${n}-with-text`]:{color:a.colorText,fontWeight:"normal",fontSize:a.fontSize},[`&-horizontal${n}-with-text-left${n}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${n}-inner-text`]:{paddingInlineStart:l}},[`&-horizontal${n}-with-text-right${n}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${n}-inner-text`]:{paddingInlineEnd:l}}})}},S=a=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:a.marginXS});var X=(0,g.I$)("Divider",a=>{const n=(0,m.TS)(a,{dividerHorizontalWithTextGutterMargin:a.margin,dividerHorizontalGutterMargin:a.marginLG,sizePaddingEdgeHorizontal:0});return[u(n)]},S,{unitless:{orientationMargin:!0}}),G=function(a,n){var l={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&n.indexOf(i)<0&&(l[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,i=Object.getOwnPropertySymbols(a);t<i.length;t++)n.indexOf(i[t])<0&&Object.prototype.propertyIsEnumerable.call(a,i[t])&&(l[i[t]]=a[i[t]]);return l},L=a=>{const{getPrefixCls:n,direction:l,divider:i}=J.useContext(Ne.E_),{prefixCls:t,type:v="horizontal",orientation:r="center",orientationMargin:o,className:p,rootClassName:C,children:ae,dashed:z,plain:Ue,style:Fe}=a,Ie=G(a,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),b=n("divider",t),[at,$,It]=X(b),ot=!!ae,st=r==="left"&&o!=null,lt=r==="right"&&o!=null,bt=Ve()(b,i==null?void 0:i.className,$,It,`${b}-${v}`,{[`${b}-with-text`]:ot,[`${b}-with-text-${r}`]:ot,[`${b}-dashed`]:!!z,[`${b}-plain`]:!!Ue,[`${b}-rtl`]:l==="rtl",[`${b}-no-default-orientation-margin-left`]:st,[`${b}-no-default-orientation-margin-right`]:lt},p,C),ct=J.useMemo(()=>typeof o=="number"?o:/^\d+$/.test(o)?Number(o):o,[o]),$t=Object.assign(Object.assign({},st&&{marginLeft:ct}),lt&&{marginRight:ct});return at(J.createElement("div",Object.assign({className:bt,style:Object.assign(Object.assign({},i==null?void 0:i.style),Fe)},Ie,{role:"separator"}),ae&&v!=="vertical"&&J.createElement("span",{className:`${b}-inner-text`,style:$t},ae)))},I=e(44288),T=e(1137),de=e(18252),O=e(33042),N=e(65584),re=e(84125),ue=e(29800),R=e(24227);const h=(0,R.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),A=(0,R.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var M=e(26336),V=e.n(M),H=e(62055),ve=e.n(H),Me=e(23202),k=e(26281),Q,D,ie,Z,x,ye,fe,Ce,P,ze,Le,Te,je=function(a){return a.UNDECIDED="UNDECIDED",a.ACCEPTED="ACCEPTED",a.DECLINED="DECLINED",a.INVALID="INVALID",a}({}),U=(Q=(0,te.ri)(),D=(0,ce.vg)(),ie=Reflect.metadata("design:type",Array),Z=(0,ce.vg)(),x=Reflect.metadata("design:type",Array),ye=(0,ce.vg)(),fe=Reflect.metadata("design:type",typeof PlatformInfo=="undefined"?Object:PlatformInfo),Q(Ce=(P=function(){function a(){Y()(this,a),V()(this,"projects",ze,this),V()(this,"invitationList",Le,this),V()(this,"platformInfo",Te,this)}return se()(a,[{key:"getPlatformInfo",value:function(){var n=W()(j()().mark(function i(){var t;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getPlatformInfo"})});case 2:return t=r.sent,this.platformInfo=t,r.abrupt("return",t);case 5:case"end":return r.stop()}},i,this)}));function l(){return n.apply(this,arguments)}return l}()},{key:"getProjectList",value:function(){var n=W()(j()().mark(function i(){var t,v;return j()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getProjectList"})});case 2:return t=o.sent,v=t.map(function(p){return{id:p.project_id,name:p.name||p.project_id,description:p.description,creator:p.creator,members:p.members}}),v.sort(function(p,C){return p.name.localeCompare(C.name)}),this.projects=v,o.abrupt("return",this.projects);case 7:case"end":return o.stop()}},i,this)}));function l(){return n.apply(this,arguments)}return l}()},{key:"addProject",value:function(){var n=W()(j()().mark(function i(t){return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"addProject",project_id:t.id,name:t.name,description:t.description})});case 2:this.getProjectList();case 3:case"end":return r.stop()}},i,this)}));function l(i){return n.apply(this,arguments)}return l}()},{key:"getInvitationList",value:function(){var n=W()(j()().mark(function i(){var t;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getInvitationList"})});case 2:return t=r.sent,this.invitationList=t.map(function(o){return{status:o.status,id:o.invitation_id,inviter:o.inviter,invitee:o.invitee,project:o.project.name||o.project.project_id}}),r.abrupt("return",t);case 5:case"end":return r.stop()}},i,this)}));function l(){return n.apply(this,arguments)}return l}()},{key:"processInvitation",value:function(){var n=W()(j()().mark(function i(t,v){return j()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"processInvitation",invitation_id:t,respond:v?"ACCEPT":"DECLINE"})});case 2:this.getInvitationList(),this.getProjectList();case 4:case"end":return o.stop()}},i,this)}));function l(i,t){return n.apply(this,arguments)}return l}()}]),a}(),ze=ve()(P.prototype,"projects",[D,ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Le=ve()(P.prototype,"invitationList",[Z,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=ve()(P.prototype,"platformInfo",[ye,fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{party:"",host:""}}}),P))||Ce),s=e(31549),Ae,De,Ze,q,y,f,B=function(){var n=(0,ce.oC)(Pe.yd),l=n.service.invitationList.filter(function(r){return r.status===je.UNDECIDED}),i=n.service.invitationList.filter(function(r){return r.status!==je.UNDECIDED}),t=function(){var r=W()(j()().mark(function o(p,C){return j()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,n.service.processInvitation(p,C);case 3:pe.ZP.success("".concat(C?"Accept":"Decline"," successfully.")),z.next=9;break;case 6:z.prev=6,z.t0=z.catch(0),z.t0 instanceof Error&&pe.ZP.error(z.t0.message);case 9:case"end":return z.stop()}},o,null,[[0,6]])}));return function(p,C){return r.apply(this,arguments)}}(),v=[{key:"1",label:"Pending",children:(0,s.jsx)("div",{className:"secretnote-notification-box",children:l.length>0?(0,s.jsx)("ul",{children:l.map(function(r){return(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:"".concat(r.inviter," invites you to participate in the project ").concat(r.project,".")}),(0,s.jsx)(L,{type:"vertical",style:{height:"1em",borderInlineStart:"1px solid #d6dee6"}}),(0,s.jsxs)("span",{className:"action",children:[(0,s.jsx)(I.ZP,{onClick:function(){return t(r.id,!0)},type:"link",children:"Accept"}),(0,s.jsx)(I.ZP,{onClick:function(){return t(r.id,!1)},type:"link",children:"Decline"})]})]},r.id)})}):(0,s.jsx)(T.Z,{image:T.Z.PRESENTED_IMAGE_SIMPLE,description:"No new notifications."})})},{key:"2",label:"Archived",children:(0,s.jsx)("div",{className:"secretnote-notification-box",children:i.length>0?(0,s.jsx)("ul",{children:i.map(function(r){return(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:"".concat(r.inviter," invites you to participate in the project ").concat(r.project,".")}),(0,s.jsx)(L,{type:"vertical",style:{height:"1em",borderInlineStart:"1px solid #d6dee6"}}),(0,s.jsx)("span",{className:"action",style:{color:r.status===je.ACCEPTED?"green":"orange"},children:je[r.status]})]},r.id)})}):(0,s.jsx)(T.Z,{image:T.Z.PRESENTED_IMAGE_SIMPLE,description:"Nothing in Archived."})})}];return(0,s.jsxs)("div",{className:"secretnote-invitation-notification",children:[(0,s.jsx)(de.Z,{content:(0,s.jsx)(O.Z,{defaultActiveKey:"1",items:v,size:"small"}),title:"",overlayStyle:{width:480},trigger:"click",placement:"bottomLeft",arrow:!1,overlayClassName:"secretnote-notification-popover",children:(0,s.jsx)(N.Z,{dot:!0,count:l.length,color:"#1677ff",size:"small",children:(0,s.jsx)(h,{color:"#40566c",size:18,cursor:"pointer"})})}),(0,s.jsx)(re.Z,{title:n.service.platformInfo.party,children:(0,s.jsx)(ue.C,{style:{backgroundColor:"#87d068",marginTop:-2,marginLeft:12,cursor:"pointer"},icon:(0,s.jsx)(A,{size:12,color:"#fff"}),size:"small"})})]})},Xe=(Ae=(0,te.ri)(),De=(0,ee.ei)("secretnote-invitation-notification-view"),Ze=function(n,l){return(0,te.f3)(U)(n,void 0,0)},q=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[typeof U=="undefined"?Object:U]),Ae(f=De(f=Ze(f=q(f=y(f=function(a){F()(l,a);var n=Ee()(l);function l(i){var t;return Y()(this,l),t=n.call(this),le()(E()(t),"view",B),le()(E()(t),"service",void 0),t.service=i,t}return se()(l,[{key:"onViewMount",value:function(){this.service.getPlatformInfo(),this.service.getInvitationList()}}]),l}(Oe.P))||f)||f)||f)||f)||f),dt=e(45332),Ke=e.n(dt),ut=e(64239),He=e(15306),ke=e(14412),vt=e(1155);const ft=(0,R.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ht=(0,R.Z)("KanbanSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]]),gt=(0,R.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var mt=e(3988),we=e(65596),pt=e(54073),yt=function(n){var l=n.visible,i=n.close,t=n.data,v=we.Z.useForm(),r=Ke()(v,1),o=r[0],p=(0,ce.oC)(U),C=!!(t&&t.name);(0,J.useEffect)(function(){o&&t&&o.setFieldsValue(t)},[t,o]);var ae=function(){o.validateFields().then(function(){var Ue=W()(j()().mark(function Fe(Ie){var b;return j()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return b={id:Ie.name,name:Ie.name,description:Ie.description},$.prev=1,$.next=4,p.addProject(b);case 4:pe.ZP.success("\u6DFB\u52A0\u6210\u529F"),i(),$.next=11;break;case 8:$.prev=8,$.t0=$.catch(1),$.t0 instanceof Error&&pe.ZP.error($.t0.message);case 11:return $.abrupt("return");case 12:case"end":return $.stop()}},Fe,null,[[1,8]])}));return function(Fe){return Ue.apply(this,arguments)}}()).catch(function(){})};return(0,s.jsx)(pt.Z,{open:l,destroyOnClose:!0,title:"New Project",okText:"Create Project",onOk:function(){return ae()},onCancel:function(){i()},children:(0,s.jsxs)(we.Z,{form:o,autoComplete:"off",requiredMark:!0,labelCol:{span:6},wrapperCol:{span:18},style:{marginTop:24},children:[(0,s.jsx)(we.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"}],children:(0,s.jsx)(ke.Z,{maxLength:16,disabled:C,placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u3001\u6570\u5B57\u6216\u8005\u4E0B\u5212\u7EBF",allowClear:!0})}),(0,s.jsx)(we.Z.Item,{label:"Description",name:"description",required:!1,children:(0,s.jsx)(ke.Z.TextArea,{rows:3,placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u3001\u6570\u5B57\u6216\u8005\u4E0B\u5212\u7EBF",allowClear:!0})})]})})},Qe={id:"project-config-modal",component:yt},qe,_e,et,tt,nt,rt,w,Ct=function(){var n=(0,ce.oC)(Pe.yd),l=(0,J.useState)(""),i=Ke()(l,2),t=i[0],v=i[1],r=n.service.projects.filter(function(p){return p.name.includes(t)||t===""}),o=function(C){mt.m8.push("/scql/project/"+C)};return(0,s.jsxs)("div",{className:"project-container",children:[(0,s.jsxs)("div",{className:"toolbar",children:[(0,s.jsx)(ke.Z,{placeholder:"Filter name",prefix:(0,s.jsx)(ft,{color:"#5b768f",size:16}),style:{width:280},value:t,onChange:function(C){return v(C.target.value)},allowClear:!0}),(0,s.jsx)(I.ZP,{type:"primary",onClick:function(){return n.openAddProjectModal()},children:"Add New Project"})]}),(0,s.jsx)("div",{className:"content",children:(0,s.jsx)(vt.Z,{dataSource:r,rowKey:"id",pagination:r.length>15?{pageSize:10,size:"small"}:!1,columns:[{title:"Name",dataIndex:"name",key:"name",render:function(C){return(0,s.jsxs)("span",{className:"project-name",children:[(0,s.jsx)(ht,{size:14,style:{marginRight:8}}),(0,s.jsx)("span",{children:C})]})}},{title:"Host",dataIndex:"creator",key:"creator"},{title:"Member",dataIndex:"members",key:"members",render:function(C){return C.join(", ")}},{title:"Description",dataIndex:"description",key:"description",render:function(C){return C||"-"}},{title:"Action",dataIndex:"action",key:"action",render:function(C,ae){return(0,s.jsx)(gt,{size:16,cursor:"pointer",onClick:function(){return o(ae.id)}})}}]})})]})},it=(qe=(0,te.ri)({contrib:[ut.l]}),_e=(0,ee.ei)("scql-project-view"),et=function(n,l){return(0,te.f3)(U)(n,void 0,0)},tt=function(n,l){return(0,te.f3)(He.Z)(n,void 0,1)},nt=Reflect.metadata("design:type",Function),rt=Reflect.metadata("design:paramtypes",[typeof U=="undefined"?Object:U,typeof He.Z=="undefined"?Object:He.Z]),qe(w=_e(w=et(w=tt(w=nt(w=rt(w=function(a){F()(l,a);var n=Ee()(l);function l(i,t){var v;return Y()(this,l),v=n.call(this),le()(E()(v),"view",Ct),le()(E()(v),"service",void 0),le()(E()(v),"modalService",void 0),v.service=i,v.modalService=t,v}return se()(l,[{key:"onViewMount",value:function(){var i=W()(j()().mark(function v(){return j()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.service.getProjectList();case 1:case"end":return o.stop()}},v,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"openAddProjectModal",value:function(){this.modalService.openModal(Qe)}},{key:"registerModal",value:function(){return Qe}}]),l}(Oe.P))||w)||w)||w)||w)||w)||w),jt=xe.R.create().register(U,it,Xe,(0,ee.bQ)({slot:oe.fD.main,view:it,autoCreate:!0}),(0,ee.bQ)({slot:oe.Mx.right,view:Xe,autoCreate:!0})),St=e(27275),xt=e(36752),Pt=function(){return(0,s.jsx)(Se.rF.Application,{asChild:!0,modules:[_.n6L,St.F,xt.O,oe.zd,jt]},"libro-app")},zt=Pt},29800:function(Ye,he,e){e.d(he,{C:function(){return ne}});var d=e(44194),Se=e(51865),_=e.n(Se),oe=e(70458),xe=e(38726),ee=e(93065),ge=e(40987),Y=e(62466),me=e(67919),se=e(64161),E=d.createContext({}),$e=e(82291),F=e(52890),Re=e(69567),Ee=e(13077);const Be=c=>{const{antCls:g,componentCls:m,iconCls:u,avatarBg:S,avatarColor:X,containerSize:G,containerSizeLG:K,containerSizeSM:L,textFontSize:I,textFontSizeLG:T,textFontSizeSM:de,borderRadius:O,borderRadiusLG:N,borderRadiusSM:re,lineWidth:ue,lineType:R}=c,h=(A,M,V)=>({width:A,height:A,borderRadius:"50%",[`&${m}-square`]:{borderRadius:V},[`&${m}-icon`]:{fontSize:M,[`> ${u}`]:{margin:0}}});return{[m]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,F.Wf)(c)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:X,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:S,border:`${(0,$e.bf)(ue)} ${R} transparent`,"&-image":{background:"transparent"},[`${g}-image-img`]:{display:"block"}}),h(G,I,O)),{"&-lg":Object.assign({},h(K,T,N)),"&-sm":Object.assign({},h(L,de,re)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},le=c=>{const{componentCls:g,groupBorderColor:m,groupOverlapping:u,groupSpace:S}=c;return{[`${g}-group`]:{display:"inline-flex",[`${g}`]:{borderColor:m},"> *:not(:first-child)":{marginInlineStart:u}},[`${g}-group-popover`]:{[`${g} + ${g}`]:{marginInlineStart:S}}}},We=c=>{const{controlHeight:g,controlHeightLG:m,controlHeightSM:u,fontSize:S,fontSizeLG:X,fontSizeXL:G,fontSizeHeading3:K,marginXS:L,marginXXS:I,colorBorderBg:T}=c;return{containerSize:g,containerSizeLG:m,containerSizeSM:u,textFontSize:Math.round((X+G)/2),textFontSizeLG:K,textFontSizeSM:S,groupSpace:I,groupOverlapping:-L,groupBorderColor:T}};var j=(0,Re.I$)("Avatar",c=>{const{colorTextLightSolid:g,colorTextPlaceholder:m}=c,u=(0,Ee.TS)(c,{avatarBg:m,avatarColor:g});return[Be(u),le(u)]},We),Ge=function(c,g){var m={};for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&g.indexOf(u)<0&&(m[u]=c[u]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,u=Object.getOwnPropertySymbols(c);S<u.length;S++)g.indexOf(u[S])<0&&Object.prototype.propertyIsEnumerable.call(c,u[S])&&(m[u[S]]=c[u[S]]);return m};const W=(c,g)=>{const[m,u]=d.useState(1),[S,X]=d.useState(!1),[G,K]=d.useState(!0),L=d.useRef(null),I=d.useRef(null),T=(0,xe.sQ)(g,L),{getPrefixCls:de,avatar:O}=d.useContext(ge.E_),N=d.useContext(E),re=()=>{if(!I.current||!L.current)return;const y=I.current.offsetWidth,f=L.current.offsetWidth;if(y!==0&&f!==0){const{gap:B=4}=c;B*2<f&&u(f-B*2<y?(f-B*2)/y:1)}};d.useEffect(()=>{X(!0)},[]),d.useEffect(()=>{K(!0),u(1)},[c.src]),d.useEffect(re,[c.gap]);const ue=()=>{const{onError:y}=c;(y==null?void 0:y())!==!1&&K(!1)},{prefixCls:R,shape:h,size:A,src:M,srcSet:V,icon:H,className:ve,rootClassName:Me,alt:k,draggable:Q,children:D,crossOrigin:ie}=c,Z=Ge(c,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),x=(0,me.Z)(y=>{var f,B;return(B=(f=A!=null?A:N==null?void 0:N.size)!==null&&f!==void 0?f:y)!==null&&B!==void 0?B:"default"}),ye=Object.keys(typeof x=="object"?x||{}:{}).some(y=>["xs","sm","md","lg","xl","xxl"].includes(y)),fe=(0,se.Z)(ye),Ce=d.useMemo(()=>{if(typeof x!="object")return{};const y=ee.c4.find(B=>fe[B]),f=x[y];return f?{width:f,height:f,fontSize:f&&(H||D)?f/2:18}:{}},[fe,x]),P=de("avatar",R),ze=(0,Y.Z)(P),[Le,Te,je]=j(P,ze),U=_()({[`${P}-lg`]:x==="large",[`${P}-sm`]:x==="small"}),s=d.isValidElement(M),Ae=h||(N==null?void 0:N.shape)||"circle",De=_()(P,U,O==null?void 0:O.className,`${P}-${Ae}`,{[`${P}-image`]:s||M&&G,[`${P}-icon`]:!!H},je,ze,ve,Me,Te),Ze=typeof x=="number"?{width:x,height:x,fontSize:H?x/2:18}:{};let q;if(typeof M=="string"&&G)q=d.createElement("img",{src:M,draggable:Q,srcSet:V,onError:ue,alt:k,crossOrigin:ie});else if(s)q=M;else if(H)q=H;else if(S||m!==1){const y=`scale(${m})`,f={msTransform:y,WebkitTransform:y,transform:y};q=d.createElement(oe.Z,{onResize:re},d.createElement("span",{className:`${P}-string`,ref:I,style:Object.assign({},f)},D))}else q=d.createElement("span",{className:`${P}-string`,style:{opacity:0},ref:I},D);return delete Z.onError,delete Z.gap,Le(d.createElement("span",Object.assign({},Z,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ze),Ce),O==null?void 0:O.style),Z.style),className:De,ref:T}),q))};var Pe=d.forwardRef(W),te=e(2770),Oe=e(10614),pe=e(18252);const J=c=>{const{size:g,shape:m}=d.useContext(E),u=d.useMemo(()=>({size:c.size||g,shape:c.shape||m}),[c.size,c.shape,g,m]);return d.createElement(E.Provider,{value:u},c.children)};var Ve=c=>{var g,m,u;const{getPrefixCls:S,direction:X}=d.useContext(ge.E_),{prefixCls:G,className:K,rootClassName:L,style:I,maxCount:T,maxStyle:de,size:O,shape:N,maxPopoverPlacement:re,maxPopoverTrigger:ue,children:R,max:h}=c,A=S("avatar",G),M=`${A}-group`,V=(0,Y.Z)(A),[H,ve,Me]=j(A,V),k=_()(M,{[`${M}-rtl`]:X==="rtl"},Me,V,K,L,ve),Q=(0,te.Z)(R).map((Z,x)=>(0,Oe.Tm)(Z,{key:`avatar-key-${x}`})),D=(h==null?void 0:h.count)||T,ie=Q.length;if(D&&D<ie){const Z=Q.slice(0,D),x=Q.slice(D,ie),ye=(h==null?void 0:h.style)||de,fe=((g=h==null?void 0:h.popover)===null||g===void 0?void 0:g.trigger)||ue||"hover",Ce=((m=h==null?void 0:h.popover)===null||m===void 0?void 0:m.placement)||re||"top",P=Object.assign(Object.assign({content:x},h==null?void 0:h.popover),{overlayClassName:_()(`${M}-popover`,(u=h==null?void 0:h.popover)===null||u===void 0?void 0:u.overlayClassName),placement:Ce,trigger:fe});return Z.push(d.createElement(pe.Z,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},P),d.createElement(Pe,{style:ye},`+${ie-D}`))),H(d.createElement(J,{shape:N,size:O},d.createElement("div",{className:k,style:I},Z)))}return H(d.createElement(J,{shape:N,size:O},d.createElement("div",{className:k,style:I},Q)))};const Ne=Pe;Ne.Group=Ve;var ne=Ne}}]);
