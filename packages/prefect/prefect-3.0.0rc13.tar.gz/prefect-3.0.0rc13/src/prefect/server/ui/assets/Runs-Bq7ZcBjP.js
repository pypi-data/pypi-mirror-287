import{d as Bn,g as Ln,b2 as Gn,ao as M,t as at,j as Y,b3 as Kn,b4 as kt,b5 as $n,as as ot,b6 as Xn,b7 as qn,af as Ft,c as g,k as f,a8 as st,l as m,i as Jn,o as _,m as h,n as a,b8 as Wn,A as Ot,aZ as Yn,a6 as C,b9 as Zn,D as O,aO as lt,ba as Qn,a as j,x as er,bb as jt,bc as tr,K as Ut,bd as Vt,be as nr,F as It,bf as rr,G as Pt,bg as ar,bh as or,bi as sr,bj as Et,bk as lr,bl as ur,bm as ir,bn as cr,bo as fr}from"./index-CgvuCQfr.js";import{g as dr,c as Ue}from"./_commonjsHelpers-Cpj98o6Y.js";import{u as pr}from"./usePageTitle-DVT0B9Gy.js";var Ve={exports:{}};Ve.exports;(function(Z,U){var Ie=200,V="__lodash_hash_undefined__",H=800,Pe=16,Q=9007199254740991,ee="[object Arguments]",Ee="[object Array]",se="[object AsyncFunction]",I="[object Boolean]",le="[object Date]",Ne="[object Error]",w="[object Function]",ue="[object GeneratorFunction]",B="[object Map]",De="[object Number]",x="[object Null]",A="[object Object]",L="[object Proxy]",G="[object RegExp]",K="[object Set]",ie="[object String]",ce="[object Undefined]",ze="[object WeakMap]",fe="[object ArrayBuffer]",ct="[object DataView]",Me="[object Float32Array]",He="[object Float64Array]",Be="[object Int8Array]",de="[object Int16Array]",pe="[object Int32Array]",Le="[object Uint8Array]",$="[object Uint8ClampedArray]",_e="[object Uint16Array]",ge="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,Ge=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,s={};s[Me]=s[He]=s[Be]=s[de]=s[pe]=s[Le]=s[$]=s[_e]=s[ge]=!0,s[ee]=s[Ee]=s[fe]=s[I]=s[ct]=s[le]=s[Ne]=s[w]=s[B]=s[De]=s[A]=s[G]=s[K]=s[ie]=s[ze]=!1;var te=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,T=typeof self=="object"&&self&&self.Object===Object&&self,k=te||T||Function("return this")(),me=U&&!U.nodeType&&U,P=me&&!0&&Z&&!Z.nodeType&&Z,R=P&&P.exports===me,i=R&&te.process,ne=function(){try{var e=P&&P.require&&P.require("util").types;return e||i&&i.binding&&i.binding("util")}catch{}}(),be=ne&&ne.isTypedArray;function Ke(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ve(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $e(e){return function(t){return e(t)}}function ye(e,t){return e==null?void 0:e[t]}function Xe(e,t){return function(n){return e(t(n))}}var we=Array.prototype,Te=Function.prototype,E=Object.prototype,q=k["__core-js_shared__"],F=Te.toString,v=E.hasOwnProperty,Re=function(){var e=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Se=E.toString,l=F.call(Object),Ce=RegExp("^"+F.call(v).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=R?k.Buffer:void 0,ft=k.Symbol,dt=k.Uint8Array,pt=xe?xe.allocUnsafe:void 0,_t=Xe(Object.getPrototypeOf,Object),gt=Object.create,Nt=E.propertyIsEnumerable,Dt=we.splice,N=ft?ft.toStringTag:void 0,Ae=function(){try{var e=We(Object,"defineProperty");return e({},"",{}),e}catch{}}(),zt=xe?xe.isBuffer:void 0,ht=Math.max,Mt=Date.now,mt=We(k,"Map"),re=We(Object,"create"),Ht=function(){function e(){}return function(t){if(!z(t))return{};if(gt)return gt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function D(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bt(){this.__data__=re?re(null):{},this.size=0}function Lt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Gt(e){var t=this.__data__;if(re){var n=t[e];return n===V?void 0:n}return v.call(t,e)?t[e]:void 0}function Kt(e){var t=this.__data__;return re?t[e]!==void 0:v.call(t,e)}function $t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=re&&t===void 0?V:t,this}D.prototype.clear=Bt,D.prototype.delete=Lt,D.prototype.get=Gt,D.prototype.has=Kt,D.prototype.set=$t;function S(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xt(){this.__data__=[],this.size=0}function qt(e){var t=this.__data__,n=ke(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Dt.call(t,n,1),--this.size,!0}function Jt(e){var t=this.__data__,n=ke(t,e);return n<0?void 0:t[n][1]}function Wt(e){return ke(this.__data__,e)>-1}function Yt(e,t){var n=this.__data__,r=ke(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}S.prototype.clear=Xt,S.prototype.delete=qt,S.prototype.get=Jt,S.prototype.has=Wt,S.prototype.set=Yt;function J(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zt(){this.size=0,this.__data__={hash:new D,map:new(mt||S),string:new D}}function Qt(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t}function en(e){return Oe(this,e).get(e)}function tn(e){return Oe(this,e).has(e)}function nn(e,t){var n=Oe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}J.prototype.clear=Zt,J.prototype.delete=Qt,J.prototype.get=en,J.prototype.has=tn,J.prototype.set=nn;function W(e){var t=this.__data__=new S(e);this.size=t.size}function rn(){this.__data__=new S,this.size=0}function an(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function on(e){return this.__data__.get(e)}function sn(e){return this.__data__.has(e)}function ln(e,t){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!mt||r.length<Ie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new J(r)}return n.set(e,t),this.size=n.size,this}W.prototype.clear=rn,W.prototype.delete=an,W.prototype.get=on,W.prototype.has=sn,W.prototype.set=ln;function un(e,t){var n=Qe(e),r=!n&&Ze(e),u=!n&&!r&&Tt(e),c=!n&&!r&&!u&&St(e),d=n||r||u||c,o=d?ve(e.length,String):[],p=o.length;for(var y in e)(t||v.call(e,y))&&!(d&&(y=="length"||u&&(y=="offset"||y=="parent")||c&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||yt(y,p)))&&o.push(y);return o}function qe(e,t,n){(n!==void 0&&!je(e[t],n)||n===void 0&&!(t in e))&&Je(e,t,n)}function cn(e,t,n){var r=e[t];(!(v.call(e,t)&&je(r,n))||n===void 0&&!(t in e))&&Je(e,t,n)}function ke(e,t){for(var n=e.length;n--;)if(je(e[n][0],t))return n;return-1}function Je(e,t,n){t=="__proto__"&&Ae?Ae(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var fn=Sn();function Fe(e){return e==null?e===void 0?ce:x:N&&N in Object(e)?Cn(e):jn(e)}function bt(e){return ae(e)&&Fe(e)==ee}function dn(e){if(!z(e)||Fn(e))return!1;var t=tt(e)?Ce:Ge;return t.test(Pn(e))}function pn(e){return ae(e)&&Rt(e.length)&&!!s[Fe(e)]}function _n(e){if(!z(e))return On(e);var t=wt(e),n=[];for(var r in e)r=="constructor"&&(t||!v.call(e,r))||n.push(r);return n}function vt(e,t,n,r,u){e!==t&&fn(t,function(c,d){if(u||(u=new W),z(c))gn(e,t,d,n,vt,r,u);else{var o=r?r(Ye(e,d),c,d+"",e,t,u):void 0;o===void 0&&(o=c),qe(e,d,o)}},Ct)}function gn(e,t,n,r,u,c,d){var o=Ye(e,n),p=Ye(t,n),y=d.get(p);if(y){qe(e,n,y);return}var b=c?c(o,p,n+"",e,t,d):void 0,oe=b===void 0;if(oe){var nt=Qe(p),rt=!nt&&Tt(p),At=!nt&&!rt&&St(p);b=p,nt||rt||At?Qe(o)?b=o:En(o)?b=wn(o):rt?(oe=!1,b=bn(p,!0)):At?(oe=!1,b=yn(p,!0)):b=[]:Nn(p)||Ze(p)?(b=o,Ze(o)?b=Dn(o):(!z(o)||tt(o))&&(b=xn(p))):oe=!1}oe&&(d.set(p,b),u(b,p,r,c,d),d.delete(p)),qe(e,n,b)}function hn(e,t){return Vn(Un(e,t,xt),e+"")}var mn=Ae?function(e,t){return Ae(e,"toString",{configurable:!0,enumerable:!1,value:Mn(t),writable:!0})}:xt;function bn(e,t){if(t)return e.slice();var n=e.length,r=pt?pt(n):new e.constructor(n);return e.copy(r),r}function vn(e){var t=new e.constructor(e.byteLength);return new dt(t).set(new dt(e)),t}function yn(e,t){var n=t?vn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function wn(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Tn(e,t,n,r){var u=!n;n||(n={});for(var c=-1,d=t.length;++c<d;){var o=t[c],p=r?r(n[o],e[o],o,n,e):void 0;p===void 0&&(p=e[o]),u?Je(n,o,p):cn(n,o,p)}return n}function Rn(e){return hn(function(t,n){var r=-1,u=n.length,c=u>1?n[u-1]:void 0,d=u>2?n[2]:void 0;for(c=e.length>3&&typeof c=="function"?(u--,c):void 0,d&&An(n[0],n[1],d)&&(c=u<3?void 0:c,u=1),t=Object(t);++r<u;){var o=n[r];o&&e(t,o,r,c)}return t})}function Sn(e){return function(t,n,r){for(var u=-1,c=Object(t),d=r(t),o=d.length;o--;){var p=d[e?o:++u];if(n(c[p],p,c)===!1)break}return t}}function Oe(e,t){var n=e.__data__;return kn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function We(e,t){var n=ye(e,t);return dn(n)?n:void 0}function Cn(e){var t=v.call(e,N),n=e[N];try{e[N]=void 0;var r=!0}catch{}var u=Se.call(e);return r&&(t?e[N]=n:delete e[N]),u}function xn(e){return typeof e.constructor=="function"&&!wt(e)?Ht(_t(e)):{}}function yt(e,t){var n=typeof e;return t=t??Q,!!t&&(n=="number"||n!="symbol"&&he.test(e))&&e>-1&&e%1==0&&e<t}function An(e,t,n){if(!z(n))return!1;var r=typeof t;return(r=="number"?et(n)&&yt(t,n.length):r=="string"&&t in n)?je(n[t],e):!1}function kn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Fn(e){return!!Re&&Re in e}function wt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||E;return e===n}function On(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}function jn(e){return Se.call(e)}function Un(e,t,n){return t=ht(t===void 0?e.length-1:t,0),function(){for(var r=arguments,u=-1,c=ht(r.length-t,0),d=Array(c);++u<c;)d[u]=r[t+u];u=-1;for(var o=Array(t+1);++u<t;)o[u]=r[u];return o[t]=n(d),Ke(e,this,o)}}function Ye(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Vn=In(mn);function In(e){var t=0,n=0;return function(){var r=Mt(),u=Pe-(r-n);if(n=r,u>0){if(++t>=H)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Pn(e){if(e!=null){try{return F.call(e)}catch{}try{return e+""}catch{}}return""}function je(e,t){return e===t||e!==e&&t!==t}var Ze=bt(function(){return arguments}())?bt:function(e){return ae(e)&&v.call(e,"callee")&&!Nt.call(e,"callee")},Qe=Array.isArray;function et(e){return e!=null&&Rt(e.length)&&!tt(e)}function En(e){return ae(e)&&et(e)}var Tt=zt||Hn;function tt(e){if(!z(e))return!1;var t=Fe(e);return t==w||t==ue||t==se||t==L}function Rt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Q}function z(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ae(e){return e!=null&&typeof e=="object"}function Nn(e){if(!ae(e)||Fe(e)!=A)return!1;var t=_t(e);if(t===null)return!0;var n=v.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&F.call(n)==l}var St=be?$e(be):pn;function Dn(e){return Tn(e,Ct(e))}function Ct(e){return et(e)?un(e,!0):_n(e)}var zn=Rn(function(e,t,n){vt(e,t,n)});function Mn(e){return function(){return e}}function xt(e){return e}function Hn(){return!1}Z.exports=zn})(Ve,Ve.exports);var _r=Ve.exports;const ut=dr(_r),gr={class:"runs__subflows-toggle"},it=3e4,vr=Bn({__name:"Runs",setup(Z){const U=Ln(),Ie=Jn(),V=Gn(),H=M("tab","flow-runs"),Pe=["flow-runs","task-runs"],Q=at(U.flowRuns.getFlowRunsCount),ee=at(U.taskRuns.getTaskRunsCount),Ee=Y(()=>Q.executed&&ee.executed),se=Y(()=>Q.response===0&&ee.response===0),{filter:I,setFilter:le,isCustom:Ne}=Kn(),w=M("flow-run-search",Et,null),ue=kt(w,1200),B=M("task-run-search",Et,null),De=kt(B,1200),x=M("hide-subflows",lr,!1),A=M("flow-runs-sort",ur,"START_TIME_DESC"),L=M("task-runs-sort",ir,"EXPECTED_START_TIME_DESC"),G=M("flow-runs-page",cr,1),{value:K}=$n("workspace-runs-list-limit",10),ie=()=>{const R=st.map("SavedSearchFilter",I,"FlowRunsFilter");return ut({},R,{flowRuns:{nameLike:ue.value??void 0,parentTaskRunIdNull:x.value?!0:void 0},sort:A.value,limit:K.value,page:G.value})},ce=ot(ie),ze=ot(()=>{const R=st.map("SavedSearchFilter",I,"TaskRunsFilter");return ut({},R,{taskRuns:{nameLike:De.value},sort:L.value})}),fe=Y(()=>Ne.value||x.value||w.value),Me=ot(()=>{const R=st.map("SavedSearchFilter",I,"FlowRunsFilter");return ut({},R,{flowRuns:{nameLike:ue.value??void 0,parentTaskRunIdNull:x.value?!0:void 0},sort:A.value})}),He=at(U.ui.getFlowRunHistory,[Me],{interval:it}),Be=Y(()=>He.response??[]),{flowRuns:de,count:pe,pages:Le,subscription:$}=Xn(ie,{interval:it}),{taskRuns:_e,total:ge,subscriptions:X,next:Ge}=qn(ze,{mode:"infinite",interval:it}),he=Y(()=>V.delete.flow_run),s=Ft([]),te=Y(()=>V.delete.task_run),T=Ft([]);function k(){Ie.push(fr.runs({tab:H.value}))}pr("Runs");const me=()=>{s.value=[],$.refresh()},P=()=>{T.value=[],X.refresh()};return(R,i)=>{const ne=m("p-tabs-trigger"),be=m("p-tabs-list"),Ke=m("p-card"),ve=m("p-select-all-checkbox"),$e=m("p-toggle"),ye=m("p-list-header"),Xe=m("p-pager"),we=m("p-loading-icon"),Te=m("p-message"),E=m("p-button"),q=m("p-empty-results"),F=m("p-content"),v=m("p-tabs-content"),Re=m("p-tabs-root"),Se=m("p-layout-default");return _(),g(Se,{class:"runs"},{header:f(()=>[h(a(Wn),{filter:a(I),"hide-actions":se.value,"onUpdate:filter":a(le)},null,8,["filter","hide-actions","onUpdate:filter"])]),default:f(()=>[Ee.value?(_(),Ot(It,{key:0},[se.value?(_(),g(a(Yn),{key:0})):(_(),g(F,{key:1},{default:f(()=>[h(a(Zn),{nameSearch:a(w),"onUpdate:nameSearch":i[0]||(i[0]=l=>C(w)?w.value=l:null),filter:a(I),"onUpdate:filter":a(le)},null,8,["nameSearch","filter","onUpdate:filter"]),h(Re,{modelValue:a(H),"onUpdate:modelValue":i[12]||(i[12]=l=>C(H)?H.value=l:null),"default-value":Pe[0]},{default:f(()=>[h(be,null,{default:f(()=>[h(ne,{value:"flow-runs"},{default:f(()=>[O(" Flow runs ")]),_:1}),h(ne,{value:"task-runs"},{default:f(()=>[O(" Task runs ")]),_:1})]),_:1}),h(v,{value:"flow-runs"},{default:f(()=>[h(F,null,{default:f(()=>[a(lt).md?(_(),g(Ke,{key:0},{default:f(()=>{var l,Ce;return[h(a(Qn),{history:Be.value,"start-date":(l=ce.value.flowRuns)==null?void 0:l.expectedStartTimeAfter,"end-date":(Ce=ce.value.flowRuns)==null?void 0:Ce.expectedStartTimeBefore,class:"runs__scatter-plot"},null,8,["history","start-date","end-date"])]}),_:1})):j("",!0),h(ye,{class:"min-h-10",sticky:""},{controls:f(()=>[er("div",gr,[h($e,{modelValue:a(x),"onUpdate:modelValue":i[2]||(i[2]=l=>C(x)?x.value=l:null),append:"Hide subflows"},null,8,["modelValue"])]),a(lt).md?(_(),g(a(jt),{key:0,modelValue:a(w),"onUpdate:modelValue":i[3]||(i[3]=l=>C(w)?w.value=l:null),size:"small",placeholder:"Search by flow run name",class:"min-w-64",label:"Search by flow run name"},null,8,["modelValue"])):j("",!0)]),sort:f(()=>[h(a(tr),{modelValue:a(A),"onUpdate:modelValue":i[4]||(i[4]=l=>C(A)?A.value=l:null),small:""},null,8,["modelValue"])]),default:f(()=>[he.value?(_(),g(ve,{key:0,modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=l=>s.value=l),selectable:a(de).map(l=>l.id),"item-name":"flow run"},null,8,["modelValue","selectable"])):j("",!0),s.value.length==0?(_(),g(a(Ut),{key:1,count:a(pe),label:"run"},null,8,["count"])):(_(),g(a(Vt),{key:2,count:s.value.length},null,8,["count"])),a(V).delete.flow_run?(_(),g(a(nr),{key:3,selected:s.value,onDelete:me},null,8,["selected"])):j("",!0)]),_:1}),a(pe)>0?(_(),Ot(It,{key:1},[h(a(rr),{selected:s.value,"onUpdate:selected":i[5]||(i[5]=l=>s.value=l),selectable:he.value,"flow-runs":a(de)},null,8,["selected","selectable","flow-runs"]),h(Xe,{limit:a(K),"onUpdate:limit":i[6]||(i[6]=l=>C(K)?K.value=l:null),page:a(G),"onUpdate:page":i[7]||(i[7]=l=>C(G)?G.value=l:null),pages:a(Le)},null,8,["limit","page","pages"])],64)):!a($).executed&&a($).loading?(_(),g(we,{key:2,class:"m-auto"})):a($).executed?(_(),g(q,{key:4},Pt({message:f(()=>[O(" No flow runs ")]),_:2},[fe.value?{name:"actions",fn:f(()=>[h(E,{size:"sm",onClick:k},{default:f(()=>[O(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024)):(_(),g(Te,{key:3,type:"error"},{default:f(()=>[O(" An error occurred while loading flow runs. Please try again. ")]),_:1}))]),_:1})]),_:1}),h(v,{value:"task-runs"},{default:f(()=>[h(F,null,{default:f(()=>[h(ye,{class:"min-h-10",sticky:""},{controls:f(()=>[a(lt).md?(_(),g(a(jt),{key:0,modelValue:a(B),"onUpdate:modelValue":i[9]||(i[9]=l=>C(B)?B.value=l:null),size:"small",placeholder:"Search by task run name",class:"min-w-64",label:"Search by task run name"},null,8,["modelValue"])):j("",!0)]),sort:f(()=>[h(a(ar),{modelValue:a(L),"onUpdate:modelValue":i[10]||(i[10]=l=>C(L)?L.value=l:null),small:""},null,8,["modelValue"])]),default:f(()=>[te.value?(_(),g(ve,{key:0,modelValue:T.value,"onUpdate:modelValue":i[8]||(i[8]=l=>T.value=l),selectable:a(_e).map(l=>l.id),"item-name":"task run"},null,8,["modelValue","selectable"])):j("",!0),T.value.length==0?(_(),g(a(Ut),{key:1,count:a(ge),label:"run"},null,8,["count"])):(_(),g(a(Vt),{key:2,count:T.value.length},null,8,["count"])),a(V).delete.task_run?(_(),g(a(or),{key:3,selected:T.value,onDelete:P},null,8,["selected"])):j("",!0)]),_:1}),a(ge)>0?(_(),g(a(sr),{key:0,selected:T.value,"onUpdate:selected":i[11]||(i[11]=l=>T.value=l),selectable:te.value,"task-runs":a(_e),onBottom:a(Ge)},null,8,["selected","selectable","task-runs","onBottom"])):!a(X).executed&&a(X).loading?(_(),g(we,{key:1,class:"m-auto"})):a(X).executed?(_(),g(q,{key:3},Pt({message:f(()=>[O(" No task runs ")]),_:2},[fe.value?{name:"actions",fn:f(()=>[h(E,{size:"sm",onClick:k},{default:f(()=>[O(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024)):(_(),g(Te,{key:2,type:"error"},{default:f(()=>[O(" An error occurred while loading task runs. Please try again. ")]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue","default-value"])]),_:1}))],64)):j("",!0)]),_:1})}}});export{vr as default};
//# sourceMappingURL=Runs-Bq7ZcBjP.js.map
