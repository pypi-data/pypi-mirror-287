import{_ as y,M as C,N as B,A as c,S as d,E as m,r as n,o as V,c as S,b as t,w as o,a as p,F as v,d as u}from"./index-b85cf3e9.js";import{P as T,a as L}from"./pageUtils-acf5de9e.js";const P={components:{ElMessageBox:C,Timer:B},data(){return{dialogVisible:!1,blackList:"",blackContent:"",TablePage:0,currentPage:1,BlackTableData:[]}},created(){this.GetSysBlackList(),this.GetSysBlackListSize()},methods:{GetSysBlackList(){c.get(d.sys_user_black_list,{_page:this.currentPage,_page_size:T}).then(({data:s})=>{this.BlackTableData=s.data})},GetSysBlackListSize(){c.get(d.sys_user_black_list,{get_count:!0}).then(({data:s})=>{this.TablePage=L(s.data)})},CreateSysBlack(){this.dialogVisible=!1,c.post(d.sys_user_black_list,{user:this.blackList,content:this.blackContent}).then(({data:s})=>{s.code===200?this.BlackTableData.unshift(s.data[0]):m.error(s.msg)})},handleTableDelete(s,e){c.delete(d.sys_user_black_list,{id:e.id}).then(({data:g})=>{g.code===200?this.BlackTableData.splice(s,1):m.error("删除任务失败")})}}},w={class:"dialog-footer"},x={class:"users"},D={class:"page"};function U(s,e,g,z,l,_){const b=n("el-input"),i=n("el-button"),k=n("el-dialog"),r=n("el-table-column"),f=n("el-table"),h=n("el-pagination");return V(),S(v,null,[t(k,{modelValue:l.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=a=>l.dialogVisible=a),title:"添加黑名单",width:"50%"},{footer:o(()=>[p("span",w,[t(i,{onClick:e[2]||(e[2]=a=>l.dialogVisible=!1)},{default:o(()=>[u("取 消")]),_:1}),t(i,{type:"primary",onClick:_.CreateSysBlack},{default:o(()=>[u(" 确 认 ")]),_:1},8,["onClick"])])]),default:o(()=>[t(b,{modelValue:l.blackList,"onUpdate:modelValue":e[0]||(e[0]=a=>l.blackList=a),placeholder:"添加黑名单",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),t(b,{modelValue:l.blackContent,"onUpdate:modelValue":e[1]||(e[1]=a=>l.blackContent=a),placeholder:"添加原因"},null,8,["modelValue"])]),_:1},8,["modelValue"]),p("div",x,[t(f,{data:l.BlackTableData,style:{width:"100%"}},{default:o(()=>[t(r,{prop:"user",label:"用户ID","min-width":"20"}),t(r,{prop:"username",label:"禁用用户","min-width":"100"}),t(r,{prop:"content",label:"禁用理由","min-width":"100","show-overflow-tooltip":"true"}),t(r,{align:"right"},{header:o(()=>[t(i,{type:"primary",plain:"",onClick:e[4]||(e[4]=a=>l.dialogVisible=!0)},{default:o(()=>[u(" 添加黑名单 ")]),_:1})]),default:o(a=>[t(i,{size:"small",type:"danger",onClick:G=>_.handleTableDelete(a.$index,a.row)},{default:o(()=>[u("解除禁用")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),p("div",D,[t(h,{background:"",layout:"prev, pager, next","page-count":l.TablePage,"hide-on-single-page":"true","current-page":l.currentPage,"onUpdate:currentPage":e[5]||(e[5]=a=>l.currentPage=a),onCurrentChange:_.GetSysBlackList},null,8,["page-count","current-page","onCurrentChange"])])])],64)}const A=y(P,[["render",U],["__scopeId","data-v-228d406f"]]);export{A as default};
