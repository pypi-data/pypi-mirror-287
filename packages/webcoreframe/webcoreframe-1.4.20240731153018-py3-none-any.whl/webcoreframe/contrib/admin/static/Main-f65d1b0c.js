import{_ as S,m as M,e as R,h as B,f as q,g as N,i as z,j as J,k as K,l as P,n as Q,p as W,q as X,A as $,S as A,r as s,o,c as h,a as c,t as f,b as t,w as e,F as g,s as k,v as L,x as _,y as w,d as b,z as Y,B as Z,C as ee,D as ne,G as te,H as le,u as ae,E as D,I as oe,J as se}from"./index-b85cf3e9.js";const re={data(){return{TableData:void 0}},computed:{isCollapse(){return this.$store.state.AsideCollapse},dashboardData(){return this.TableData.filter(n=>n.langname==="dashboard")},settingsData(){return this.TableData.filter(n=>n.langname==="settings")},dataManageData(){return this.TableData.filter(n=>n.langname==="data_manage")},logData(){return this.TableData.filter(n=>n.langname==="log")}},components:{IconMenu:M,IconEdit:R,IconHouse:B,IconCpu:q,IconMonitor:N,IconFolderOpened:z,IconOperation:J,IconAlarmClock:K,IconUser:P,IconLocation:Q,IconHistogram:W,IconList:X},mounted(){this.handleGetTableData()},methods:{handleRouter(n,a){this.$store.commit("ChangeHeaderList",{name:a,url:n}),this.$router.push(n)},handleGetTableData(){$.get(A.sys_menu,{get_tree:!0}).then(n=>{this.TableData=n.data.data}).catch(n=>{console.log(n)})}}},de={style:{"text-align":"center",height:"1vh"}};function ue(n,a,p,y,r,d){const m=s("el-icon"),C=s("el-menu-item"),i=s("el-sub-menu"),v=s("el-menu");return o(),h(g,null,[c("h3",de,f(d.isCollapse?"后台":"后台管理系统"),1),t(v,{"default-active":"1",class:"el-menu-vertical",collapse:d.isCollapse},{default:e(()=>[r.TableData!==void 0?(o(!0),h(g,{key:0},k(d.dashboardData,l=>(o(),_(C,{onClick:u=>d.handleRouter(l.url,l.name),index:l.id,key:l.id},{default:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(l.icon)))]),_:2},1024),c("span",null,f(l.name),1)]),_:2},1032,["onClick","index"]))),128)):L("",!0),r.TableData!==void 0?(o(!0),h(g,{key:1},k(d.settingsData,l=>(o(),_(i,{index:l.id,key:l.id},{title:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(l.icon)))]),_:2},1024),c("span",null,f(l.name),1)]),default:e(()=>[(o(!0),h(g,null,k(l.sub_module,u=>(o(),_(C,{onClick:I=>d.handleRouter(l.url+u.url,`${l.name}/${u.name}`),index:u.id},{default:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(u.icon)))]),_:2},1024),b(" "+f(u.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):L("",!0),r.TableData!==void 0?(o(!0),h(g,{key:2},k(d.dataManageData,l=>(o(),_(i,{index:l.id,key:l.id},{title:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(l.icon)))]),_:2},1024),c("span",null,f(l.name),1)]),default:e(()=>[(o(!0),h(g,null,k(l.sub_module,u=>(o(),_(C,{onClick:I=>d.handleRouter(l.url+u.url,`${l.name}/${u.name}`),index:u.id},{default:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(u.icon)))]),_:2},1024),b(" "+f(u.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):L("",!0),r.TableData!==void 0?(o(!0),h(g,{key:3},k(d.logData,l=>(o(),_(i,{index:l.id,key:l.id},{title:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(l.icon)))]),_:2},1024),c("span",null,f(l.name),1)]),default:e(()=>[(o(!0),h(g,null,k(l.sub_module,u=>(o(),_(C,{onClick:I=>d.handleRouter(l.url+u.url,`${l.name}/${u.name}`),index:u.id},{default:e(()=>[t(m,null,{default:e(()=>[(o(),_(w(u.icon)))]),_:2},1024),b(" "+f(u.name),1)]),_:2},1032,["onClick","index"]))),256))]),_:2},1032,["index"]))),128)):L("",!0)]),_:1},8,["collapse"])],64)}const ce=S(re,[["render",ue],["__scopeId","data-v-cae8e71c"]]),ie=Y(),_e=Z(ie);const me={data(){return{profiledialogVisible:!1,user:void 0,lightSwitch:localStorage.getItem("lightSwitch")==="true"}},components:{Menu:M,Sunny:ee,Moon:ne,FullScreen:te},watch:{lightSwitch(n,a){localStorage.setItem("lightSwitch",n)}},created(){le.GetUserInfo(this.GetUserInfo)},computed:{HeaderLink(){return this.$store.state.HeaderLink}},methods:{handleAside(){this.$store.commit("ChangeAsideCollapse")},GetUserInfo({data:n}){n.code===200?this.user=n.data:this.$router.push({name:"login"})},handleLogout(){$.post(A.userlogout,{"sign-out":!0}).then(n=>{n.data.code===200?(ae.ClearUserToken(),D({message:"退出成功",type:"success"}),this.$router.push({name:"login"})):D.error(n.data.data)})},handleSwitch(){_e()},handleUploadImg(n){$.post(A.userinfo,{upload_avatar:!0,file:n.file}).then(a=>{a.data.code===200?(this.user.avatar=a.data.data.avatar,D({message:"上传成功",type:"success"})):D.error(a.data.data)})},ChangeScreen(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}}},T=n=>(oe("data-v-1284dff3"),n=n(),se(),n),he={class:"user-profile"},fe=T(()=>c("span",null,"用户名：",-1)),pe=T(()=>c("span",null,"用户手机：",-1)),ge=T(()=>c("span",null,"用户邮箱：",-1)),Ce={class:"dialog-footer"},ve={class:"left-header"},ke={class:"right-header"},ye={class:"full-screen"},xe={class:"dark-switch"},be={key:0,class:"user-info"},we={class:"user-avater"};function Ie(n,a,p,y,r,d){const m=s("el-avatar"),C=s("el-upload"),i=s("el-col"),v=s("el-row"),l=s("el-button"),u=s("el-dialog"),I=s("Menu"),H=s("el-icon"),O=s("el-breadcrumb-item"),j=s("el-breadcrumb"),U=s("FullScreen"),F=s("el-switch"),V=s("el-dropdown-item"),E=s("el-dropdown-menu"),G=s("el-dropdown");return o(),h(g,null,[t(u,{modelValue:r.profiledialogVisible,"onUpdate:modelValue":a[1]||(a[1]=x=>r.profiledialogVisible=x),width:"30%","before-close":n.handleClose},{footer:e(()=>[c("span",Ce,[t(l,{type:"primary",onClick:a[0]||(a[0]=x=>r.profiledialogVisible=!1)},{default:e(()=>[b(" 确 认 ")]),_:1})])]),default:e(()=>[c("div",he,[t(v,{justify:"center"},{default:e(()=>[t(i,{span:8,style:{"text-align":"center"}},{default:e(()=>[t(C,{"http-request":d.handleUploadImg,"show-file-list":!1},{default:e(()=>[t(m,{src:r.user.avatar,size:"large"},null,8,["src"])]),_:1},8,["http-request"])]),_:1})]),_:1}),t(v,{justify:"center"},{default:e(()=>[t(i,{span:8,style:{"text-align":"center"}},{default:e(()=>[fe,c("span",null,f(r.user.username),1)]),_:1})]),_:1}),t(v,{justify:"center"},{default:e(()=>[t(i,{span:8,style:{"text-align":"center"}},{default:e(()=>[pe,c("span",null,f(r.user.phone),1)]),_:1})]),_:1}),t(v,{justify:"center"},{default:e(()=>[t(i,{span:8,style:{"text-align":"center"}},{default:e(()=>[ge,c("span",null,f(r.user.email),1)]),_:1})]),_:1})])]),_:1},8,["modelValue","before-close"]),c("div",ve,[t(H,{onClick:d.handleAside},{default:e(()=>[t(I)]),_:1},8,["onClick"]),t(j,{separator:"/"},{default:e(()=>[(o(!0),h(g,null,k(d.HeaderLink,x=>(o(),_(O,{to:{path:x.url}},{default:e(()=>[b(f(x.name),1)]),_:2},1032,["to"]))),256))]),_:1})]),c("div",ke,[c("div",ye,[t(H,null,{default:e(()=>[t(l,{link:"",onClick:d.ChangeScreen},{default:e(()=>[t(U)]),_:1},8,["onClick"])]),_:1})]),c("div",xe,[t(F,{modelValue:r.lightSwitch,"onUpdate:modelValue":a[2]||(a[2]=x=>r.lightSwitch=x),onChange:d.handleSwitch,style:{"--el-switch-on-color":"rgb(0, 0, 0)"},"active-action-icon":n.sunny,"inactive-action-icon":n.moon},null,8,["modelValue","onChange","active-action-icon","inactive-action-icon"])]),r.user!==void 0?(o(),h("div",be,[c("span",we,[t(G,null,{dropdown:e(()=>[t(E,null,{default:e(()=>[t(V,{onClick:a[3]||(a[3]=x=>r.profiledialogVisible=!0)},{default:e(()=>[b("个人中心")]),_:1}),t(V,{onClick:d.handleLogout},{default:e(()=>[b("退 出")]),_:1},8,["onClick"])]),_:1})]),default:e(()=>[t(m,{src:r.user.avatar},null,8,["src"])]),_:1})]),c("span",null,f(r.user.username),1)])):L("",!0)])],64)}const He=S(me,[["render",Ie],["__scopeId","data-v-1284dff3"]]);const Le={computed:{HeaderList(){let n=this.$store.state.HeaderList;return n.forEach(a=>{this.$route.path===a.url?a.color="success":a.color="info"}),n},IndexObj(){return this.$store.state.IndexObject}},methods:{OnClick(n){this.$store.commit("ChangeHeaderList",{name:n.name,url:n.url}),this.$router.push(n.url)},OnClose(n){let a=-1;for(let y=0;y<this.HeaderList.length;y++){const r=this.HeaderList[y];if(r.name===n.name&&r.url===n.url){a=y;break}}let p={};a<this.HeaderList.length-1&&(this.$router.push(this.HeaderList[a+1].url),p.name=this.HeaderList[a+1].name,p.url=this.HeaderList[a+1].url),a===this.HeaderList.length-1&&this.HeaderList.length>1&&(this.$router.push(this.HeaderList[a-1].url),p.name=this.HeaderList[a-1].name,p.url=this.HeaderList[a-1].url),a===0&&this.HeaderList.length===1&&(this.$router.push({name:"index"}),p.name=this.IndexObj.name,p.url=this.IndexObj.url),this.$store.commit("ChangeHeaderLink",p),this.$store.commit("RemoveHeaderList",a)}}},De={class:"header"};function Se(n,a,p,y,r,d){const m=s("el-button"),C=s("el-tag");return o(),h("div",De,[(o(!0),h(g,null,k(d.HeaderList,i=>(o(),_(C,{key:i.name,class:"mx-1",size:"large",closable:"",type:i.color,onClick:v=>d.OnClick(i),onClose:v=>d.OnClose(i)},{default:e(()=>[t(m,{key:"plain",type:"",link:""},{default:e(()=>[b(f(i.name),1)]),_:2},1024)]),_:2},1032,["type","onClick","onClose"]))),128))])}const $e=S(Le,[["render",Se],["__scopeId","data-v-296829ee"]]);const Ae={components:{CommonAside:ce,CommonHeader:He,CommonAsideCard:$e}},Te={class:"common-layout"};function Ve(n,a,p,y,r,d){const m=s("CommonAside"),C=s("el-aside"),i=s("CommonHeader"),v=s("el-header"),l=s("CommonAsideCard"),u=s("router-view"),I=s("el-main"),H=s("el-container");return o(),h("div",Te,[t(H,null,{default:e(()=>[t(C,{width:"auto"},{default:e(()=>[t(m)]),_:1}),t(H,null,{default:e(()=>[t(v,null,{default:e(()=>[t(i)]),_:1}),c("div",null,[t(l)]),t(I,null,{default:e(()=>[t(u)]),_:1})]),_:1})]),_:1})])}const Oe=S(Ae,[["render",Ve],["__scopeId","data-v-72bd50d9"]]);export{Oe as default};
