import{_ as p,A as i,S as a,u as m,E as c,r as u,o as f,c as V,a as r,b as n,w as g,d as y}from"./index-b85cf3e9.js";const h={data(){return{username:"",password:"",verify_code:"",code_token:"",code:""}},created(){this.GetVerifyCode()},components(){},methods:{GetVerifyCode:function(){i.get(a.verifycode).then(({data:e})=>{e.code===200&&(this.code=`data:image/png;base64,${e.data.code}`,this.code_token=e.data.code_token)})},LoginHandler:function(){i.post(a.userlogin,{"sign-in":!0,code_token:this.code_token,code:this.verify_code,username:this.username,password:this.password}).then(({data:e})=>{e.code===200?(m.SetUserToken(e.data),c({message:"登录成功，正在跳转首页，请稍后...",type:"success"}),this.$router.push({name:"index"})):(c.error(e.data),e.data==="验证码过期"&&this.GetVerifyCode())})}}},v={class:"login"},k={class:"login-box"},C={class:"verify-code-class"},w=["src"];function x(e,o,b,G,s,d){const l=u("el-input"),_=u("el-button");return f(),V("div",v,[r("div",k,[n(l,{modelValue:s.username,"onUpdate:modelValue":o[0]||(o[0]=t=>s.username=t),placeholder:"输入用户名"},null,8,["modelValue"]),n(l,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=t=>s.password=t),type:"password",placeholder:"输入密码"},null,8,["modelValue"]),r("div",C,[n(l,{modelValue:s.verify_code,"onUpdate:modelValue":o[2]||(o[2]=t=>s.verify_code=t),placeholder:"验证码"},null,8,["modelValue"]),r("img",{src:s.code,alt:"图片验证码",onClick:o[3]||(o[3]=(...t)=>d.GetVerifyCode&&d.GetVerifyCode(...t))},null,8,w)]),n(_,{onClick:d.LoginHandler},{default:g(()=>[y("登 录")]),_:1},8,["onClick"])])])}const U=p(h,[["render",x],["__scopeId","data-v-d7933386"]]);export{U as default};
