import{_ as m,A as n,S as o,r,o as c,c as p,b as s,w as i,a as T,v as f,F as C,s as x,d as P,x as v}from"./index-b85cf3e9.js";import{P as G,a as y}from"./pageUtils-acf5de9e.js";const D={data(){return{TableColumn:void 0,TableData:void 0,TablePage:0,currentPage:1}},computed:{table(){return this.$route.params.tablename},TableColumnKey(){return Object.keys(this.TableColumn)}},watch:{table(e,l){this.GetTableColumn(),this.GetTableSize(),this.GetTable()}},created(){this.GetTableColumn(),this.GetTableSize(),this.GetTable()},methods:{GetTableColumn(){n.get(o.part_api_prefix+this.table,{get_table_column:!0}).then(({data:e})=>{e.code===200&&(this.TableColumn=e.data,console.log(this.TableColumn))})},GetTable(){n.get(o.part_api_prefix+this.table,{_page:this.currentPage,_page_size:G}).then(({data:e})=>{e.code===200&&(this.TableData=e.data,console.log(this.TableData))})},GetTableSize(){n.get(o.part_api_prefix+this.table,{get_count:!0}).then(({data:e})=>{this.TablePage=y(e.data)})},handleTableDelete(e,l){n.delete(o.part_api_prefix+this.table,{id:l.id}).then(({data:b})=>{b.code===200?this.TableData.splice(e,1):ElMessage.error("删除任务失败")})}}},k={key:0,class:"table-data"},z={class:"page"};function S(e,l,b,w,a,u){const _=r("el-table-column"),d=r("el-button"),g=r("el-table"),h=r("el-pagination");return a.TableColumn!==void 0?(c(),p("div",k,[s(g,{data:a.TableData,style:{width:"100%"}},{default:i(()=>[(c(!0),p(C,null,x(u.TableColumnKey,t=>(c(),v(_,{label:a.TableColumn[t],prop:t},null,8,["label","prop"]))),256)),s(_,{align:"right"},{header:i(()=>[]),default:i(t=>[s(d,{size:"small",type:"danger",onClick:B=>u.handleTableDelete(t.$index,t.row)},{default:i(()=>[P("删 除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),T("div",z,[s(h,{background:"",layout:"prev, pager, next","page-count":a.TablePage,"hide-on-single-page":"true","current-page":a.currentPage,"onUpdate:currentPage":l[0]||(l[0]=t=>a.currentPage=t),onCurrentChange:u.GetTable},null,8,["page-count","current-page","onCurrentChange"])])])):f("",!0)}const A=m(D,[["render",S],["__scopeId","data-v-1768b1fb"]]);export{A as default};
