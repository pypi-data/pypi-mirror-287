import{_ as y,M as C,N as B,A as r,S as c,E as m,r as n,o as V,c as P,b as a,w as o,a as u,F as S,d as p}from"./index-b85cf3e9.js";import{P as v,a as T}from"./pageUtils-acf5de9e.js";const L={components:{ElMessageBox:C,Timer:B},data(){return{dialogVisible:!1,blackList:"",blackContent:"",TablePage:0,currentPage:1,BlackTableData:[]}},created(){this.GetSysBlackList(),this.GetSysBlackListSize()},methods:{GetSysBlackList(){r.get(c.sys_ip_black_list,{_page:this.currentPage,_page_size:v}).then(({data:s})=>{this.BlackTableData=s.data})},GetSysBlackListSize(){r.get(c.sys_ip_black_list,{get_count:!0}).then(({data:s})=>{this.TablePage=T(s.data)})},CreateSysBlack(){this.dialogVisible=!1,r.post(c.sys_ip_black_list,{ip:this.blackList,content:this.blackContent}).then(({data:s})=>{s.code===200?this.BlackTableData.unshift(s.data[0]):m.error(s.msg)})},handleTableDelete(s,e){r.delete(c.sys_ip_black_list,{id:e.id}).then(({data:g})=>{g.code===200?this.BlackTableData.splice(s,1):m.error("删除任务失败")})}}},x={class:"dialog-footer"},w={class:"ips"},D={class:"page"};function z(s,e,g,G,t,d){const b=n("el-input"),i=n("el-button"),k=n("el-dialog"),_=n("el-table-column"),f=n("el-table"),h=n("el-pagination");return V(),P(S,null,[a(k,{modelValue:t.dialogVisible,"onUpdate:modelValue":e[3]||(e[3]=l=>t.dialogVisible=l),title:"添加黑名单",width:"50%",class:"dialog-input"},{footer:o(()=>[u("span",x,[a(i,{onClick:e[2]||(e[2]=l=>t.dialogVisible=!1)},{default:o(()=>[p("取 消")]),_:1}),a(i,{type:"primary",onClick:d.CreateSysBlack},{default:o(()=>[p(" 确 认 ")]),_:1},8,["onClick"])])]),default:o(()=>[a(b,{modelValue:t.blackList,"onUpdate:modelValue":e[0]||(e[0]=l=>t.blackList=l),placeholder:"添加黑名单",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),a(b,{modelValue:t.blackContent,"onUpdate:modelValue":e[1]||(e[1]=l=>t.blackContent=l),placeholder:"添加原因"},null,8,["modelValue"])]),_:1},8,["modelValue"]),u("div",w,[a(f,{data:t.BlackTableData,style:{width:"100%"}},{default:o(()=>[a(_,{prop:"ip",label:"禁用IP","min-width":"100"}),a(_,{prop:"content",label:"禁用理由","min-width":"100","show-overflow-tooltip":"true"}),a(_,{align:"right"},{header:o(()=>[a(i,{type:"primary",plain:"",onClick:e[4]||(e[4]=l=>t.dialogVisible=!0)},{default:o(()=>[p(" 添加黑名单 ")]),_:1})]),default:o(l=>[a(i,{size:"small",type:"danger",onClick:E=>d.handleTableDelete(l.$index,l.row)},{default:o(()=>[p("删 除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),u("div",D,[a(h,{background:"",layout:"prev, pager, next","page-count":t.TablePage,"hide-on-single-page":"true","current-page":t.currentPage,"onUpdate:currentPage":e[5]||(e[5]=l=>t.currentPage=l),onCurrentChange:d.GetSysBlackList},null,8,["page-count","current-page","onCurrentChange"])])])],64)}const U=y(L,[["render",z],["__scopeId","data-v-0931e440"]]);export{U as default};
