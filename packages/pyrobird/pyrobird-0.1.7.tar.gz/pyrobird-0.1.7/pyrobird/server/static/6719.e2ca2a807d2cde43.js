"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[6719],{6719:(E,h,s)=>{s.r(h),s.d(h,{TScatterPainter:()=>M});var g=s(467),_=s(6998),u=s(6823),m=s(5284),c=s(4693),D=s(3277),T=s(4571);class M extends c.TGraphPainter{constructor(e,t){super(e,t),this._need_2dhist=!0,this._not_adjust_hrange=!0}getGraph(){return this.getObject()?.fGraph}getHistRangeMargin(){return this.getObject()?.fMargin??.1}drawAxisHisto(){var e=this;return(0,g.A)(function*(){const t=e.createHistogram();return T.AJ.draw(e.getDom(),t,e.getHistoOpt())})()}getPalette(){const e=this.getGraph();let t=e?.fFunctions?.arr?.find(f=>f._typename===_.clTPaletteAxis);if(t)return t;if(this.options.PadPalette)t=this.getPadPainter()?.findInPrimitives("palette",_.clTPaletteAxis);else if(e){t=(0,_.create)(_.clTPaletteAxis);const f=this.get_main();Object.assign(t,{fX1NDC:f.fX2NDC+.005,fX2NDC:f.fX2NDC+.05,fY1NDC:f.fY1NDC,fY2NDC:f.fY2NDC,fInit:1,$can_move:!0}),Object.assign(t.fAxis,{fChopt:"+",fLineColor:1,fLineSyle:1,fLineWidth:1,fTextAngle:0,fTextAlign:11,fNdiv:510}),e.fFunctions.AddFirst(t,"")}return t}_updateMembers(e,t){e.fBits=t.fBits,e.fTitle=t.fTitle,e.fNpoints=t.fNpoints,e.fColor=t.fColor,e.fSize=t.fSize,e.fMargin=t.fMargin,e.fMinMarkerSize=t.fMinMarkerSize,e.fMaxMarkerSize=t.fMaxMarkerSize,super._updateMembers(e.fGraph,t.fGraph)}drawGraph(){var e=this;return(0,g.A)(function*(){const t=e.get_main(),f=e.getMainPainter(),r=e.getObject();let C=1,d=0;if(!t||!f||!r)return;if(r.fColor){const i=e.getPalette();i&&(i.$main_painter=e);const n=e.getPadPainter();!e._color_palette&&(0,_.isFunc)(n?.getCustomPalette)&&(e._color_palette=n.getCustomPalette()),e._color_palette||(e._color_palette=(0,u.jh)(e.options.Palette,n?.isGrayscale()));let a=r.fColor[0],o=r.fColor[0];for(let l=1;l<r.fColor.length;++l)a=Math.min(a,r.fColor[l]),o=Math.max(o,r.fColor[l]);o<=a&&(o=a<0?.9*a:a>0?1.1*a:1),e.fContour=new D.Z8(a,o),e.fContour.createNormal(30),e.fContour.configIndicies(0,0),t.zmin=a,t.zmax=o}if(r.fSize){let i=r.fSize[0],n=r.fSize[0];for(let a=1;a<r.fSize.length;++a)i=Math.min(i,r.fSize[a]),n=Math.max(n,r.fSize[a]);n<=i&&(n=i>0?.9*i:i>0?1.1*i:1),C=(r.fMaxMarkerSize-r.fMinMarkerSize)/(n-i),d=i}e.createG(!t.pad_layer);const P=t.getGrFuncs();for(let i=0;i<e.bins.length;++i){const n=e.bins[i],a=P.grx(n.x),o=P.gry(n.y),l=r.fSize?r.fMinMarkerSize+C*(r.fSize[i]-d):r.fMarkerSize,z=r.fColor?e.fContour.getPaletteColor(e._color_palette,r.fColor[i]):e.getColor(r.fMarkerColor),p=new m.e({color:z,size:l,style:r.fMarkerStyle});e.draw_g.append("svg:path").attr("d",p.create(a,o)).call(p.func)}return e})()}static draw(e,t,f){return(0,g.A)(function*(){return c.TGraphPainter._drawGraph(new M(e,t),f)})()}}}}]);