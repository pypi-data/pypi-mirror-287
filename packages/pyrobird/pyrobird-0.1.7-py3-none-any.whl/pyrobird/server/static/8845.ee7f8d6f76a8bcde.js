"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[8845],{8845:(y,d,_)=>{_.r(d),_.d(d,{TGaxisPainter:()=>o});var P=_(467),E=_(6998),v=_(5680),m=_(9041),l=_(4468),T=_(9025),M=_(6714),O=_(6370),X=_(230);class o extends l.TB{convertTo(s){const t=this.getObject(),h=this.axisToSvg("x",t.fX1),e=this.axisToSvg("y",t.fY1),i=this.axisToSvg("x",t.fX2),r=this.axisToSvg("y",t.fY2);if("ndc"===s){const n=this.getPadPainter().getPadWidth(),a=this.getPadPainter().getPadHeight();t.fX1=h/n,t.fX2=i/n,t.fY1=(a-e)/a,t.fY2=(a-r)/a,this.use_ndc=!0}else if("frame"===s){const n=this.getFramePainter().getFrameRect();t.fX1=(h-n.x)/n.width,t.fX2=(i-n.x)/n.width,t.fY1=(e-n.y)/n.height,t.fY2=(r-n.y)/n.height,this.bind_frame=!0}}moveDrag(s,t){this.gaxis_x+=s,this.gaxis_y+=t,(0,m.bk)(this.getG(),this.gaxis_x,this.gaxis_y)}moveEnd(s){if(s)return;const t=this.getObject();let h,e;if(this.bind_frame){const i=this.getFramePainter().getFrameRect();h=(this.gaxis_x-i.x)/i.width,e=(this.gaxis_y-i.y)/i.height}else h=this.svgToAxis("x",this.gaxis_x,this.use_ndc),e=this.svgToAxis("y",this.gaxis_y,this.use_ndc);this.vertical?(t.fX1=t.fX2=h,this.reverse?(t.fY2=e+(t.fY2-t.fY1),t.fY1=e):(t.fY1=e+(t.fY1-t.fY2),t.fY2=e)):(this.reverse?(t.fX1=h+(t.fX1-t.fX2),t.fX2=h):(t.fX2=h+(t.fX2-t.fX1),t.fX1=h),t.fY1=t.fY2=e),this.submitAxisExec(`SetX1(${t.fX1});;SetX2(${t.fX2});;SetY1(${t.fY1});;SetY2(${t.fY2})`,!0)}redraw(){const s=this.getObject(),t=s.fWmin,h=s.fWmax;let e,i,r,n;if(this.bind_frame){const f=this.getFramePainter().getFrameRect();e=Math.round(f.x+s.fX1*f.width),r=Math.round(f.x+s.fX2*f.width),i=Math.round(f.y+s.fY1*f.height),n=Math.round(f.y+s.fY2*f.height)}else e=this.axisToSvg("x",s.fX1,this.use_ndc),i=this.axisToSvg("y",s.fY1,this.use_ndc),r=this.axisToSvg("x",s.fX2,this.use_ndc),n=this.axisToSvg("y",s.fY2,this.use_ndc);const a=r-e,c=i-n,x=Math.abs(a)<Math.abs(c);let g=x?c:a,u=!1;return g<0&&(u=!0,g=-g,x?n=i:e=r),this.configureAxis(x?"yaxis":"xaxis",t,h,t,h,x,[0,g],{time_scale:s.fChopt.indexOf("t")>=0,log:s.fChopt.indexOf("G")>=0?1:0,reverse:u,swap_side:u,axis_func:this.axis_func}),this.createG(),this.gaxis_x=e,this.gaxis_y=n,this.drawAxis(this.getG(),Math.abs(a),Math.abs(c),(0,m.bk)(this.gaxis_x,this.gaxis_y)||"").then(()=>((0,M.X2)(this),(0,O.wh)(this),this))}fillContextMenu(s){s.addTAxisMenu(l.rb,this,this.getObject(),"")}checkFuncion(){const s=this.getObject();this.axis_func=s.fFunctionName?this.getPadPainter()?.findInPrimitives(s.fFunctionName,E.clTF1):null,this.axis_func&&(0,X.proivdeEvalPar)(this.axis_func)}createFuncHandle(s,t,h,e){const i=function(a){return i.toGraph(a)};i._func=s,i._domain=[h,e],i._scale=t?(0,v.ZE)().base(t):(0,v.m4)(),i._scale.domain(i._domain).range([0,100]),i.eval=function(a){try{a=i._func.evalPar(a)}catch{a=0}return Number.isFinite(a)?a:0};const r=i.eval(h),n=i.eval(e);return r<n==h<e?(i._vmin=r,i._vk=1/(n-r)):r===n?(i._vmin=0,i._vk=1):(i._vmin=n,i._vk=1/(r-n)),i._range=[0,100],i.range=function(a){return a?(i._range=a,i):i._range},i.domain=function(){return i._domain},i.toGraph=function(a){const c=(i.eval(a)-i._vmin)*i._vk;return i._range[0]*(1-c)+i._range[1]*c},i.ticks=function(a){return i._scale.ticks(a)},i}static draw(s,t,h){return(0,P.A)(function*(){const e=new o(s,t,!1);return(0,T.ensureTCanvas)(e,!1).then(()=>(h&&e.convertTo(h),e.checkFuncion(),e.redraw()))})()}}}}]);