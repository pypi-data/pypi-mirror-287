"use strict";(self.webpackChunk_datalayer_core=self.webpackChunk_datalayer_core||[]).push([[9157],{34160:(e,t,n)=>{n.d(t,{m:()=>a});var a,i=n(92279),s=n(71204);!function(e){e.getBoolean=function(e){return(0,s.vC)({...e,body:new r(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getNumber=function(e){return(0,s.vC)({...e,body:new l(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getItem=function(e){return(0,s.vC)({...e,body:new h(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})],focusNodeSelector:e.editable?"input":"select"})},e.getMultipleItems=function(e){return(0,s.vC)({...e,body:new u(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})]})},e.getText=function(e){return(0,s.vC)({...e,body:new c(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getPassword=function(e){return(0,s.vC)({...e,body:new d(e),buttons:[s.Vq.cancelButton({label:e.cancelLabel}),s.Vq.okButton({label:e.okLabel})],focusNodeSelector:"input"})}}(a||(a={}));class o extends i.$L{constructor(e){if(super(),this.addClass("jp-Input-Dialog"),this._input=document.createElement("input"),this._input.classList.add("jp-mod-styled"),this._input.id="jp-dialog-input-id",void 0!==e){const t=document.createElement("label");t.textContent=e,t.htmlFor=this._input.id,this.node.appendChild(t)}this.node.appendChild(this._input)}}class r extends o{constructor(e){super(e.label),this.addClass("jp-Input-Boolean-Dialog"),this._input.type="checkbox",this._input.checked=!!e.value}getValue(){return this._input.checked}}class l extends o{constructor(e){super(e.label),this._input.type="number",this._input.value=e.value?e.value.toString():"0"}getValue(){return this._input.value?Number(this._input.value):Number.NaN}}class c extends o{constructor(e){var t;super(e.label),this._input.type="text",this._input.value=e.text?e.text:"",e.placeholder&&(this._input.placeholder=e.placeholder),this._initialSelectionRange=Math.min(this._input.value.length,Math.max(0,null!==(t=e.selectionRange)&&void 0!==t?t:this._input.value.length))}onAfterAttach(e){super.onAfterAttach(e),this._initialSelectionRange>0&&this._input.value&&this._input.setSelectionRange(0,this._initialSelectionRange)}getValue(){return this._input.value}}class d extends o{constructor(e){super(e.label),this._input.type="password",this._input.value=e.text?e.text:"",e.placeholder&&(this._input.placeholder=e.placeholder)}onAfterAttach(e){super.onAfterAttach(e),this._input.value&&this._input.select()}getValue(){return this._input.value}}class h extends o{constructor(e){super(e.label),this._editable=e.editable||!1;let t,n=e.current||0;if("number"==typeof n&&(t=Math.max(0,Math.min(n,e.items.length-1)),n=""),this._list=document.createElement("select"),e.items.forEach(((e,a)=>{const i=document.createElement("option");a===t&&(i.selected=!0,n=e),i.value=e,i.textContent=e,this._list.appendChild(i)})),e.editable){const t=document.createElement("datalist");t.id="input-dialog-items",t.appendChild(this._list),this._input.type="list",this._input.value=n,this._input.setAttribute("list",t.id),e.placeholder&&(this._input.placeholder=e.placeholder),this.node.appendChild(t)}else this._input.remove(),this.node.appendChild(this._list)}getValue(){return this._editable?this._input.value:this._list.value}}class u extends o{constructor(e){super(e.label);let t=e.defaults||[];this._list=document.createElement("select"),this._list.setAttribute("multiple",""),e.items.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,this._list.appendChild(t)})),this._input.remove(),this.node.appendChild(this._list);const n=this._list.options;for(let e=0;e<n.length;e++){const a=n[e];t.includes(a.value)?a.selected=!0:a.selected=!1}}getValue(){let e=[];for(let t of this._list.options)t.selected&&!t.classList.contains("hidden")&&e.push(t.value||t.text);return e}}},89157:(e,t,n)=>{n.r(t),n.d(t,{ToolbarItems:()=>ee,default:()=>Z,downloadPlugin:()=>X,openBrowserTabPlugin:()=>Y,pathStatusPlugin:()=>G,savingStatusPlugin:()=>Q});var a,i=n(27990),s=n(43838),o=n(83243),r=n(2245),l=n(99190),c=n(71204),d=n(30790),h=n(55616),u=n(53950),_=n(34160),p=n(48425),m=n(58722),g=n(74642),v=n(81631),f=n(18168),w=n(47963),y=n(16781),C=n(98209),b=n(92279);class x{constructor(e){var t,n;this._isReady=!1,this._isDisposed=!1,this._isPopulated=!1,this._path="",this._lineEnding=null,this._contentsModel=null,this._populatedPromise=new w.PromiseDelegate,this._pathChanged=new C.Signal(this),this._fileChanged=new C.Signal(this),this._saveState=new C.Signal(this),this._disposed=new C.Signal(this),this._lastModifiedCheckMargin=500,this._conflictModalIsOpen=!1;const i=this._manager=e.manager;this.translator=e.translator||f.Sr,this._trans=this.translator.load("jupyterlab"),this._factory=e.factory,this._dialogs=null!==(t=e.sessionDialogs)&&void 0!==t?t:new l.H({translator:e.translator}),this._opener=e.opener||a.noOp,this._path=this._manager.contents.normalize(e.path),this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const s=this._manager.contents.localPath(this._path),o=this._factory.preferredLanguage(p.PathExt.basename(s)),r=this._manager.contents.getSharedModelFactory(this._path),c=null==r?void 0:r.createNew({path:s,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:o,sharedModel:c,collaborationEnabled:null!==(n=null==r?void 0:r.collaborative)&&void 0!==n&&n}),this._readyPromise=i.ready.then((()=>this._populatedPromise.promise));const d=p.PathExt.extname(this._path);this.sessionContext=new l.B({sessionManager:i.sessions,specsManager:i.kernelspecs,path:s,type:".ipynb"===d?"notebook":"file",name:p.PathExt.basename(s),kernelPreference:e.kernelPreference||{shouldStart:!1},setBusy:e.setBusy}),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),i.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new v.D.UrlResolver({path:this._path,contents:i.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),C.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){var e;return!(!(null===(e=this._contentsModel)||void 0===e?void 0:e.writable)||this._model.collaborative)}async initialize(e){e?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path),t=await a.getSavePath(e);if(this.isDisposed||!t)return;const n=this._manager.contents.driveName(this.path),i=""==n?t:`${n}:${t}`;if(i===this._path)return this.save();try{await this._manager.ready,await this._manager.contents.get(i),await this._maybeOverWrite(i)}catch(e){if(!e.response||404!==e.response.status)throw e;await this._finishSaveAs(i)}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path),t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents,n=this._path;return this._manager.ready.then((()=>e?t.restoreCheckpoint(n,e):this.listCheckpoints().then((a=>{if(!this.isDisposed&&a.length)return e=a[a.length-1].id,t.restoreCheckpoint(n,e)}))))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const n=this._opener;return n&&n(e,t),new y.DisposableDelegate((()=>{e.close()}))}_onFileChanged(e,t){var n;if("rename"!==t.type)return;let a=t.oldValue&&t.oldValue.path,i=t.newValue&&t.newValue.path;if(i&&0===this._path.indexOf(a||"")){let e=t.newValue;a!==this._path&&(i=this._path.replace(new RegExp(`^${a}/`),`${i}/`),a=this._path,e={last_modified:null===(n=t.newValue)||void 0===n?void 0:n.created,path:i}),this._updateContentsModel({...this._contentsModel,...e}),this._updatePath(i)}}_onSessionChanged(e,t){if("path"!==t)return;const n=this._manager.contents.driveName(this.path);let a=this.sessionContext.session.path;n&&(a=`${n}:${a}`),this._updatePath(a)}_updateContentsModel(e){var t,n,a,i;const s=e.writable&&!this._model.collaborative,o={path:e.path,name:e.name,type:e.type,writable:s,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format,hash:e.hash,hash_algorithm:e.hash_algorithm},r=null!==(n=null===(t=this._contentsModel)||void 0===t?void 0:t.last_modified)&&void 0!==n?n:null,l=null!==(i=null===(a=this._contentsModel)||void 0===a?void 0:a.hash)&&void 0!==i?i:null;this._contentsModel=o,(!r&&!l||!l&&o.last_modified!==r||l&&o.hash!==l)&&this._fileChanged.emit(o)}_updatePath(e){var t,n,a,i;if(this._path===e)return;this._path=e;const s=this._manager.contents.localPath(e),o=p.PathExt.basename(s);if((null===(t=this.sessionContext.session)||void 0===t?void 0:t.path)!==s&&(null===(n=this.sessionContext.session)||void 0===n||n.setPath(s)),(null===(a=this.sessionContext.session)||void 0===a?void 0:a.name)!==o&&(null===(i=this.sessionContext.session)||void 0===i||i.setName(o)),this.urlResolver.path!==e&&(this.urlResolver.path=e),this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==o)){const t={...this._contentsModel,name:o,path:e};this._updateContentsModel(t)}this._pathChanged.emit(e)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then((e=>{e&&this._dialogs.selectKernel(this.sessionContext)}))}async _rename(e){const t=this.localPath.split("/");t[t.length-1]=e;let n=p.PathExt.join(...t);const a=this._manager.contents.driveName(this.path);a&&(n=`${a}:${n}`),await this._manager.contents.rename(this.path,n)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{await this._manager.ready;const t=await this._maybeSave(e);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(t),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(e){const{name:t}=e;if("ModalCancelError"===t||"ModalDuplicateError"===t)throw e;const n=this._manager.contents.localPath(this._path),a=p.PathExt.basename(n);throw this._handleError(e,this._trans.__("File Save Error for %1",a)),this._saveState.emit("failed"),e}}_revert(e=!1){const t={type:this._factory.contentType,content:null!==this._factory.fileFormat,hash:null!==this._factory.fileFormat,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{}},n=this._path,a=this._model;return this._manager.ready.then((()=>this._manager.contents.get(n,t))).then((e=>{if(!this.isDisposed){if(e.content)if("json"===e.format)a.fromJSON(e.content);else{let t=e.content;-1!==t.indexOf("\r\n")?(this._lineEnding="\r\n",t=t.replace(/\r\n/g,"\n")):-1!==t.indexOf("\r")?(this._lineEnding="\r",t=t.replace(/\r/g,"\n")):this._lineEnding=null,a.fromString(t)}return this._updateContentsModel(e),a.dirty=!1,this._isPopulated?void 0:this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path),n=p.PathExt.basename(t);throw this._handleError(e,this._trans.__("File Load Error for %1",n)),e}))}_maybeSave(e){const t=this._path;return this._manager.contents.get(t,{content:!1,hash:!0}).then((n=>{var a,i,s,o;if(this.isDisposed)return Promise.reject(new Error("Disposed"));const r=void 0!==(null===(a=this.contentsModel)||void 0===a?void 0:a.hash)&&null!==(null===(i=this.contentsModel)||void 0===i?void 0:i.hash)&&void 0!==n.hash&&null!==n.hash,l=null===(s=this.contentsModel)||void 0===s?void 0:s.hash,c=n.hash;if(r&&l!==c)return console.warn(`Different hash found for ${this.path}`),this._raiseConflict(n,e);const d=this._lastModifiedCheckMargin,h=null===(o=this.contentsModel)||void 0===o?void 0:o.last_modified,u=h?new Date(h):new Date,_=new Date(n.last_modified);return!r&&h&&_.getTime()-u.getTime()>d?(console.warn(`Last saving performed ${u} while the current file seems to have been saved ${_}`),this._raiseConflict(n,e)):this._manager.contents.save(t,e).then((async e=>{const n=await this._manager.contents.get(t,{content:!1,hash:!0});return{...e,hash:n.hash,hash_algorithm:n.hash_algorithm}}))}),(n=>{if(n.response&&404===n.response.status)return this._manager.contents.save(t,e).then((async e=>{const n=await this._manager.contents.get(t,{content:!1,hash:!0});return{...e,hash:n.hash,hash_algorithm:n.hash_algorithm}}));throw n}))}async _handleError(e,t){await(0,c.UW)(t,e)}_maybeCheckpoint(e){let t=Promise.resolve(void 0);return this.canSave?(t=e?this.createCheckpoint().then():this.listCheckpoints().then((e=>{if(!this.isDisposed&&!e.length&&this.canSave)return this.createCheckpoint().then()})),t.catch((e=>{if(!e.response||403!==e.response.status)throw e}))):t}_raiseConflict(e,t){if(this._conflictModalIsOpen){const e=new Error("Modal is already displayed");return e.name="ModalDuplicateError",Promise.reject(e)}const n=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),a=c.Vq.okButton({label:this._trans.__("Revert"),actions:["revert"]}),i=c.Vq.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._conflictModalIsOpen=!0,(0,c.vC)({title:this._trans.__("File Changed"),body:n,buttons:[c.Vq.cancelButton(),a,i]}).then((n=>{if(this._conflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(n.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,t);if(n.button.actions.includes("revert"))return this.revert().then((()=>e));const a=new Error("Cancel");return a.name="ModalCancelError",Promise.reject(a)}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e),n=c.Vq.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,c.vC)({title:this._trans.__("File Overwrite?"),body:t,buttons:[c.Vq.cancelButton(),n]}).then((t=>this.isDisposed?Promise.reject(new Error("Disposed")):t.button.accept?this._manager.contents.delete(e).then((()=>this._finishSaveAs(e))):void 0))}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(e){if("Cancel"===e.message||"Modal is already displayed"===e.message)throw e;const t=this._manager.contents.localPath(this._path),n=p.PathExt.basename(t);return this._handleError(e,this._trans.__("File Save Error for %1",n)),void this._saveState.emit("failed")}}_createSaveOptions(){let e=null;return"json"===this._factory.fileFormat?e=this._model.toJSON():(e=this._model.toString(),this._lineEnding&&(e=e.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}}!function(e){e.getSavePath=function(e,n){const a=(n=n||f.Sr).load("jupyterlab"),i=c.Vq.okButton({label:a.__("Save"),accept:!0});return(0,c.vC)({title:a.__("Save File As…"),body:new t(e),buttons:[c.Vq.cancelButton(),i]}).then((e=>{var t;if(e.button.accept)return null!==(t=e.value)&&void 0!==t?t:void 0}))},e.noOp=function(){};class t extends b.$L{constructor(e){super({node:n(e)})}getValue(){return this.node.value}}function n(e){const t=document.createElement("input");return t.value=e,t}}(a||(a={}));var S,M=n(46931),k=n(41835),F=n(70711),E=n(8284);class P{constructor(e){var t;this._activateRequested=new C.Signal(this),this._contexts=[],this._isDisposed=!1,this._autosave=!0,this._autosaveInterval=120,this._lastModifiedCheckMargin=500,this._renameUntitledFileOnSave=!0,this._stateChanged=new C.Signal(this),this.translator=e.translator||f.Sr,this.registry=e.registry,this.services=e.manager,this._dialogs=null!==(t=e.sessionDialogs)&&void 0!==t?t:new l.H({translator:e.translator}),this._isConnectedCallback=e.isConnectedCallback||(()=>!0),this._opener=e.opener,this._when=e.when||e.manager.ready;const n=new E.K({registry:this.registry,translator:this.translator});n.activateRequested.connect(this._onActivateRequested,this),n.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=n,this._setBusy=e.setBusy}get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e,this._contexts.forEach((t=>{const n=S.saveHandlerProperty.get(t);n&&(!0!==e||n.isActive?!1===e&&n.isActive&&n.stop():n.start())})),this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e,this._contexts.forEach((t=>{const n=S.saveHandlerProperty.get(t);n&&(n.saveInterval=e||120)})),this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e,this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e})),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,C.Signal.clearData(this),this._contexts.forEach((e=>this._widgetManager.closeWidgets(e))),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>{}))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>{}))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>(this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e))),Promise.resolve(void 0))))}duplicate(e){const t=p.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const n=p.PathExt.normalize(e);let a=[t];if("default"===t){const e=this.registry.defaultWidgetFactory(n);if(!e)return;a=[e.name]}else null===t&&(a=this.registry.preferredWidgetFactories(n).map((e=>e.name)));for(const e of this._contextsForPath(n))for(const t of a)if(null!==t){const n=this._widgetManager.findWidget(e,t);if(n)return n}}newUntitled(e){return"file"===e.type&&(e.ext=e.ext||".txt"),this.services.contents.newUntitled(e)}open(e,t="default",n,a){return this._createOrOpenDocument("open",e,t,n,a)}openOrReveal(e,t="default",n,a){const i=this.findWidget(e,t);return i?(this._opener.open(i,{type:t,...a}),i):this.open(e,t,n,null!=a?a:{})}overwrite(e,t){const n=`${t}.${w.UUID.uuid4()}`,a=()=>this.rename(n,t);return this.rename(e,n).then((()=>this.deleteFile(t))).then(a,a)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,M.sE)(this._contexts,(e=>e.path===n&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,n){const a=new x({opener:(e,t)=>{this._widgetManager.adoptWidget(a,e),this._opener.open(e,t)},manager:this.services,factory:t,path:e,kernelPreference:n,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator}),i=new F.W({context:a,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return S.saveHandlerProperty.set(a,i),a.ready.then((()=>{this.autosave&&i.start()})),a.disposed.connect(this._onContextDisposed,this),this._contexts.push(a),a}_onContextDisposed(e){M.RO.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if("default"===t){const a=n.defaultWidgetFactory(e);if(!a)return;t=a.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",a,i){const s=this._widgetFactoryFor(t,n);if(!s)return;const o=s.modelName||"text",r=this.registry.getModelFactory(o);if(!r)return;const l=this.registry.getKernelPreference(t,s.name,a);let c,d=Promise.resolve(void 0);if("open"===e)c=this._findContext(t,r.name)||null,c||(c=this._createContext(t,r,l),d=this._when.then((()=>c.initialize(!1))));else{if("create"!==e)throw new Error(`Invalid argument 'which': ${e}`);c=this._createContext(t,r,l),d=this._when.then((()=>c.initialize(!0)))}const h=this._widgetManager.createWidget(s,c);return this._opener.open(h,{type:s.name,...i}),d.catch((e=>{console.error(`Failed to initialize the context with '${r.name}' for ${t}`,e),h.close()})),h}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){"confirmClosingDocument"===t.name&&this._stateChanged.emit(t)}}!function(e){e.saveHandlerProperty=new k.AttachedProperty({name:"saveHandler",create:()=>{}})}(S||(S={}));var D=n(68471),W=n(56769);function V(e){return W.createElement(D.Jy,{source:e.fileStatus})}class B extends h.UB{constructor(e){super(new B.Model(e.docManager));const t=(e.translator||f.Sr).load("jupyterlab");this._statusMap={completed:t.__("Saving completed"),started:t.__("Saving started"),failed:t.__("Saving failed")}}render(){return null===this.model||null===this.model.status?null:W.createElement(V,{fileStatus:this._statusMap[this.model.status]})}}function A(e){return W.createElement(D.Jy,{source:e.name,title:e.fullPath})}!function(e){class t extends h.I_{constructor(e){super(),this._onStatusChange=(e,t)=>{this._status=t,"completed"===this._status?(setTimeout((()=>{this._status=null,this.stateChanged.emit(void 0)}),2e3),this.stateChanged.emit(void 0)):this.stateChanged.emit(void 0)},this._status=null,this._widget=null,this._status=null,this.widget=null,this._docManager=e}get status(){return this._status}get widget(){return this._widget}set widget(e){var t,n;const a=this._widget;if(null!==a){const e=this._docManager.contextForWidget(a);e?e.saveState.disconnect(this._onStatusChange):(null===(t=this._widget.content)||void 0===t?void 0:t.saveStateChanged)&&this._widget.content.saveStateChanged.disconnect(this._onStatusChange)}if(this._widget=e,null===this._widget)this._status=null;else{const e=this._docManager.contextForWidget(this._widget);e?e.saveState.connect(this._onStatusChange):(null===(n=this._widget.content)||void 0===n?void 0:n.saveStateChanged)&&this._widget.content.saveStateChanged.connect(this._onStatusChange)}}}e.Model=t}(B||(B={}));class R extends h.UB{constructor(e){super(new R.Model(e.docManager)),this.node.title=this.model.path}render(){return W.createElement(A,{fullPath:this.model.path,name:this.model.name})}}!function(e){class t extends h.I_{constructor(e){super(),this._onTitleChange=e=>{const t=this._getAllState();this._name=e.label,this._triggerChange(t,this._getAllState())},this._onPathChange=(e,t)=>{const n=this._getAllState();this._path=t,this._name=p.PathExt.basename(t),this._triggerChange(n,this._getAllState())},this._path="",this._name="",this._widget=null,this._docManager=e}get path(){return this._path}get name(){return this._name}get widget(){return this._widget}set widget(e){const t=this._widget;if(null!==t){const e=this._docManager.contextForWidget(t);e?e.pathChanged.disconnect(this._onPathChange):t.title.changed.disconnect(this._onTitleChange)}const n=this._getAllState();if(this._widget=e,null===this._widget)this._path="",this._name="";else{const e=this._docManager.contextForWidget(this._widget);e?(this._path=e.path,this._name=p.PathExt.basename(e.path),e.pathChanged.connect(this._onPathChange)):(this._path="",this._name=this._widget.title.label,this._widget.title.changed.connect(this._onTitleChange))}this._triggerChange(n,this._getAllState())}_getAllState(){return[this._path,this._name]}_triggerChange(e,t){e[0]===t[0]&&e[1]===t[1]||this.stateChanged.emit(void 0)}}e.Model=t}(R||(R={}));var O,N,q=n(26855),I=n(35909),T=n(77727),j=n(55466);!function(e){e.clearRecents="docmanager:clear-recents"}(O||(O={})),function(e){e.recentsManager="@jupyterlab/docmanager-extension:recents",e.reopenClosed="@jupyterlab/docmanager-extension:reopen-recently-closed",e.mainPlugin="@jupyterlab/docmanager-extension:plugin"}(N||(N={}));const $={id:N.recentsManager,description:"Provides a manager of recently opened and closed documents.",autoStart:!0,requires:[j.IStateDB],optional:[I.O,f.gv],provides:g.IRecentsManager,activate:(e,t,n,a)=>{const{serviceManager:i}=e,s=(null!=a?a:f.Sr).load("jupyterlab"),o=new g.RecentsManager({stateDB:t,contents:i.contents}),r=e=>{o.maximalRecentsLength=e.get("maxNumberRecents").composite};return n&&Promise.all([e.restored,n.load(N.mainPlugin)]).then((([e,t])=>{t.changed.connect(r),r(t)})),e.commands.addCommand(O.clearRecents,{execute:()=>{o.clearRecents()},isEnabled:()=>0!=o.recentlyOpened.length||0!=o.recentlyClosed.length,label:s.__("Clear Recent Documents"),caption:s.__("Clear the list of recently opened items.")}),o}};var U;!function(e){e.clone="docmanager:clone",e.deleteFile="docmanager:delete-file",e.newUntitled="docmanager:new-untitled",e.open="docmanager:open",e.openBrowserTab="docmanager:open-browser-tab",e.reload="docmanager:reload",e.rename="docmanager:rename",e.del="docmanager:delete",e.duplicate="docmanager:duplicate",e.restoreCheckpoint="docmanager:restore-checkpoint",e.save="docmanager:save",e.saveAll="docmanager:save-all",e.saveAs="docmanager:save-as",e.download="docmanager:download",e.toggleAutosave="docmanager:toggle-autosave",e.showInFileBrowser="docmanager:show-in-file-browser"}(U||(U={}));const L="@jupyterlab/docmanager-extension:plugin",z={id:"@jupyterlab/docmanager-extension:opener",description:"Provides the widget opener.",autoStart:!0,provides:m.C,activate:e=>{const{shell:t}=e;return new class{constructor(){this._opened=new C.Signal(this)}open(e,n){e.id||(e.id="document-manager-"+ ++te.id),e.title.dataset={type:"document-title",...e.title.dataset},e.isAttached||t.add(e,"main",n||{}),t.activateById(e.id),this._opened.emit(e)}get opened(){return this._opened}}}},H={id:"@jupyterlab/docmanager-extension:contexts",description:"Adds the handling of opened documents dirty state.",autoStart:!0,requires:[m.T,m.C],optional:[i.yo],activate:(e,t,n,a)=>{const i=new WeakSet;n.opened.connect(((e,n)=>{const s=t.contextForWidget(n);s&&!i.has(s)&&(a&&function(e,t){let n=null;const a=(t,a)=>{"dirty"===a.name&&(!0===a.newValue?n||(n=e.setDirty()):n&&(n.dispose(),n=null))};t.ready.then((()=>{t.model.stateChanged.connect(a),t.model.dirty&&(n=e.setDirty())})),t.disposed.connect((()=>{n&&n.dispose()}))}(a,s),i.add(s))}))}},J={id:"@jupyterlab/docmanager-extension:manager",description:"Provides the document manager.",provides:m.T,requires:[m.C],optional:[f.gv,i.yo,r.oj,s.p.IInfo,g.IRecentsManager],activate:(e,t,n,a,i,s,o)=>{var r;const{serviceManager:c,docRegistry:d}=e,h=null!=n?n:f.Sr,u=null!=i?i:new l.H({translator:h}),_=e.restored.then((()=>{}));return new P({registry:d,manager:c,opener:t,when:_,setBusy:null!==(r=a&&(()=>a.setBusy()))&&void 0!==r?r:void 0,sessionDialogs:u,translator:null!=h?h:f.Sr,isConnectedCallback:()=>!s||s.isConnected,recentsManager:null!=o?o:void 0})}},K={id:L,description:"Adds commands and settings to the document manager.",autoStart:!0,requires:[m.T,m.C,I.O],optional:[f.gv,r.WW,o.r],activate:(e,t,n,a,i,s,o)=>{const r=(i=null!=i?i:f.Sr).load("jupyterlab"),l=e.docRegistry;!function(e,t,n,a,i,s,o){var r;const l=i.load("jupyterlab"),{commands:d,shell:h}=e,m=l.__("File Operations"),g=()=>{const{currentWidget:e}=h;return!(!e||!t.contextForWidget(e))},v=()=>{var e;const{currentWidget:n}=h;if(!n)return!1;const a=t.contextForWidget(n);return!!(null===(e=null==a?void 0:a.contentsModel)||void 0===e?void 0:e.writable)},f=e=>u.P.warning(l.__('%1 is read-only. Use "Save as…" instead.',e),{autoClose:5e3});s&&function(e,t,n,a,i){const s=i.load("jupyterlab"),{commands:o}=e,r=()=>{var a;const i=/[Pp]ath:\s?(.*)\n?/,s=e.contextMenuHitTest((e=>{var t;return!!(null===(t=e.title)||void 0===t?void 0:t.match(i))})),o=null==s?void 0:s.title.match(i);return null!==(a=o&&t.findWidget(o[1],null))&&void 0!==a?a:n.currentWidget},l=()=>{const{currentWidget:e}=n;return!(!e||!t.contextForWidget(e))};o.addCommand(U.clone,{label:()=>s.__("New View for %1",ae(r(),t)),isEnabled:l,execute:e=>{const n=r(),i=e.options||{mode:"split-right"};if(!n)return;const s=t.cloneWidget(n);s&&a.open(s,i)}}),o.addCommand(U.rename,{label:()=>{let e=ae(r(),t);return e&&(e=" "+e),s.__("Rename%1…",e)},isEnabled:l,execute:()=>{if(l()){const e=t.contextForWidget(r());return(0,q.oQ)(t,e)}}}),o.addCommand(U.duplicate,{label:()=>s.__("Duplicate %1",ae(r(),t)),isEnabled:l,execute:()=>{if(l()){const e=t.contextForWidget(r());if(!e)return;return t.duplicate(e.path)}}}),o.addCommand(U.del,{label:()=>s.__("Delete %1",ae(r(),t)),isEnabled:l,execute:async()=>{if(l()){const n=t.contextForWidget(r());if(!n)return;(await(0,c.vC)({title:s.__("Delete"),body:s.__("Are you sure you want to delete %1",n.path),buttons:[c.Vq.cancelButton(),c.Vq.warnButton({label:s.__("Delete")})]})).button.accept&&await e.commands.execute("docmanager:delete-file",{path:n.path})}}}),o.addCommand(U.showInFileBrowser,{label:()=>s.__("Show in File Browser"),isEnabled:l,execute:async()=>{const e=r(),n=e&&t.contextForWidget(e);n&&(await o.execute("filebrowser:activate",{path:n.path}),await o.execute("filebrowser:go-to-path",{path:n.path}))}}),n.currentChanged.connect((()=>{[U.clone,U.rename,U.duplicate,U.del,U.showInFileBrowser].forEach((t=>{e.commands.notifyCommandChanged(t)}))}))}(e,t,s,n,i),d.addCommand(U.deleteFile,{label:()=>`Delete ${ae(h.currentWidget,t)}`,execute:e=>{const n=void 0===e.path?"":e.path;if(!n){const e=U.deleteFile;throw new Error(`A non-empty path is required for ${e}.`)}return t.deleteFile(n)}}),d.addCommand(U.newUntitled,{execute:async e=>{const n=e.error||l.__("Error"),a=void 0===e.path?"":e.path,i={type:e.type,path:a};return"file"===e.type&&(i.ext=e.ext||".txt"),t.services.contents.newUntitled(i).catch((e=>(0,c.UW)(n,e)))},label:e=>e.label||`New ${e.type}`}),d.addCommand(U.open,{execute:async e=>{const n=void 0===e.path?"":e.path,a=e.factory||void 0,i=null==e?void 0:e.kernel,s=e.options||void 0;return t.services.contents.get(n,{content:!1}).then((()=>t.openOrReveal(n,a,i,s)))},iconClass:e=>e.icon||"",label:e=>{var t;return null!==(t=e.label||e.factory)&&void 0!==t?t:l.__("Open the provided `path`.")},mnemonic:e=>e.mnemonic||-1}),d.addCommand(U.reload,{label:()=>l.__("Reload %1 from Disk",ae(h.currentWidget,t)),caption:l.__("Reload contents from disk"),isEnabled:g,execute:()=>{if(!g())return;const e=t.contextForWidget(h.currentWidget),n=ae(h.currentWidget,t);return e?e.model.dirty?(0,c.vC)({title:l.__("Reload %1 from Disk",n),body:l.__("Are you sure you want to reload the %1 from the disk?",n),buttons:[c.Vq.cancelButton(),c.Vq.warnButton({label:l.__("Reload")})]}).then((t=>{if(t.button.accept&&!e.isDisposed)return e.revert()})):e.isDisposed?void 0:e.revert():(0,c.vC)({title:l.__("Cannot Reload"),body:l.__("No context found for current widget!"),buttons:[c.Vq.okButton()]})}}),d.addCommand(U.restoreCheckpoint,{label:()=>l.__("Revert %1 to Checkpoint…",ae(h.currentWidget,t)),caption:l.__("Revert contents to previous checkpoint"),isEnabled:g,execute:()=>{if(!g())return;const e=t.contextForWidget(h.currentWidget);return e?e.listCheckpoints().then((async n=>{const a=ae(h.currentWidget,t);if(n.length<1)return void await(0,c.UW)(l.__("No checkpoints"),l.__("No checkpoints are available for this %1.",a));const i=1===n.length?n[0]:await te.getTargetCheckpoint(n.reverse(),l);return i?(0,c.vC)({title:l.__("Revert %1 to checkpoint",a),body:new ne(i,l,a),buttons:[c.Vq.cancelButton(),c.Vq.warnButton({label:l.__("Revert"),ariaLabel:l.__("Revert to Checkpoint")})]}).then((t=>{if(!e.isDisposed)return t.button.accept?e.model.readOnly?e.revert():e.restoreCheckpoint(i.id).then((()=>e.revert())):void 0})):void 0})):(0,c.vC)({title:l.__("Cannot Revert"),body:l.__("No context found for current widget!"),buttons:[c.Vq.okButton()]})}});const w=new WeakSet;d.addCommand(U.save,{label:()=>l.__("Save %1",ae(h.currentWidget,t)),caption:()=>{if(h.currentWidget){const e=t.contextForWidget(h.currentWidget);if(null==e?void 0:e.model.collaborative)return l.__("In collaborative mode, the document is saved automatically after every change");if(!v())return l.__('Document is read-only. "Save" is disabled; use "Save as…" instead')}return l.__("Save and create checkpoint")},icon:e=>e.toolbar?T.Nd:void 0,isEnabled:e=>e._luminoEvent&&"keybinding"===e._luminoEvent.type||v(),execute:async e=>{var n,i,s,o,r;const d=h.currentWidget,u=t.contextForWidget(d);if(g()){if(!u)return(0,c.vC)({title:l.__("Cannot Save"),body:l.__("No context found for current widget!"),buttons:[c.Vq.okButton()]});{if(w.has(u))return;if(!(null===(n=u.contentsModel)||void 0===n?void 0:n.writable)&&!u.model.collaborative){let t=null===(i=e._luminoEvent)||void 0===i?void 0:i.type;return e._luminoEvent&&"keybinding"===t?void f(u.path):(0,c.vC)({title:l.__("Cannot Save"),body:l.__("Document is read-only"),buttons:[c.Vq.okButton()]})}w.add(u);const h=p.PathExt.basename(null!==(o=null===(s=u.contentsModel)||void 0===s?void 0:s.path)&&void 0!==o?o:"");let m=h;if(t.renameUntitledFileOnSave&&!0===d.isUntitled){const e=await _.m.getText({title:l.__("Rename file"),okLabel:l.__("Rename"),placeholder:l.__("File name"),text:h,selectionRange:h.length-p.PathExt.extname(h).length,checkbox:{label:l.__("Do not ask me again."),caption:l.__("If checked, you will not be asked to rename future untitled files when saving them.")}});if(e.button.accept&&(m=null!==(r=e.value)&&void 0!==r?r:h,d.isUntitled=!1,"boolean"==typeof e.isChecked)){const t=(await a.get(L,"renameUntitledFileOnSave")).composite;e.isChecked===t&&a.set(L,"renameUntitledFileOnSave",!e.isChecked).catch((e=>{console.error(`Fail to set 'renameUntitledFileOnSave:\n${e}`)}))}}try{if(await u.save(),!(null==d?void 0:d.isDisposed))return u.createCheckpoint()}catch(e){if("ModalCancelError"===e.name)return;throw e}finally{w.delete(u),m!==h&&await u.rename(m)}}}}}),d.addCommand(U.saveAll,{label:()=>l.__("Save All"),caption:l.__("Save all open documents"),isEnabled:()=>(0,M.G)(h.widgets("main"),(e=>{var n,a,i;return null!==(i=null===(a=null===(n=t.contextForWidget(e))||void 0===n?void 0:n.contentsModel)||void 0===a?void 0:a.writable)&&void 0!==i&&i})),execute:()=>{var e;const n=[],a=new Set;for(const i of h.widgets("main")){const s=t.contextForWidget(i);s&&!a.has(s.path)&&((null===(e=s.contentsModel)||void 0===e?void 0:e.writable)?(a.add(s.path),n.push(s.save())):f(s.path))}return Promise.all(n)}}),d.addCommand(U.saveAs,{label:()=>l.__("Save %1 As…",ae(h.currentWidget,t)),caption:l.__("Save with new path"),isEnabled:g,execute:()=>{if(g()){const e=t.contextForWidget(h.currentWidget);if(!e)return(0,c.vC)({title:l.__("Cannot Save"),body:l.__("No context found for current widget!"),buttons:[c.Vq.okButton()]});const n=(n,a)=>{"save"===a.type&&a.newValue&&a.newValue.path!==e.path&&(t.closeFile(e.path),d.execute(U.open,{path:a.newValue.path}))};t.services.contents.fileChanged.connect(n),e.saveAs().finally((()=>t.services.contents.fileChanged.disconnect(n)))}}}),null===(r=e.shell.currentChanged)||void 0===r||r.connect((()=>{[U.reload,U.restoreCheckpoint,U.save,U.saveAll,U.saveAs].forEach((t=>{e.commands.notifyCommandChanged(t)}))})),d.addCommand(U.toggleAutosave,{label:l.__("Autosave Documents"),isToggled:()=>t.autosave,execute:()=>{const e=!t.autosave,n="autosave";return a.set(L,n,e).catch((e=>{console.error(`Failed to set ${L}:${n} - ${e.message}`)}))}}),o&&[U.reload,U.restoreCheckpoint,U.save,U.saveAs,U.toggleAutosave,U.duplicate].forEach((e=>{o.addItem({command:e,category:m})}))}(e,t,n,a,i,o,s);const d=n=>{const a=n.get("autosave").composite;t.autosave=!0!==a&&!1!==a||a,e.commands.notifyCommandChanged(U.toggleAutosave);const i=n.get("confirmClosingDocument").composite;t.confirmClosingDocument=null==i||i;const s=n.get("autosaveInterval").composite;t.autosaveInterval=s||120;const o=n.get("lastModifiedCheckMargin").composite;t.lastModifiedCheckMargin=o||500;const r=n.get("renameUntitledFileOnSave").composite;t.renameUntitledFileOnSave=null==r||r;const c=n.get("defaultViewers").composite,d={};Object.keys(c).forEach((e=>{l.getFileType(e)?(l.getWidgetFactory(c[e])||console.warn(`Document viewer ${c[e]} not found`),d[e]=c[e]):console.warn(`File Type ${e} not found`)}));for(const e of l.fileTypes())try{l.setDefaultWidgetFactory(e.name,d[e.name])}catch(t){console.warn(`Failed to set default viewer ${d[e.name]} for file type ${e.name}`)}};Promise.all([a.load(L),e.restored]).then((([e])=>{e.changed.connect(d),d(e),t.stateChanged.connect(((t,n)=>{["autosave","autosaveInterval","confirmClosingDocument","lastModifiedCheckMargin","renameUntitledFileOnSave"].includes(n.name)&&e.get(n.name).composite!==n.newValue&&e.set(n.name,n.newValue).catch((e=>{console.error(`Failed to set the setting '${n.name}':\n${e}`)}))}))})).catch((e=>{console.error(e.message)})),a.transform(L,{fetch:e=>{const t=Array.from(l.fileTypes()).map((e=>e.name)).join("    \n"),n=Array.from(l.widgetFactories()).map((e=>e.name)).join("    \n"),a=r.__('Overrides for the default viewers for file types.\nSpecify a mapping from file type name to document viewer name, for example:\n\ndefaultViewers: {\n  markdown: "Markdown Preview"\n}\n\nIf you specify non-existent file types or viewers, or if a viewer cannot\nopen a given file type, the override will not function.\n\nAvailable viewers:\n%1\n\nAvailable file types:\n%2',n,t),i=w.JSONExt.deepCopy(e.schema);return i.properties.defaultViewers.description=a,{...e,schema:i}}}),l.changed.connect((()=>a.load(L,!0)))}},Q={id:"@jupyterlab/docmanager-extension:saving-status",description:"Adds a saving status indicator.",autoStart:!0,requires:[m.T,o.r],optional:[f.gv,D.WQ],activate:(e,t,n,a,i)=>{if(!i)return;const s=new B({docManager:t,translator:null!=a?a:f.Sr});s.model.widget=n.currentWidget,n.currentChanged.connect((()=>{s.model.widget=n.currentWidget})),i.registerStatusItem(Q.id,{item:s,align:"middle",isActive:()=>null!==s.model&&null!==s.model.status,activeStateChanged:s.model.stateChanged})}},G={id:"@jupyterlab/docmanager-extension:path-status",description:"Adds a file path indicator in the status bar.",autoStart:!0,requires:[m.T,o.r],optional:[D.WQ],activate:(e,t,n,a)=>{if(!a)return;const i=new R({docManager:t});i.model.widget=n.currentWidget,n.currentChanged.connect((()=>{i.model.widget=n.currentWidget})),a.registerStatusItem(G.id,{item:i,align:"right",rank:0})}},X={id:"@jupyterlab/docmanager-extension:download",description:"Adds command to download files.",autoStart:!0,requires:[m.T],optional:[f.gv,r.WW],activate:(e,t,n,a)=>{var i;const s=(null!=n?n:f.Sr).load("jupyterlab"),{commands:o,shell:r}=e,l=()=>{const{currentWidget:e}=r;return!(!e||!t.contextForWidget(e))};o.addCommand(U.download,{label:s.__("Download"),caption:s.__("Download the file to your computer"),isEnabled:l,execute:()=>{if(l()){const e=t.contextForWidget(r.currentWidget);return e?e.download():(0,c.vC)({title:s.__("Cannot Download"),body:s.__("No context found for current widget!"),buttons:[c.Vq.okButton()]})}}}),null===(i=e.shell.currentChanged)||void 0===i||i.connect((()=>{e.commands.notifyCommandChanged(U.download)}));const d=s.__("File Operations");a&&a.addItem({command:U.download,category:d})}},Y={id:"@jupyterlab/docmanager-extension:open-browser-tab",description:"Adds command to open a browser tab.",autoStart:!0,requires:[m.T],optional:[f.gv],activate:(e,t,n)=>{const a=(null!=n?n:f.Sr).load("jupyterlab"),{commands:i}=e;i.addCommand(U.openBrowserTab,{execute:e=>{const n=void 0===e.path?"":e.path;if(n)return t.services.contents.getDownloadUrl(n).then((e=>{const t=window.open();if(!t)throw new Error("Failed to open new browser tab.");t.opener=null,t.location.href=e}))},iconClass:e=>e.icon||"",label:()=>a.__("Open in New Browser Tab")})}},Z=[J,K,H,G,Q,X,Y,z,$];var ee,te;!function(e){e.createSaveButton=function(e,t){return(0,d.sg)(h.zz.create(W.createElement(h.lA,{signal:t},(()=>W.createElement(d.lv,{commands:e,id:U.save,label:"",args:{toolbar:!0}})))))}}(ee||(ee={}));class ne extends b.$L{constructor(e,t,n="notebook"){super({node:te.createRevertConfirmNode(e,n,t)})}}function ae(e,t){if(!e)return"File";const n=t.contextForWidget(e);if(!n)return"";const a=t.registry.getFileTypesForPath(n.path);return a.length&&a[0].displayName?a[0].displayName:"File"}!function(e){e.id=0,e.createRevertConfirmNode=function(e,t,n){const a=document.createElement("div"),i=document.createElement("p"),s=document.createTextNode(n.__("Are you sure you want to revert the %1 to checkpoint? ",t)),o=document.createElement("strong");o.textContent=n.__("This cannot be undone."),i.appendChild(s),i.appendChild(o);const r=document.createElement("p"),l=document.createTextNode(n.__("The checkpoint was last updated at: ")),c=document.createElement("p"),d=new Date(e.last_modified);return c.style.textAlign="center",c.textContent=p.Time.format(d)+" ("+p.Time.formatHuman(d)+")",r.appendChild(l),r.appendChild(c),a.appendChild(i),a.appendChild(r),a},e.getTargetCheckpoint=async function(e,t){const n=e.map(((e,t)=>`${t}. ${p.Time.format(e.last_modified)} (${p.Time.formatHuman(e.last_modified)})`)),a=(await _.m.getItem({items:n,title:t.__("Choose a checkpoint")})).value;if(!a)return;const i=a.split(".",1)[0];return e[parseInt(i,10)]}}(te||(te={}))},26855:(e,t,n)=>{n.d(t,{B2:()=>d,eT:()=>h,gQ:()=>c,oQ:()=>l});var a,i=n(71204),s=n(48425),o=n(18168),r=n(92279);function l(e,t,n){const a=(n=n||o.Sr).load("jupyterlab"),s=t.localPath.split("/").pop()||t.localPath;return(0,i.vC)({title:a.__("Rename File"),body:new u(s),focusNodeSelector:"input",buttons:[i.Vq.cancelButton(),i.Vq.okButton({label:a.__("Rename"),ariaLabel:a.__("Rename File")})]}).then((e=>e.value?h(e.value)?t.rename(e.value):((0,i.UW)(a.__("Rename Error"),Error(a.__('"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',e.value))),null):null))}function c(e,t,n){return e.rename(t,n).catch((a=>{if(409!==a.response.status)throw a;return d(n).then((a=>a?e.overwrite(t,n):Promise.reject("File not renamed")))}))}function d(e,t){const n=(t=t||o.Sr).load("jupyterlab"),a={title:n.__("Overwrite file?"),body:n.__('"%1" already exists, overwrite?',e),buttons:[i.Vq.cancelButton(),i.Vq.warnButton({label:n.__("Overwrite"),ariaLabel:n.__("Overwrite Existing File")})]};return(0,i.vC)(a).then((e=>Promise.resolve(e.button.accept)))}function h(e){return e.length>0&&!/[\/\\:]/.test(e)}class u extends r.$L{constructor(e){super({node:a.createRenameNode(e)}),this.addClass("jp-FileDialog");const t=s.PathExt.extname(e),n=this.inputNode.value=s.PathExt.basename(e);this.inputNode.setSelectionRange(0,n.length-t.length)}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}!function(e){e.createRenameNode=function(e,t){const n=(t=t||o.Sr).load("jupyterlab"),a=document.createElement("div"),i=document.createElement("label");i.textContent=n.__("File Path");const s=document.createElement("span");s.textContent=e;const r=document.createElement("label");r.textContent=n.__("New Name"),r.className="jp-new-name-title";const l=document.createElement("input");return a.appendChild(i),a.appendChild(s),a.appendChild(r),a.appendChild(l),a}}(a||(a={}))},74642:()=>{}}]);