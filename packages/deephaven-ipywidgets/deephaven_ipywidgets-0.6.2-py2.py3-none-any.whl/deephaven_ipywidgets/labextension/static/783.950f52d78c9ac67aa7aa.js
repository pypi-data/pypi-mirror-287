(self.webpackChunk_deephaven_ipywidgets=self.webpackChunk_deephaven_ipywidgets||[]).push([[783],{783:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BROADCAST_CHANNEL_NAME:()=>Te,BROADCAST_LOGIN_MESSAGE:()=>ye,BROADCAST_LOGOUT_MESSAGE:()=>Se,BooleanColumnFormatter:()=>c,CharColumnFormatter:()=>m,DateTimeColumnFormatter:()=>h,DateUtils:()=>C,DecimalColumnFormatter:()=>y,DefaultColumnFormatter:()=>S,FETCH_TIMEOUT:()=>i,Formatter:()=>le,FormatterUtils:()=>me,IntegerColumnFormatter:()=>b,LOGIN_OPTIONS_REQUEST:()=>he,NoConsolesError:()=>De,SESSION_DETAILS_REQUEST:()=>ge,StringColumnFormatter:()=>w,TableColumnFormatter:()=>s,TableUtils:()=>ae,createComboboxFilterArgs:()=>k,createConnection:()=>Le,createCoreClient:()=>qe,createFilterConditionFactory:()=>D,createKeyFromOffsetRow:()=>Y,createNotNullOrEmptyFilterCondition:()=>P,createOnTableUpdatedHandler:()=>Z,createSearchTextFilter:()=>O,createSelectedValuesFilter:()=>_,createSessionWrapper:()=>Re,createShowOnlyEmptyFilterCondition:()=>A,createValueFilter:()=>I,defaultRowDeserializer:()=>z,fetchVariableDefinition:()=>o,generateEmptyKeyedItems:()=>X,getColumnFormats:()=>ue,getDateTimeFormatterOptions:()=>se,getSessionDetails:()=>Ue,getSize:()=>$,getWindowParent:()=>Me,isBroadcastLoginMessage:()=>Fe,isBroadcastLogoutMessage:()=>be,isClosed:()=>K,isCustomColumnFormatDefined:()=>ce,isMessage:()=>Ee,isNoConsolesError:()=>Ie,isResponse:()=>we,loadSessionWrapper:()=>Be,makeMessage:()=>Ne,makeResponse:()=>Ce,padFirstAndLastRow:()=>J,requestParentResponse:()=>ke});class n extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isTimeout"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}const a=n;var i=1e4;function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new Promise(((n,i)=>{var o,l=setTimeout((()=>{var e;null===(e=o)||void 0===e||e(),i(new a("Variable ".concat(t," not found")))}),r);o=e.subscribeToFieldUpdates((function(e){var r,a=e.created.find((e=>e.title===t));null!=a&&(clearTimeout(l),null===(r=o)||void 0===r||r(),n(a))}))}))}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{static isValid(e,t){return!0}static isSameFormat(e,t){throw new Error("isSameFormat not implemented")}static makeFormat(e,t,r){return{label:e,formatString:t,type:r}}format(e,t){return""}}l(u,"TYPE_GLOBAL","type-global"),l(u,"TYPE_CONTEXT_PRESET","type-context-preset"),l(u,"TYPE_CONTEXT_CUSTOM","type-context-custom");const s=u,c=class extends s{format(e){switch(e){case 1:case!0:return"true";case 0:case!1:return"false";default:return""}}},m=class extends s{format(e){return String.fromCharCode(e)}};var f=r(271),d=r.n(f);function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=d().module("DateTimeColumnFormatter");class h extends s{static isValid(e,t){try{return e.i18n.DateTimeFormat.format(t.formatString,new Date),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,formatString:t,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TYPE_CONTEXT_PRESET}}static isSameFormat(e,t){return e===t||null!==e&&null!==t&&e.type===t.type&&e.formatString===t.formatString}static makeGlobalFormatStringMap(e,t){var r=t?"'T'":" ",n=e?" z":"";return new Map([["yyyy-MM-dd HH:mm:ss","yyyy-MM-dd".concat(r,"HH:mm:ss").concat(n)],["yyyy-MM-dd HH:mm:ss.SSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSS").concat(n)],["yyyy-MM-dd HH:mm:ss.SSSSSSSSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSSSSSSSS").concat(n)]])}static getGlobalFormats(e,t){return[...h.makeGlobalFormatStringMap(e,t).keys()]}static makeFormatStringMap(e,t){var r=void 0!==t&&t?"'T'":" ",n=void 0!==e&&e?" z":"";return new Map([["yyyy-MM-dd","yyyy-MM-dd".concat(n)],["MM-dd-yyyy","MM-dd-yyyy".concat(n)],["HH:mm:ss","HH:mm:ss".concat(n)],["HH:mm:ss.SSS","HH:mm:ss.SSS".concat(n)],["HH:mm:ss.SSSSSSSSS","HH:mm:ss.SSSSSSSSS".concat(n)],["yyyy-MM-dd HH:mm:ss","yyyy-MM-dd".concat(r,"HH:mm:ss").concat(n)],["yyyy-MM-dd HH:mm:ss.SSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSS").concat(n)],["yyyy-MM-dd HH:mm:ss.SSSSSSSSS","yyyy-MM-dd".concat(r,"HH:mm:ss.SSSSSSSSS").concat(n)]])}static getFormats(e,t){return[...h.makeFormatStringMap(e,t).keys()]}constructor(e){var{timeZone:t="",showTimeZone:r=!0,showTSeparator:n=!1,defaultDateTimeFormatString:a=h.DEFAULT_DATETIME_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),p(this,"dh",void 0),p(this,"dhTimeZone",void 0),p(this,"defaultDateTimeFormatString",void 0),p(this,"showTimeZone",void 0),p(this,"showTSeparator",void 0),p(this,"formatStringMap",void 0);var i=t||h.DEFAULT_TIME_ZONE_ID;try{this.dhTimeZone=e.i18n.TimeZone.getTimeZone(i)}catch(t){v.error("Unsupported time zone id",i),this.dhTimeZone=e.i18n.TimeZone.getTimeZone(h.DEFAULT_TIME_ZONE_ID)}this.dh=e,this.defaultDateTimeFormatString=a,this.showTimeZone=r,this.showTSeparator=n,this.formatStringMap=h.makeFormatStringMap(r,n)}getEffectiveFormatString(e){var t;return null!==(t=this.formatStringMap.get(e))&&void 0!==t?t:e}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultDateTimeFormatString,n=this.getEffectiveFormatString(r);try{return this.dh.i18n.DateTimeFormat.format(n,e,this.dhTimeZone)}catch(e){v.error("Invalid format arguments")}return""}}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}p(h,"DEFAULT_DATETIME_FORMAT_STRING","yyyy-MM-dd HH:mm:ss.SSS"),p(h,"DEFAULT_TIME_ZONE_ID","America/New_York");var T=d().module("DecimalColumnFormatter");class y extends s{static isValid(e,t){try{return e.i18n.NumberFormat.format(t.formatString,0),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TYPE_CONTEXT_PRESET,formatString:t,multiplier:arguments.length>3?arguments[3]:void 0}}static makePresetFormat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return y.makeFormat(e,t,s.TYPE_CONTEXT_PRESET,r)}static makeCustomFormat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return y.makeFormat("Custom Format",e,s.TYPE_CONTEXT_CUSTOM,t)}static isSameFormat(e,t){return e===t||null!=e&&null!=t&&e.type===t.type&&e.formatString===t.formatString&&e.multiplier===t.multiplier}constructor(e){var{defaultFormatString:t=y.DEFAULT_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),g(this,"defaultFormatString",void 0),g(this,"dh",void 0),this.dh=e,this.defaultFormatString=t}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultFormatString,n=null!=t.multiplier&&0!==t.multiplier?e*t.multiplier:e;try{return this.dh.i18n.NumberFormat.format(r,n)}catch(e){T.error("Invalid format arguments")}return""}}g(y,"DEFAULT_FORMAT_STRING","###,##0.0000"),g(y,"FORMAT_PERCENT",y.makePresetFormat("Percent","##0.00%")),g(y,"FORMAT_BASIS_POINTS",y.makePresetFormat("Basis Points","###,##0 bp",1e4)),g(y,"FORMAT_MILLIONS",y.makePresetFormat("Millions","###,##0.000 mm",1e-6)),g(y,"FORMAT_SCIENTIFIC_NOTATION",y.makePresetFormat("Scientific Notation","0.0000E0")),g(y,"FORMAT_ROUND",y.makePresetFormat("Round","###,##0")),g(y,"FORMAT_ROUND_TWO_DECIMALS",y.makePresetFormat("0.00","###,##0.00")),g(y,"FORMAT_ROUND_FOUR_DECIMALS",y.makePresetFormat("0.0000","###,##0.0000"));const S=class extends s{format(e){return"".concat(e)}};function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=d().module("IntegerColumnFormatter");class b extends s{static isValid(e,t){try{return e.i18n.NumberFormat.format(t.formatString,0),!0}catch(e){return!1}}static makeFormat(e,t){return{label:e,type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TYPE_CONTEXT_PRESET,formatString:t,multiplier:arguments.length>3?arguments[3]:void 0}}static makePresetFormat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return b.makeFormat(e,t,s.TYPE_CONTEXT_PRESET,r)}static makeCustomFormat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return b.makeFormat("Custom Format",e,s.TYPE_CONTEXT_CUSTOM,t)}static isSameFormat(e,t){return e===t||null!=e&&null!=t&&e.type===t.type&&e.formatString===t.formatString&&e.multiplier===t.multiplier}constructor(e){var{defaultFormatString:t=b.DEFAULT_FORMAT_STRING}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),E(this,"dh",void 0),E(this,"defaultFormatString",void 0),this.dh=e,this.defaultFormatString=t}format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.formatString&&""!==t.formatString?t.formatString:this.defaultFormatString,n=null!=t.multiplier&&0!==t.multiplier?e*t.multiplier:e;try{return this.dh.i18n.NumberFormat.format(r,n)}catch(e){F.error("Invalid format arguments")}return""}}E(b,"DEFAULT_FORMAT_STRING","###,##0"),E(b,"FORMAT_MILLIONS",b.makePresetFormat("Millions","###,##0.000 mm",1e-6)),E(b,"FORMAT_SCIENTIFIC_NOTATION",b.makePresetFormat("Scientific Notation","0.0000E0"));class w extends s{format(e){return e}}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class C{static makeDateWrapper(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;if(!t)throw new Error("No timezone provided");var s="".concat(r).padStart(4,"0"),c="".concat(n+1).padStart(2,"0"),m="".concat(a).padStart(2,"0"),f="".concat(i).padStart(2,"0"),d="".concat(o).padStart(2,"0"),p="".concat(l).padStart(2,"0"),v="".concat(u).padStart(9,"0"),h="".concat(s,"-").concat(c,"-").concat(m," ").concat(f,":").concat(d,":").concat(p,".").concat(v);return e.i18n.DateTimeFormat.parse(C.FULL_DATE_FORMAT,h,e.i18n.TimeZone.getTimeZone(t))}static getNextNanos(e){var t=parseInt(e,10),r="0".repeat(9-e.length),n="".concat(t+1).concat(r);return parseInt(n,10)}static getNextDate(e,t,r,n){var{year:a,month:i,date:o,hours:l,minutes:u,seconds:s,nanos:c}=r;if(null!=t.nanos){if(9===t.nanos.length)return null;(c=C.getNextNanos(t.nanos))>999999999&&(s+=1,c=0)}else null!=t.seconds?s+=1:null!=t.minutes?u+=1:null!=t.hours?l+=1:null!=t.date?o+=1:null!=t.month?i+=1:a+=1;var m=new Date(a,i,o,l,u,s);return C.makeDateWrapper(e,n,m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),c)}static parseMonth(e){var t=parseInt(e,10);if(!Number.isNaN(t))return t>=1&&t<=12?t-1:NaN;var r=e.trim().toLowerCase();if(r.length>=3)for(var n=0;n<C.months.length;n+=1)if(C.months[n].startsWith(r))return n;return NaN}static parseDateValues(e,t,r,n,a,i,o){var l=parseInt(e,10),u=null!=t?this.parseMonth(t):0,s=null!=r?parseInt(r,10):1,c=null!=n?parseInt(n,10):0,m=null!=a?parseInt(a,10):0,f=null!=i?parseInt(i,10):0,d=null!=o?parseInt(o.padEnd(9,"0"),10):0;return Number.isNaN(l)||Number.isNaN(u)||Number.isNaN(s)||Number.isNaN(c)||Number.isNaN(m)||Number.isNaN(f)||Number.isNaN(d)?null:{year:l,month:u,date:s,hours:c,minutes:m,seconds:f,nanos:d}}static parseDateTimeString(e){var t=/\s*(\d{4})([-./]([\da-z]+))?([-./](\d{1,2}))?([tT\s](\d{2})([:](\d{2}))?([:](\d{2}))?([.](\d{1,9}))?)?(.*)/.exec(e);if(null==t)throw new Error("Unexpected date string: ".concat(e));var[,r,,n,,a,,i,,o,,l,,u,s]=t;if(null!=s&&s.length>0)throw new Error("Unexpected characters after date string '".concat(e,"': ").concat(s));return{year:r,month:n,date:a,hours:i,minutes:o,seconds:l,nanos:u}}static parseDateRange(e,t,r){var n=t.trim().toLowerCase();if(0===n.length)throw new Error("Cannot parse date range from empty string");if("null"===n)return[null,null];if("today"===n){var a=new Date(Date.now()),i=C.makeDateWrapper(e,r,a.getFullYear(),a.getMonth(),a.getDate()),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);return[i,C.makeDateWrapper(e,r,o.getFullYear(),o.getMonth(),o.getDate())]}if("yesterday"===n){var l=new Date(Date.now()),u=new Date(l.getFullYear(),l.getMonth(),l.getDate()-1);return[C.makeDateWrapper(e,r,u.getFullYear(),u.getMonth(),u.getDate()),C.makeDateWrapper(e,r,l.getFullYear(),l.getMonth(),l.getDate())]}if("now"===n){var s=new Date(Date.now());return[e.DateWrapper.ofJsDate(s),null]}var c=C.parseDateTimeString(n);if(null==c.year&&null==c.month&&null==c.date)throw new Error("Unable to extract year, month, or day ".concat(n));var m=C.parseDateValues(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.nanos);if(null==m)throw new Error("Unable to extract date values from ".concat(c));return[C.makeDateWrapper(e,r,m.year,m.month,m.date,m.hours,m.minutes,m.seconds,m.nanos),C.getNextDate(e,c,m,r)]}static getJsDate(e){return"number"==typeof e?new Date(e):e.asDate()}}N(C,"FULL_DATE_FORMAT","yyyy-MM-dd HH:mm:ss.SSSSSSSSS"),N(C,"months",["january","february","march","april","may","june","july","august","september","october","november","december"]);const M=C;function k(e,t){return e===t?{operator:"notEq",value:""}:{operator:"eq",value:e}}function O(e,t,r){return function(n){var a=r.trim();return""===a?null:D(t,(t=>t.filter().containsIgnoreCase(e.makeFilterValue(t.type,a))),"or")(n)}}function D(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"or";return function(n){var a=null==n?void 0:n.findColumns("string"==typeof e?[e]:e);return null==a||0===a.length?null:a.map(t).reduce(((e,t)=>e[r](t)))}}function I(e,t,r,n){return D(t,(t=>t.filter()[n](e.makeFilterValue(t.type,r))),"or")}function _(e,t,r,n,a){return function(i){var o=null==i?void 0:i.findColumn(t),l="all"===r||n&&0===r.size;return null==o||l?null:e.makeSelectValueFilter(o,[...r.keys()],a)}}function P(e){return function(t){return t.filter().isNull().not().and(t.filter().notEq(e.makeFilterValue(t.type,"")))}}function A(e,t){return function(r){var n=r.filter(),a=e.makeFilterValue(r.type,""),i=n.eq(a);return t?n.isNull().or(i):i.or(n.notEq(a))}}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L{}function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}x(L,"eq","eq"),x(L,"eqIgnoreCase","eqIgnoreCase"),x(L,"notEq","notEq"),x(L,"notEqIgnoreCase","notEqIgnoreCase"),x(L,"greaterThan","greaterThan"),x(L,"greaterThanOrEqualTo","greaterThanOrEqualTo"),x(L,"lessThan","lessThan"),x(L,"lessThanOrEqualTo","lessThanOrEqualTo"),x(L,"in","in"),x(L,"inIgnoreCase","inIgnoreCase"),x(L,"notIn","notIn"),x(L,"notInIgnoreCase","notInIgnoreCase"),x(L,"isTrue","isTrue"),x(L,"isFalse","isFalse"),x(L,"isNull","isNull"),x(L,"invoke","invoke"),x(L,"contains","contains"),x(L,"notContains","notContains"),x(L,"containsIgnoreCase","containsIgnoreCase"),x(L,"startsWith","startsWith"),x(L,"endsWith","endsWith"),x(L,"containsAny","containsAny");class j{}function q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e=>null!=e))}R(j,"not","not"),R(j,"and","and"),R(j,"or","or"),Object.freeze([]),new Map;class V extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isCanceled"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}const U=V;class H{static makeCancelable(e,t){var r,n,a=!1,i=new Promise(((i,o)=>{n=o,Promise.resolve(e).then((e=>{a?t&&t(e):(r=e,i(e))})).catch((e=>o(e)))}));return i.cancel=()=>{a=!0,n(new U),null!=r&&t&&t(r)},i}static isCanceled(e){return e instanceof U}static isTimedOut(e){return e instanceof a}static withTimeout(e,t){return new Promise(((r,n)=>{setTimeout((()=>{try{r(t())}catch(e){n(e)}}),e)}))}}const B=class{static join(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";if(null==e||0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return"".concat(e[0]," ").concat(t," ").concat(e[1]);var r=e.slice(0,e.length-1).join(", "),n=e[e.length-1];return"".concat(r,", ").concat(t," ").concat(n)}static toLower(e){if(null==e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])return"";throw new Error("Null string passed in to TextUtils.toLower")}return e.toLowerCase()}static sort(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e<t?r?-1:1:e>t?r?1:-1:0}};var W=r(378),G=r.n(W),Q=d().module("ViewportDataUtils");function Y(e,t){return String(e.offsetInSnapshot+t)}function Z(e,t){var{bulkUpdate:r}=e;return function(e){var{columns:n,offset:a,rows:i}=e.detail;Q.debug("table updated",e.detail);var o=new Map;i.forEach((e=>{var r=t(e,n),i=Y(e,a);o.set(i,{key:i,item:r})})),Q.debug("update keys",o),r(o)}}function z(e,t){return t.reduce(((t,r)=>(t[r.name]=e.get(r),t)),{})}function*X(e,t){for(var r=e;r<=t;++r)yield{key:String(r)}}function $(e){return null==e||K(e)?0:e.size}function K(e){return"isClosed"in e&&e.isClosed}function J(e,t,r,n){var a=e+t-1,[i,o]=[0,n-1];return[G()(e-r,i,o),G()(a+r,i,o)]}function ee(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ee(i,n,a,o,l,"next",e)}function l(e){ee(i,n,a,o,l,"throw",e)}o(void 0)}))}}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne=d().module("TableUtils");class ae{static copyTableAndApplyFilters(e){var t=arguments;return te((function*(){if(null==e)return null;for(var r=yield e.copy(),n=t.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=t[i];return r.applyFilter(q(...a.map((e=>e(r))))),r}))()}static getSortIndex(e,t){for(var r=0;r<e.length;r+=1){var n;if((null===(n=e[r].column)||void 0===n?void 0:n.name)===t)return r}return null}static getSortForColumn(e,t){var r=ae.getSortIndex(e,t);return null!=r?e[r]:null}static getFilterText(e){return e?e.toString():null}static getFilterTypes(e){return ae.isBooleanType(e)?[L.isTrue,L.isFalse,L.isNull]:ae.isCharType(e)||ae.isNumberType(e)||ae.isDateType(e)?[L.eq,L.notEq,L.greaterThan,L.greaterThanOrEqualTo,L.lessThan,L.lessThanOrEqualTo]:ae.isTextType(e)?[L.eq,L.eqIgnoreCase,L.notEq,L.notEqIgnoreCase,L.contains,L.notContains,L.startsWith,L.endsWith]:[]}static getNextSort(e,t,r){if(r<0||r>=e.length)return null;var n=ae.getSortForColumn(t,e[r].name);return null===n?e[r].sort().asc():n.direction===ae.sortDirection.ascending?n.desc():null}static makeColumnSort(e,t,r,n){if(t<0||t>=e.length)return null;if(r===ae.sortDirection.none)return null;var a=e[t].sort();switch(r){case ae.sortDirection.ascending:a=a.asc();break;case ae.sortDirection.descending:a=a.desc()}return n&&(a=a.abs()),a}static toggleSortForColumn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r<0||r>=t.length)return[];var a=ae.getNextSort(t,e,r);return ae.setSortForColumn(e,t[r].name,a,n)}static sortColumn(e,t,r,n,a,i){if(r<0||r>=t.length)return[];var o=ae.makeColumnSort(t,r,n,a);return ae.setSortForColumn(e,t[r].name,o,i)}static setSortForColumn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ae.getSortIndex(e,t),i=[];return n&&(i=i.concat(e.filter((e=>{var{direction:t}=e;return t!==ae.sortDirection.reverse}))),null!==a&&i.splice(a,1)),null!==r&&i.push(r),i}static getNormalizedType(e){switch(e){case"boolean":case"java.lang.Boolean":case ae.dataType.BOOLEAN:return ae.dataType.BOOLEAN;case"char":case"java.lang.Character":case ae.dataType.CHAR:return ae.dataType.CHAR;case"java.lang.String":case ae.dataType.STRING:return ae.dataType.STRING;case"io.deephaven.db.tables.utils.DBDateTime":case"io.deephaven.time.DateTime":case"com.illumon.iris.db.tables.utils.DBDateTime":case"java.time.Instant":case"java.time.ZonedDateTime":case ae.dataType.DATETIME:return ae.dataType.DATETIME;case"double":case"java.lang.Double":case"float":case"java.lang.Float":case"java.math.BigDecimal":case ae.dataType.DECIMAL:return ae.dataType.DECIMAL;case"int":case"java.lang.Integer":case"long":case"java.lang.Long":case"short":case"java.lang.Short":case"byte":case"java.lang.Byte":case"java.math.BigInteger":case ae.dataType.INT:return ae.dataType.INT;default:return ae.dataType.UNKNOWN}}static isLongType(e){switch(e){case"long":case"java.lang.Long":return!0;default:return!1}}static isDateType(e){switch(e){case"io.deephaven.db.tables.utils.DBDateTime":case"io.deephaven.time.DateTime":case"java.time.Instant":case"java.time.ZonedDateTime":case"com.illumon.iris.db.tables.utils.DBDateTime":return!0;default:return!1}}static isNumberType(e){return ae.isIntegerType(e)||ae.isDecimalType(e)}static isIntegerType(e){switch(e){case"int":case"java.lang.Integer":case"java.math.BigInteger":case"long":case"java.lang.Long":case"short":case"java.lang.Short":case"byte":case"java.lang.Byte":return!0;default:return!1}}static isDecimalType(e){switch(e){case"double":case"java.lang.Double":case"java.math.BigDecimal":case"float":case"java.lang.Float":return!0;default:return!1}}static isBigDecimalType(e){return"java.math.BigDecimal"===e}static isBigIntegerType(e){return"java.math.BigInteger"===e}static isBooleanType(e){switch(e){case"boolean":case"java.lang.Boolean":return!0;default:return!1}}static isCharType(e){switch(e){case"char":case"java.lang.Character":return!0;default:return!1}}static isStringType(e){return"java.lang.String"===e}static isTextType(e){return this.isStringType(e)||this.isCharType(e)}static getBaseType(e){return e.split("[]")[0]}static isCompatibleType(e,t){return ae.getNormalizedType(e)===ae.getNormalizedType(t)}static quoteValue(e){return e.length>=2&&('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)||"'"===e.charAt(0)&&"'"===e.charAt(e.length-1))?e:'"'.concat(e,'"')}static isRangeOperation(e){switch(e){case"<":case"<=":case"=<":case">":case">=":case"=>":return!0;default:return!1}}static makeRangeFilterWithOperation(e,t,r){switch(t){case"=":return e.eq(r);case"<":return e.lessThan(r);case"<=":case"=<":return e.lessThanOrEqualTo(r);case">":return e.greaterThan(r);case">=":case"=>":return e.greaterThanOrEqualTo(r);case"!=":case"!":return e.notEq(r);default:return null}}static makeCancelableTablePromise(e){return H.makeCancelable(e,(e=>{e.close()}))}static makeCancelableTableEventPromise(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=!0,u=new Promise(((u,s)=>{n=setTimeout((()=>{r(),l=!1,s(new a('Event "'.concat(t,'" timed out.')))}),i),r=e.addEventListener(t,(e=>{null==o||o(e)?(ne.debug2("Event triggered, resolving."),r(),clearTimeout(n),l=!1,u(e)):ne.debug2("Event triggered, but matcher returned false.")}))}));return u.cancel=()=>{if(l)return ne.debug2("Pending promise cleanup."),r(),clearTimeout(n),void(l=!1);ne.debug2("Ignoring non-pending promise cancel.")},u}static removeCommas(e){return e.replace(/[\s|,]/g,"")}static makeBooleanValue(e){if(""===e&&arguments.length>1&&void 0!==arguments[1]&&arguments[1])return null;switch(null==e?void 0:e.toLowerCase()){case"null":return null;case"0":case"f":case"fa":case"fal":case"fals":case"false":case"n":case"no":return!1;case"1":case"t":case"tr":case"tru":case"true":case"y":case"ye":case"yes":return!0;default:throw new Error("Invalid boolean '".concat(e,"'"))}}static makeNumberValue(e){if("null"===e||""===e)return null;var t=e.toLowerCase().trim();if("∞"===t||"infinity"===t||"inf"===t)return Number.POSITIVE_INFINITY;if("-∞"===t||"-infinity"===t||"-inf"===t)return Number.NEGATIVE_INFINITY;var r=ae.removeCommas(t);if(ae.NUMBER_REGEX.test(r))return parseFloat(r);throw new Error("Invalid number '".concat(e,"'"))}static getFilterOperatorString(e){switch(e){case L.eq:return"=";case L.notEq:return"!=";case L.greaterThan:return">";case L.greaterThanOrEqualTo:return">=";case L.lessThan:return"<";case L.lessThanOrEqualTo:return"<=";case L.contains:return"~";case L.notContains:return"!~";default:throw new Error("Unexpected filter type ".concat(e))}}static isTreeTable(e){return null!=e&&void 0!==e.expand&&void 0!==e.collapse}static sortColumns(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return[...e].sort(((e,r)=>{var n=e.name.toUpperCase(),a=r.name.toUpperCase();return B.sort(n,a,t)}))}constructor(e){re(this,"dh",void 0),this.dh=e,function(e){var t=function(e,t){for(var r=new Set,n=e,a=0;null!=n&&n!==Object.prototype&&(a<=1||t);){for(var i of Object.getOwnPropertyNames(n))"constructor"!==i&&"function"==typeof n[i]&&r.add(i);n=Object.getPrototypeOf(n),a+=1}return[...r.keys()]}(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);t.forEach((t=>{e[t]=e[t].bind(e)}))}(this)}createDistinctSortedColumnTable(e,t,r){var n=arguments,a=this;return te((function*(){if(null==e)return null;for(var i=e,o=n.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=n[u];l.length>0&&(i=yield e.copy(),yield i.applyFilter(q(...l.map((e=>e(i))))));var s=i.findColumn(t),c=yield i.selectDistinct([s]);i!==e&&i.close();var m=c.findColumn(t).sort()[r]();return a.applySort(c,[m])}))()}doesColumnValueExist(e,t,r,n){var a=this;return te((function*(){if(null==e)return null;var i=I(a,t,r,n?"eq":"eqIgnoreCase"),o=yield e.copy();yield a.applyFilter(o,q(i(o)));var l=$(o);return o.close(),l>0}))()}makeQuickFilter(e,t,r){for(var n=t.split("||"),a=null,i=0;i<n.length;i+=1){for(var o=n[i].split("&&"),l=null,u=0;u<o.length;u+=1){var s=o[u].trim();if(s.length>0){var c=this.makeQuickFilterFromComponent(e,s,r);if(!c)throw new Error("Unable to parse quick filter from text ".concat(t));l=l?l.and(c):c}}a=a&&l?a.or(l):l}return a}makeQuickFilterFromComponent(e,t,r){var{type:n}=e;return ae.isNumberType(n)?this.makeQuickNumberFilter(e,t):ae.isBooleanType(n)?this.makeQuickBooleanFilter(e,t):null!=r&&ae.isDateType(n)?this.makeQuickDateFilter(e,t,r):ae.isCharType(n)?this.makeQuickCharFilter(e,t):this.makeQuickTextFilter(e,t)}makeQuickNumberFilter(e,t){var r=e.filter(),{dh:n}=this,a=null,i=/\s*(>=|<=|=>|=<|>|<|!=|=|!)?(\s*-\s*)?(\s*\d*(?:,\d{3})*(?:\.\d*)?\s*)?(null|nan|infinity|inf|\u221E)?(.*)/i.exec(t),o=null,l=null,u=null,s=null,c=null;if(null!==i&&i.length>3&&([,o,l,u,s,c]=i),null!=c&&c.trim().length>0)return null;if(null==o&&(o="="),null!=s){if("="!==o&&"!"!==o&&"!="!==o)return null;switch(s=s.trim().toLowerCase()){case"null":a=r.isNull();break;case"nan":a=n.FilterCondition.invoke("isNaN",r);break;case"infinity":case"inf":case"∞":a=null!=l?n.FilterCondition.invoke("isInf",r).and(r.lessThan(n.FilterValue.ofNumber(0))):n.FilterCondition.invoke("isInf",r).and(r.greaterThan(n.FilterValue.ofNumber(0)))}return null===a||"!"!==o&&"!="!==o||(a=a.not()),a}if(null==u)return null;if(u=ae.removeCommas(u),ae.isLongType(e.type))try{u=n.FilterValue.ofNumber(n.LongWrapper.ofString("".concat(null!=l?"-":"").concat(u)))}catch(e){return ne.warn("Unable to create long filter",e),null}else{if(null==(u=parseFloat(u))||Number.isNaN(u))return null;u=n.FilterValue.ofNumber(null!=l?0-u:u)}return a=e.filter(),ae.makeRangeFilterWithOperation(a,o,u)}static escapeQuickTextFilter(e){var t,r;if(null==e)return null;var n,a=/^(!~|!=|~|=|!)?(.*)/.exec(e),i=null,o=null;return null!==a&&a.length>2&&([,i,o]=a),null!=i?"\\".concat(i).concat(null!==(n=o)&&void 0!==n?n:""):null!=o&&/^\\*null$/.test(o.toLowerCase())||null!=o&&o.startsWith("*")?"\\".concat(o):null!=o&&o.endsWith("*")&&!o.endsWith("\\*")?(o=o.substring(0,o.length-1),"".concat(o,"\\*")):"".concat(null!==(t=i)&&void 0!==t?t:"").concat(null!==(r=o)&&void 0!==r?r:"")}static unescapeQuickTextFilter(e){var t,r,n=/^(\\!~|\\!=|\\~|\\=|\\!)?(.*)/.exec(e),a=null,i=null;return null!==n&&n.length>2&&([,a,i]=n),null!=a&&(a=a.replace("\\","")),null!=i&&/^\\*null$/.test(i.toLowerCase())&&(i=i.replace("\\","")),null==a&&null!=i&&i.startsWith("\\*")&&(i=i.substring(1)),null==a&&null!=i&&i.endsWith("\\*")?(i=i.substring(0,i.length-2),"".concat(i,"*")):"".concat(null!==(t=a)&&void 0!==t?t:"").concat(null!==(r=i)&&void 0!==r?r:"")}makeQuickTextFilter(e,t){var{dh:r}=this,n="".concat(t).trim(),a=/^(!~|!=|~|=|!)?(.*)/.exec(n),i=null,o=null;if(null!==a&&a.length>2&&([,i,o]=a,null!=o&&(o=o.trim())),null==o)return null;if(0===o.length&&"="!==i&&"!="!==i)return null;null==i&&(i="=");var l=e.filter();if("null"===o.toLowerCase())switch(i){case"=":return l.isNull();case"!=":case"!":return l.isNull().not()}var u=null,s=null;switch(o.startsWith("*")?(u="*",o=o.substring(1)):o.endsWith("*")&&!o.endsWith("\\*")&&(s="*",o=o.substring(0,o.length-1)),o=ae.unescapeQuickTextFilter(o),i){case"~":return l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E.*"))));case"!~":return l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E.*"))).not());case"!=":return"*"===u?l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E$"))).not()):"*"===s?l.isNull().or(l.invoke("matches",r.FilterValue.ofString("(?s)(?i)^\\Q".concat(o,"\\E.*"))).not()):l.notEqIgnoreCase(r.FilterValue.ofString(o.toLowerCase()));case"=":return"*"===u?l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i).*\\Q".concat(o,"\\E$")))):"*"===s?l.isNull().not().and(l.invoke("matches",r.FilterValue.ofString("(?s)(?i)^\\Q".concat(o,"\\E.*")))):l.eqIgnoreCase(r.FilterValue.ofString(o.toLowerCase()))}return null}makeQuickBooleanFilter(e,t){var r=/^(!=|=|!)?(.*)/.exec("".concat(t).trim());if(null===r)return null;var[,n,a]=r,i="!"===n||"!="===n,o=a.trim().toLowerCase(),l=e.filter();try{var u=ae.makeBooleanValue(o);return l=null!=u&&u?l.isTrue():null===u?l.isNull():l.isFalse(),i?l.not():l}catch(e){return null}}makeQuickDateFilter(e,t,r){var n=t.trim(),a=/\s*(>=|<=|=>|=<|>|<|!=|!|=)?(.*)/.exec(n);if(null==a||a.length<=2)throw new Error("Unable to parse date filter: ".concat(t));var i=null,o=null;[,i,o]=a;var l=L.eq;switch(i){case"<":l=L.lessThan;break;case"<=":case"=<":l=L.lessThanOrEqualTo;break;case">":l=L.greaterThan;break;case">=":case"=>":l=L.greaterThanOrEqualTo;break;case"!=":case"!":l=L.notEq;break;default:l=L.eq}return this.makeQuickDateFilterWithOperation(e,o,l,r)}makeQuickDateFilterWithOperation(e,t,r,n){var{dh:a}=this,[i,o]=M.parseDateRange(a,t,n),l=null!=i?a.FilterValue.ofNumber(i):null,u=null!=o?a.FilterValue.ofNumber(o):null,s=e.filter();if(null==l)return r===L.notEq?s.isNull().not():s.isNull();switch(r){case L.eq:if(null!=u){var c=s.greaterThanOrEqualTo(l),m=s.lessThan(u);return c.and(m)}return s.eq(l);case L.lessThan:return s.lessThan(l);case L.lessThanOrEqualTo:return null!=u?s.lessThan(u):s.lessThanOrEqualTo(l);case L.greaterThan:return null!=u?s.greaterThanOrEqualTo(u):s.greaterThan(l);case L.greaterThanOrEqualTo:return s.greaterThanOrEqualTo(l);case L.notEq:if(null!=u){var f=s.lessThan(l),d=s.greaterThanOrEqualTo(u);return f.or(d)}return s.notEq(l);default:throw new Error("Invalid operator: ".concat(r))}}makeQuickCharFilter(e,t){var{dh:r}=this,n="".concat(t).trim(),a=/^(>=|<=|=>|=<|>|<|!=|=|!)?(null|"."|'.'|.)?(.*)/.exec(n),i=null,o=null,l=null;if(null!==a&&a.length>3&&([,i,o,l]=a),null!=l&&l.trim().length>0)return null;if(null==o||0===o.length)return null;null==i&&(i="=");var u=e.filter();if("null"===o.toLowerCase())switch(i){case"=":return u.isNull();case"!=":case"!":return u.isNull().not();default:return null}var s=r.FilterValue.ofString(ae.isRangeOperation(i)?ae.quoteValue(o):o);return ae.makeRangeFilterWithOperation(u,i,s)}makeAdvancedFilter(e,t,r){for(var{filterItems:n,filterOperators:a,invertSelection:i,selectedValues:o}=t,l=null,u=0;u<n.length;u+=1){var s=n[u],{selectedType:c,value:m}=s;if(null!=c&&c.length>0&&null!=m&&m.length>0)try{var f=this.makeAdvancedValueFilter(e,c,m,r);if(null!=f){if(0===u)l=f;else if(null!==l&&u-1<a.length){var d=a[u-1];if(d===j.and)l=l.and(f);else{if(d!==j.or){ne.error("Unexpected filter operator",d,f),l=null;break}l=l.or(f)}}}else ne.debug2("Empty filter ignored for",c,m)}catch(e){ne.error("Unable to create filter",e),l=null;break}}var p=this.makeSelectValueFilter(e,o,i);return null!=p&&(l=null!=l?l.and(p):p),l}makeAdvancedValueFilter(e,t,r,n){var{dh:a}=this;if(ae.isDateType(e.type))return this.makeQuickDateFilterWithOperation(e,r,t,n);if(ae.isNumberType(e.type)||ae.isCharType(e.type))return this.makeQuickFilter(e,"".concat(ae.getFilterOperatorString(t)).concat(r));var i=this.makeFilterValue(e.type,r),o=e.filter();switch(t){case L.eq:return o.eq(i);case L.eqIgnoreCase:return o.eqIgnoreCase(i);case L.notEq:return o.notEq(i);case L.notEqIgnoreCase:return o.notEqIgnoreCase(i);case L.greaterThan:return o.greaterThan(i);case L.greaterThanOrEqualTo:return o.greaterThanOrEqualTo(i);case L.lessThan:return o.lessThan(i);case L.lessThanOrEqualTo:return o.lessThanOrEqualTo(i);case L.isTrue:return o.isTrue();case L.isFalse:return o.isFalse();case L.isNull:return o.isNull();case L.contains:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E.*"))));case L.notContains:return o.isNull().or(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E.*"))).not());case L.startsWith:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i)^\\Q".concat(r,"\\E.*"))));case L.endsWith:return o.isNull().not().and(o.invoke("matches",a.FilterValue.ofString("(?s)(?i).*\\Q".concat(r,"\\E$"))));default:throw new Error("Unexpected filter operation: ".concat(t))}}applyNeverFilter(e,t){var r=arguments,n=this;return te((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:ae.APPLY_TABLE_CHANGE_TIMEOUT_MS;if(null==e)return null;var i=e.findColumn(t),o=[n.makeNeverFilter(i)];return yield n.applyFilter(e,o,a),e}))()}applyCustomColumns(e,t){var r=arguments,n=this;return te((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:ae.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return ae.executeAndWaitForEvent((e=>null==e?void 0:e.applyCustomColumns(t)),e,i.Table.EVENT_CUSTOMCOLUMNSCHANGED,a)}))()}applyFilter(e,t){var r=arguments,n=this;return te((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:ae.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return ae.executeAndWaitForEvent((e=>null==e?void 0:e.applyFilter(t)),e,i.Table.EVENT_FILTERCHANGED,a)}))()}applySort(e,t){var r=arguments,n=this;return te((function*(){var a=r.length>2&&void 0!==r[2]?r[2]:ae.APPLY_TABLE_CHANGE_TIMEOUT_MS,{dh:i}=n;return ae.executeAndWaitForEvent((e=>null==e?void 0:e.applySort(t)),e,i.Table.EVENT_SORTCHANGED,a)}))()}makeNeverFilter(e){var t,{dh:r}=this;t=ae.isTextType(e.type)?r.FilterValue.ofString("a"):ae.isBooleanType(e.type)?r.FilterValue.ofBoolean(!0):ae.isDateType(e.type)?r.FilterValue.ofNumber(r.DateWrapper.ofJsDate(new Date)):r.FilterValue.ofNumber(0);var n=e.filter().eq(t),a=e.filter().notEq(t);return n.and(a)}makeFilterValue(e,t){var{dh:r}=this,n=ae.getBaseType(e);return ae.isTextType(n)?r.FilterValue.ofString(t):ae.isLongType(n)?r.FilterValue.ofNumber(r.LongWrapper.ofString(ae.removeCommas(t))):r.FilterValue.ofNumber(ae.removeCommas(t))}makeFilterRawValue(e,t){var{dh:r}=this;return ae.isTextType(e)?r.FilterValue.ofString(t):ae.isBooleanType(e)?r.FilterValue.ofBoolean(t):r.FilterValue.ofNumber(t)}makeValue(e,t,r){var{dh:n}=this;if("null"===t)return null;if(ae.isTextType(e))return t;if(ae.isLongType(e))return n.LongWrapper.ofString(ae.removeCommas(t));if(ae.isBooleanType(e))return ae.makeBooleanValue(t,!0);if(ae.isDateType(e)){var[a]=M.parseDateRange(n,t,r);return a}return ae.isNumberType(e)?ae.makeNumberValue(t):(ne.error("Unexpected column type",e),null)}makeSelectValueFilter(e,t,r){var{dh:n}=this;if(0===t.length)return r?null:this.makeNeverFilter(e);for(var a=[],i=!1,o=0;o<t.length;o+=1){var l=t[o];null==l?i=!0:ae.isTextType(e.type)?a.push(n.FilterValue.ofString("number"==typeof l?String.fromCharCode(l):l)):ae.isBooleanType(e.type)?a.push(n.FilterValue.ofBoolean(Boolean(l))):a.push(n.FilterValue.ofNumber(l))}return i?a.length>0?r?e.filter().isNull().not().and(e.filter().notIn(a)):e.filter().isNull().or(e.filter().in(a)):r?e.filter().isNull().not():e.filter().isNull():r?e.filter().notIn(a):e.filter().in(a)}}re(ae,"dataType",{BOOLEAN:"boolean",CHAR:"char",DATETIME:"datetime",DECIMAL:"decimal",INT:"int",STRING:"string",UNKNOWN:"unknown"}),re(ae,"sortDirection",{ascending:"ASC",descending:"DESC",reverse:"REVERSE",none:null}),re(ae,"APPLY_TABLE_CHANGE_TIMEOUT_MS",3e4),re(ae,"REVERSE_TYPE",Object.freeze({NONE:"none",PRE_SORT:"pre-sort",POST_SORT:"post-sort"})),re(ae,"NUMBER_REGEX",/^-?\d+(\.\d+)?$/),re(ae,"executeAndWaitForEvent",function(){var e=te((function*(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae.APPLY_TABLE_CHANGE_TIMEOUT_MS;if(null==t)return null;var a=ae.makeCancelableTableEventPromise(t,r,n);return e(t),yield a,t}));return function(t,r,n){return e.apply(this,arguments)}}());const ie=ae;function oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class le{static makeColumnFormatMap(e){return null==e?new Map:e.reduce(((e,t)=>{var r=ie.getNormalizedType(t.columnType);if(null===r)return e;e.has(r)||e.set(r,new Map);var n=e.get(r);return null==n||n.set(t.columnName,t.format),e}),new Map)}static makeColumnFormattingRule(e,t,r){return{columnType:e,columnName:t,format:r}}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];oe(this,"defaultColumnFormatter",void 0),oe(this,"typeFormatterMap",void 0),oe(this,"columnFormatMap",void 0),oe(this,"truncateNumbersWithPound",void 0),this.defaultColumnFormatter=new S,this.typeFormatterMap=new Map([[ie.dataType.BOOLEAN,new c],[ie.dataType.CHAR,new m],[ie.dataType.DATETIME,new h(e,r)],[ie.dataType.DECIMAL,new y(e,n)],[ie.dataType.INT,new b(e,a)],[ie.dataType.STRING,new w]]),this.columnFormatMap=le.makeColumnFormatMap(t),this.truncateNumbersWithPound=i}getColumnFormatMapForType(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ie.getNormalizedType(e);if(null!==r)return t&&!this.columnFormatMap.has(r)&&this.columnFormatMap.set(r,new Map),this.columnFormatMap.get(r)}getColumnFormat(e,t){var r,n=this.getColumnFormatMapForType(e);return null!==(r=null==n?void 0:n.get(t))&&void 0!==r?r:null}getColumnTypeFormatter(e){var t,r=ie.getNormalizedType(e),n=this.defaultColumnFormatter;return r&&(n=null!==(t=this.typeFormatterMap.get(r))&&void 0!==t?t:n),n}getFormattedString(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0;if(null==e)return"";var a=this.getColumnTypeFormatter(t),i=n||this.getColumnFormat(t,r);return a.format(e,null!=i?i:void 0)}get timeZone(){var e,t=this.typeFormatterMap.get(ie.dataType.DATETIME);return null==t||null===(e=t.dhTimeZone)||void 0===e?void 0:e.id}}function ue(e){if(e&&e.formatter){var{formatter:t}=e;return t}}function se(e){return{timeZone:null==e?void 0:e.timeZone,defaultDateTimeFormatString:null==e?void 0:e.defaultDateTimeFormat,showTimeZone:null==e?void 0:e.showTimeZone,showTSeparator:null==e?void 0:e.showTSeparator}}function ce(e,t,r){var n=e.getColumnFormat(r,t);return null!=n&&(n.type===s.TYPE_CONTEXT_PRESET||n.type===s.TYPE_CONTEXT_CUSTOM)}const me={getColumnFormats:ue,getDateTimeFormatterOptions:se,isCustomColumnFormatDefined:ce};var fe=r(670),de=r.n(fe);function pe(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}var ve=d().module("MessageUtils"),he="io.deephaven.message.LoginOptions.request",ge="io.deephaven.message.SessionDetails.request",Te="io.deephaven.broadcast",ye="io.deephaven.broadcast.Login",Se="io.deephaven.broadcast.Logout";function Ee(e){var t=e;return null!=t&&"string"==typeof t.id&&"string"==typeof t.message}function Fe(e){return Ee(e)&&e.message===ye}function be(e){return Ee(e)&&e.message===Se}function we(e){return null!=e&&"string"==typeof e.id}function Ne(e){return{message:e,id:arguments.length>1&&void 0!==arguments[1]?arguments[1]:de()(),payload:arguments.length>2?arguments[2]:void 0}}function Ce(e,t){return{id:e,payload:t}}function Me(){return null!=window.opener?window.opener:null!=window.parent&&window.parent!==window?window.parent:null}function ke(e){return Oe.apply(this,arguments)}function Oe(){var e;return e=function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,r=Me();if(null==r)throw new Error("window parent is null, unable to send request.");return new Promise(((n,i)=>{var o,l=de()(),u=e=>{var{data:t}=e;we(t)?(ve.debug("Received message",t),(null==t?void 0:t.id)===l?(window.clearTimeout(o),window.removeEventListener("message",u),n(t.payload)):ve.debug("Ignore message, id doesn't match",t)):ve.debug("Ignoring non-deephaven response",t)};window.addEventListener("message",u),o=window.setTimeout((()=>{window.removeEventListener("message",u),i(new a("Request timed out"))}),t),r.postMessage(Ne(e,l),"*")}))},Oe=function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){pe(i,n,a,o,l,"next",e)}function l(e){pe(i,n,a,o,l,"throw",e)}o(void 0)}))},Oe.apply(this,arguments)}class De extends Error{constructor(){var e,t,r;super(...arguments),e=this,r=!0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="isNoConsolesError"))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}function Ie(e){return e.isNoConsolesError}const _e=De;function Pe(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function Ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Pe(i,n,a,o,l,"next",e)}function l(e){Pe(i,n,a,o,l,"throw",e)}o(void 0)}))}}var xe=d().module("SessionUtils");function Le(e,t){return xe.info("Starting connection to '".concat(t,"'...")),new e.IdeConnection(t)}function Re(e,t,r){return je.apply(this,arguments)}function je(){return(je=Ae((function*(e,t,r){xe.info("Getting console types...");var n=yield t.getConsoleTypes();if(0===n.length)throw new _e("No console types available");xe.info("Available types:",n);var a=n[0];xe.info("Starting session with type",a);var i=yield t.startSession(a),o={type:a,id:de().generate()};return xe.info("Console session established",o),{session:i,config:o,connection:t,details:r,dh:e}}))).apply(this,arguments)}function qe(e,t,r){return xe.info("createCoreClient",t),new e.CoreClient(t,r)}function Ve(){return(Ve=Ae((function*(){var e,t=yield ke(ge);if(null==(e=t)||"object"!=typeof e)throw new Error("Unexpected session details response: ".concat(t));return t}))).apply(this,arguments)}function Ue(){return He.apply(this,arguments)}function He(){return He=Ae((function*(){return"parent"===new URLSearchParams(window.location.search).get("authProvider")?function(){return Ve.apply(this,arguments)}():{}})),He.apply(this,arguments)}function Be(e,t,r){return We.apply(this,arguments)}function We(){return(We=Ae((function*(e,t,r){var n;try{n=yield Re(e,t,r)}catch(e){if(!Ie(e))throw e}return n}))).apply(this,arguments)}},378:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,o=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==o.call(e)}(e))return NaN;if(l(e)){var u="function"==typeof e.valueOf?e.valueOf():e;e=l(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var s=n.test(e);return s||a.test(e)?i(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=u(r))==r?r:0),void 0!==t&&(t=(t=u(t))==t?t:0),function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}(u(e),t,r)}},670:(e,t,r)=>{"use strict";e.exports=r(607)},829:(e,t,r)=>{"use strict";var n,a,i,o=r(946),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){i=!1}function s(e){if(e){if(e!==n){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,u()}}else n!==l&&(n=l,u())}function c(){return i||(i=function(){n||s(l);for(var e,t=n.split(""),r=[],a=o.nextValue();t.length>0;)a=o.nextValue(),e=Math.floor(a*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||l},characters:function(e){return s(e),n},seed:function(e){o.seed(e),a!==e&&(u(),a=e)},lookup:function(e){return c()[e]},shuffled:c}},719:(e,t,r)=>{"use strict";var n,a,i=r(416);r(829),e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1567752802062));return r===a?n++:(n=0,a=r),t+=i(7),t+=i(e),n>0&&(t+=i(n)),t+i(r)}},416:(e,t,r)=>{"use strict";var n=r(829),a=r(766),i=r(296);e.exports=function(e){for(var t,r=0,o="";!t;)o+=i(a,n.get(),1),t=e<Math.pow(16,r+1),r++;return o}},607:(e,t,r)=>{"use strict";var n=r(829),a=r(719),i=r(82),o=r(636)||0;function l(){return a(o)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=i},82:(e,t,r)=>{"use strict";var n=r(829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},766:e=>{"use strict";var t,r="object"==typeof window&&(window.crypto||window.msCrypto);t=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*n*r/t.length),i="";;)for(var o=e(a),l=a;l--;)if((i+=t[o[l]&n]||"").length===+r)return i}}}]);