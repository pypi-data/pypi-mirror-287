"use strict";(self.webpackChunkjupyterlab_xssguard=self.webpackChunkjupyterlab_xssguard||[]).push([[323],{323:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(656);let s=0;window.addEventListener("message",(e=>{const t=e.data[0],n=document.getElementById(t);n&&n.setAttribute("style","height: "+e.data[1]+"px; width: 100%;")}),!1);class d extends o.RenderedText{render(e){return(async e=>{if(1e5===s)return void console.log("Exceeded max iframes");s++;const t=document.head,n=document.body,o=document.createElement("iframe");o.id="xss_guard"+s,o.sandbox="allow-scripts allow-modals",o.frameBorder="0";const d=document.implementation.createHTMLDocument(),a=d.head;t.querySelectorAll("style").forEach((e=>{const t=e.cloneNode(!0);a.appendChild(t)})),n.querySelectorAll('link[rel="stylesheet"]').forEach((e=>{const t=e.cloneNode(!0);a.appendChild(t)}));const r=d.body;r.setAttribute("style","background-color: transparent;");const i=document.createElement("script");i.type="text/javascript",i.innerHTML="\nfunction sendHeight()\n{\n  if(parent.postMessage && document.getElementById('contents_div').offsetHeight)\n  {\n    var height = document.getElementById('contents_div').offsetHeight;\n    parent.postMessage(['"+o.id+"', height], '*');\n  }\n}\n\nfunction loadIframe()\n{\n  sendHeight();\n  setInterval('sendHeight()', 1000);\n}\n  ",a.appendChild(i),r.setAttribute("onload","loadIframe()");const l=document.createElement("div");l.className="jp-WindowedPanel lm-Widget jp-Notebook jp-mod-scrollPastEndlm-Widget lm-Panel jp-Cell-outputWrapper jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output",l.id="contents_div",d.body.appendChild(l),l.innerHTML=e.source;const c=d.documentElement.outerHTML;e.host.append(o),o.srcdoc=c})({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),translator:this.translator})}}const a={safe:!0,mimeTypes:["text/html"],createRenderer:e=>new d(e)},r={id:"jupyterlab_xssguard:plugin",description:"A JupyterLab extension to insert code block output into iframe.",autoStart:!0,requires:[o.IRenderMimeRegistry],activate:(e,t)=>{console.log("JupyterLab extension jupyterlab_xssguard is activated!"),t.addFactory(a)}}}}]);