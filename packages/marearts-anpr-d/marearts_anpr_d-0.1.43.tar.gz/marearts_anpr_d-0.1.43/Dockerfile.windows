FROM python:3.10-windowsservercore

WORKDIR /app

COPY . .

RUN pip install --upgrade pip && \
    pip install cython numpy

RUN python setup.py build_ext --inplace

CMD python -c "import shutil; import os; [shutil.copy(f, '/output') for f in os.listdir() if f.endswith('.pyd')]"